require=function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return i(n?n:e)},u,u.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t){function n(){}var r=t.exports={};r.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.MutationObserver,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};var r=[];if(t){var i=document.createElement("div"),o=new MutationObserver(function(){var e=r.slice();r.length=0,e.forEach(function(e){e()})});return o.observe(i,{attributes:!0}),function(e){r.length||i.setAttribute("yes","no"),r.push(e)}}return n?(window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(e){r.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=n,r.addListener=n,r.once=n,r.off=n,r.removeListener=n,r.removeAllListeners=n,r.emit=n,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],2:[function(e,t){"use strict";var n=e("./focusNode"),r={componentDidMount:function(){this.props.autoFocus&&n(this.getDOMNode())}};t.exports=r},{"./focusNode":112}],3:[function(e,t){"use strict";function n(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function r(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}var i=e("./EventConstants"),o=e("./EventPropagators"),a=e("./ExecutionEnvironment"),s=e("./SyntheticInputEvent"),c=e("./keyOf"),l=a.canUseDOM&&"TextEvent"in window&&!("documentMode"in document||n()),u=32,h=String.fromCharCode(u),p=i.topLevelTypes,d={beforeInput:{phasedRegistrationNames:{bubbled:c({onBeforeInput:null}),captured:c({onBeforeInputCapture:null})},dependencies:[p.topCompositionEnd,p.topKeyPress,p.topTextInput,p.topPaste]}},f=null,m=!1,v={eventTypes:d,extractEvents:function(e,t,n,i){var a;if(l)switch(e){case p.topKeyPress:var c=i.which;if(c!==u)return;m=!0,a=h;break;case p.topTextInput:if(a=i.data,a===h&&m)return;break;default:return}else{switch(e){case p.topPaste:f=null;break;case p.topKeyPress:i.which&&!r(i)&&(f=String.fromCharCode(i.which));break;case p.topCompositionEnd:f=i.data}if(null===f)return;a=f}if(a){var v=s.getPooled(d.beforeInput,n,i);return v.data=a,f=null,o.accumulateTwoPhaseDispatches(v),v}}};t.exports=v},{"./EventConstants":16,"./EventPropagators":21,"./ExecutionEnvironment":22,"./SyntheticInputEvent":90,"./keyOf":134}],4:[function(e,t){"use strict";function n(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var r={columnCount:!0,flex:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,strokeOpacity:!0},i=["Webkit","ms","Moz","O"];Object.keys(r).forEach(function(e){i.forEach(function(t){r[n(t,e)]=r[e]})});var o={background:{backgroundImage:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundColor:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0}},a={isUnitlessNumber:r,shorthandPropertyExpansions:o};t.exports=a},{}],5:[function(e,t){(function(n){"use strict";var r=e("./CSSProperty"),i=e("./ExecutionEnvironment"),o=e("./camelizeStyleName"),a=e("./dangerousStyleValue"),s=e("./hyphenateStyleName"),c=e("./memoizeStringOnly"),l=e("./warning"),u=c(function(e){return s(e)}),h="cssFloat";if(i.canUseDOM&&void 0===document.documentElement.style.cssFloat&&(h="styleFloat"),"production"!==n.env.NODE_ENV)var p={},d=function(e){p.hasOwnProperty(e)&&p[e]||(p[e]=!0,"production"!==n.env.NODE_ENV?l(!1,"Unsupported style property "+e+". Did you mean "+o(e)+"?"):null)};var f={createMarkupForStyles:function(e){var t="";for(var r in e)if(e.hasOwnProperty(r)){"production"!==n.env.NODE_ENV&&r.indexOf("-")>-1&&d(r);var i=e[r];null!=i&&(t+=u(r)+":",t+=a(r,i)+";")}return t||null},setValueForStyles:function(e,t){var i=e.style;for(var o in t)if(t.hasOwnProperty(o)){"production"!==n.env.NODE_ENV&&o.indexOf("-")>-1&&d(o);var s=a(o,t[o]);if("float"===o&&(o=h),s)i[o]=s;else{var c=r.shorthandPropertyExpansions[o];if(c)for(var l in c)i[l]="";else i[o]=""}}}};t.exports=f}).call(this,e("_process"))},{"./CSSProperty":4,"./ExecutionEnvironment":22,"./camelizeStyleName":101,"./dangerousStyleValue":106,"./hyphenateStyleName":125,"./memoizeStringOnly":136,"./warning":146,_process:1}],6:[function(e,t){(function(n){"use strict";function r(){this._callbacks=null,this._contexts=null}var i=e("./PooledClass"),o=e("./Object.assign"),a=e("./invariant");o(r.prototype,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,t=this._contexts;if(e){"production"!==n.env.NODE_ENV?a(e.length===t.length,"Mismatched list of contexts in callback queue"):a(e.length===t.length),this._callbacks=null,this._contexts=null;for(var r=0,i=e.length;i>r;r++)e[r].call(t[r]);e.length=0,t.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),i.addPoolingTo(r),t.exports=r}).call(this,e("_process"))},{"./Object.assign":27,"./PooledClass":28,"./invariant":127,_process:1}],7:[function(e,t){"use strict";function n(e){return"SELECT"===e.nodeName||"INPUT"===e.nodeName&&"file"===e.type}function r(e){var t=w.getPooled(T.change,D,e);x.accumulateTwoPhaseDispatches(t),b.batchedUpdates(i,t)}function i(e){y.enqueueEvents(e),y.processEventQueue()}function o(e,t){R=e,D=t,R.attachEvent("onchange",r)}function a(){R&&(R.detachEvent("onchange",r),R=null,D=null)}function s(e,t,n){return e===S.topChange?n:void 0}function c(e,t,n){e===S.topFocus?(a(),o(t,n)):e===S.topBlur&&a()}function l(e,t){R=e,D=t,A=e.value,N=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(R,"value",L),R.attachEvent("onpropertychange",h)}function u(){R&&(delete R.value,R.detachEvent("onpropertychange",h),R=null,D=null,A=null,N=null)}function h(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==A&&(A=t,r(e))}}function p(e,t,n){return e===S.topInput?n:void 0}function d(e,t,n){e===S.topFocus?(u(),l(t,n)):e===S.topBlur&&u()}function f(e){return e!==S.topSelectionChange&&e!==S.topKeyUp&&e!==S.topKeyDown||!R||R.value===A?void 0:(A=R.value,D)}function m(e){return"INPUT"===e.nodeName&&("checkbox"===e.type||"radio"===e.type)}function v(e,t,n){return e===S.topClick?n:void 0}var g=e("./EventConstants"),y=e("./EventPluginHub"),x=e("./EventPropagators"),_=e("./ExecutionEnvironment"),b=e("./ReactUpdates"),w=e("./SyntheticEvent"),E=e("./isEventSupported"),M=e("./isTextInputElement"),C=e("./keyOf"),S=g.topLevelTypes,T={change:{phasedRegistrationNames:{bubbled:C({onChange:null}),captured:C({onChangeCapture:null})},dependencies:[S.topBlur,S.topChange,S.topClick,S.topFocus,S.topInput,S.topKeyDown,S.topKeyUp,S.topSelectionChange]}},R=null,D=null,A=null,N=null,P=!1;_.canUseDOM&&(P=E("change")&&(!("documentMode"in document)||document.documentMode>8));var O=!1;_.canUseDOM&&(O=E("input")&&(!("documentMode"in document)||document.documentMode>9));var L={get:function(){return N.get.call(this)},set:function(e){A=""+e,N.set.call(this,e)}},U={eventTypes:T,extractEvents:function(e,t,r,i){var o,a;if(n(t)?P?o=s:a=c:M(t)?O?o=p:(o=f,a=d):m(t)&&(o=v),o){var l=o(e,t,r);if(l){var u=w.getPooled(T.change,l,i);return x.accumulateTwoPhaseDispatches(u),u}}a&&a(e,t,r)}};t.exports=U},{"./EventConstants":16,"./EventPluginHub":18,"./EventPropagators":21,"./ExecutionEnvironment":22,"./ReactUpdates":80,"./SyntheticEvent":88,"./isEventSupported":128,"./isTextInputElement":130,"./keyOf":134}],8:[function(e,t){"use strict";var n=0,r={createReactRootIndex:function(){return n++}};t.exports=r},{}],9:[function(e,t){"use strict";function n(e){switch(e){case g.topCompositionStart:return x.compositionStart;case g.topCompositionEnd:return x.compositionEnd;case g.topCompositionUpdate:return x.compositionUpdate}}function r(e,t){return e===g.topKeyDown&&t.keyCode===f}function i(e,t){switch(e){case g.topKeyUp:return-1!==d.indexOf(t.keyCode);case g.topKeyDown:return t.keyCode!==f;case g.topKeyPress:case g.topMouseDown:case g.topBlur:return!0;default:return!1}}function o(e){this.root=e,this.startSelection=l.getSelection(e),this.startValue=this.getText()}var a=e("./EventConstants"),s=e("./EventPropagators"),c=e("./ExecutionEnvironment"),l=e("./ReactInputSelection"),u=e("./SyntheticCompositionEvent"),h=e("./getTextContentAccessor"),p=e("./keyOf"),d=[9,13,27,32],f=229,m=c.canUseDOM&&"CompositionEvent"in window,v=!m||"documentMode"in document&&document.documentMode>8&&document.documentMode<=11,g=a.topLevelTypes,y=null,x={compositionEnd:{phasedRegistrationNames:{bubbled:p({onCompositionEnd:null}),captured:p({onCompositionEndCapture:null})},dependencies:[g.topBlur,g.topCompositionEnd,g.topKeyDown,g.topKeyPress,g.topKeyUp,g.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:p({onCompositionStart:null}),captured:p({onCompositionStartCapture:null})},dependencies:[g.topBlur,g.topCompositionStart,g.topKeyDown,g.topKeyPress,g.topKeyUp,g.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:p({onCompositionUpdate:null}),captured:p({onCompositionUpdateCapture:null})},dependencies:[g.topBlur,g.topCompositionUpdate,g.topKeyDown,g.topKeyPress,g.topKeyUp,g.topMouseDown]}};o.prototype.getText=function(){return this.root.value||this.root[h()]},o.prototype.getData=function(){var e=this.getText(),t=this.startSelection.start,n=this.startValue.length-this.startSelection.end;return e.substr(t,e.length-n-t)};var _={eventTypes:x,extractEvents:function(e,t,a,c){var l,h;if(m?l=n(e):y?i(e,c)&&(l=x.compositionEnd):r(e,c)&&(l=x.compositionStart),v&&(y||l!==x.compositionStart?l===x.compositionEnd&&y&&(h=y.getData(),y=null):y=new o(t)),l){var p=u.getPooled(l,a,c);return h&&(p.data=h),s.accumulateTwoPhaseDispatches(p),p}}};t.exports=_},{"./EventConstants":16,"./EventPropagators":21,"./ExecutionEnvironment":22,"./ReactInputSelection":60,"./SyntheticCompositionEvent":86,"./getTextContentAccessor":122,"./keyOf":134}],10:[function(e,t){(function(n){"use strict";function r(e,t,n){e.insertBefore(t,e.childNodes[n]||null)}var i,o=e("./Danger"),a=e("./ReactMultiChildUpdateTypes"),s=e("./getTextContentAccessor"),c=e("./invariant"),l=s();i="textContent"===l?function(e,t){e.textContent=t}:function(e,t){for(;e.firstChild;)e.removeChild(e.firstChild);if(t){var n=e.ownerDocument||document;e.appendChild(n.createTextNode(t))}};var u={dangerouslyReplaceNodeWithMarkup:o.dangerouslyReplaceNodeWithMarkup,updateTextContent:i,processUpdates:function(e,t){for(var s,l=null,u=null,h=0;s=e[h];h++)if(s.type===a.MOVE_EXISTING||s.type===a.REMOVE_NODE){var p=s.fromIndex,d=s.parentNode.childNodes[p],f=s.parentID;"production"!==n.env.NODE_ENV?c(d,"processUpdates(): Unable to find child %s of element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting tags like <form>, <p>, or <a>, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",p,f):c(d),l=l||{},l[f]=l[f]||[],l[f][p]=d,u=u||[],u.push(d)}var m=o.dangerouslyRenderMarkup(t);if(u)for(var v=0;v<u.length;v++)u[v].parentNode.removeChild(u[v]);for(var g=0;s=e[g];g++)switch(s.type){case a.INSERT_MARKUP:r(s.parentNode,m[s.markupIndex],s.toIndex);break;case a.MOVE_EXISTING:r(s.parentNode,l[s.parentID][s.fromIndex],s.toIndex);break;case a.TEXT_CONTENT:i(s.parentNode,s.textContent);break;case a.REMOVE_NODE:}}};t.exports=u}).call(this,e("_process"))},{"./Danger":13,"./ReactMultiChildUpdateTypes":66,"./getTextContentAccessor":122,"./invariant":127,_process:1}],11:[function(e,t){(function(n){"use strict";function r(e,t){return(e&t)===t}var i=e("./invariant"),o={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=e.Properties||{},a=e.DOMAttributeNames||{},c=e.DOMPropertyNames||{},l=e.DOMMutationMethods||{};e.isCustomAttribute&&s._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var u in t){"production"!==n.env.NODE_ENV?i(!s.isStandardName.hasOwnProperty(u),"injectDOMPropertyConfig(...): You're trying to inject DOM property '%s' which has already been injected. You may be accidentally injecting the same DOM property config twice, or you may be injecting two configs that have conflicting property names.",u):i(!s.isStandardName.hasOwnProperty(u)),s.isStandardName[u]=!0;var h=u.toLowerCase();if(s.getPossibleStandardName[h]=u,a.hasOwnProperty(u)){var p=a[u];s.getPossibleStandardName[p]=u,s.getAttributeName[u]=p}else s.getAttributeName[u]=h;s.getPropertyName[u]=c.hasOwnProperty(u)?c[u]:u,s.getMutationMethod[u]=l.hasOwnProperty(u)?l[u]:null;var d=t[u];s.mustUseAttribute[u]=r(d,o.MUST_USE_ATTRIBUTE),s.mustUseProperty[u]=r(d,o.MUST_USE_PROPERTY),s.hasSideEffects[u]=r(d,o.HAS_SIDE_EFFECTS),s.hasBooleanValue[u]=r(d,o.HAS_BOOLEAN_VALUE),s.hasNumericValue[u]=r(d,o.HAS_NUMERIC_VALUE),s.hasPositiveNumericValue[u]=r(d,o.HAS_POSITIVE_NUMERIC_VALUE),s.hasOverloadedBooleanValue[u]=r(d,o.HAS_OVERLOADED_BOOLEAN_VALUE),"production"!==n.env.NODE_ENV?i(!s.mustUseAttribute[u]||!s.mustUseProperty[u],"DOMProperty: Cannot require using both attribute and property: %s",u):i(!s.mustUseAttribute[u]||!s.mustUseProperty[u]),"production"!==n.env.NODE_ENV?i(s.mustUseProperty[u]||!s.hasSideEffects[u],"DOMProperty: Properties that have side effects must use property: %s",u):i(s.mustUseProperty[u]||!s.hasSideEffects[u]),"production"!==n.env.NODE_ENV?i(!!s.hasBooleanValue[u]+!!s.hasNumericValue[u]+!!s.hasOverloadedBooleanValue[u]<=1,"DOMProperty: Value can be one of boolean, overloaded boolean, or numeric value, but not a combination: %s",u):i(!!s.hasBooleanValue[u]+!!s.hasNumericValue[u]+!!s.hasOverloadedBooleanValue[u]<=1)}}},a={},s={ID_ATTRIBUTE_NAME:"data-reactid",isStandardName:{},getPossibleStandardName:{},getAttributeName:{},getPropertyName:{},getMutationMethod:{},mustUseAttribute:{},mustUseProperty:{},hasSideEffects:{},hasBooleanValue:{},hasNumericValue:{},hasPositiveNumericValue:{},hasOverloadedBooleanValue:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<s._isCustomAttributeFunctions.length;t++){var n=s._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},getDefaultValueForProperty:function(e,t){var n,r=a[e];return r||(a[e]=r={}),t in r||(n=document.createElement(e),r[t]=n[t]),r[t]},injection:o};t.exports=s}).call(this,e("_process"))},{"./invariant":127,_process:1}],12:[function(e,t){(function(n){"use strict";function r(e,t){return null==t||i.hasBooleanValue[e]&&!t||i.hasNumericValue[e]&&isNaN(t)||i.hasPositiveNumericValue[e]&&1>t||i.hasOverloadedBooleanValue[e]&&t===!1}var i=e("./DOMProperty"),o=e("./escapeTextForBrowser"),a=e("./memoizeStringOnly"),s=e("./warning"),c=a(function(e){return o(e)+'="'});if("production"!==n.env.NODE_ENV)var l={children:!0,dangerouslySetInnerHTML:!0,key:!0,ref:!0},u={},h=function(e){if(!(l.hasOwnProperty(e)&&l[e]||u.hasOwnProperty(e)&&u[e])){u[e]=!0;var t=e.toLowerCase(),r=i.isCustomAttribute(t)?t:i.getPossibleStandardName.hasOwnProperty(t)?i.getPossibleStandardName[t]:null;"production"!==n.env.NODE_ENV?s(null==r,"Unknown DOM property "+e+". Did you mean "+r+"?"):null}};var p={createMarkupForID:function(e){return c(i.ID_ATTRIBUTE_NAME)+o(e)+'"'},createMarkupForProperty:function(e,t){if(i.isStandardName.hasOwnProperty(e)&&i.isStandardName[e]){if(r(e,t))return"";var a=i.getAttributeName[e];return i.hasBooleanValue[e]||i.hasOverloadedBooleanValue[e]&&t===!0?o(a):c(a)+o(t)+'"'}return i.isCustomAttribute(e)?null==t?"":c(e)+o(t)+'"':("production"!==n.env.NODE_ENV&&h(e),null)},setValueForProperty:function(e,t,o){if(i.isStandardName.hasOwnProperty(t)&&i.isStandardName[t]){var a=i.getMutationMethod[t];if(a)a(e,o);else if(r(t,o))this.deleteValueForProperty(e,t);else if(i.mustUseAttribute[t])e.setAttribute(i.getAttributeName[t],""+o);else{var s=i.getPropertyName[t];i.hasSideEffects[t]&&""+e[s]==""+o||(e[s]=o)}}else i.isCustomAttribute(t)?null==o?e.removeAttribute(t):e.setAttribute(t,""+o):"production"!==n.env.NODE_ENV&&h(t)},deleteValueForProperty:function(e,t){if(i.isStandardName.hasOwnProperty(t)&&i.isStandardName[t]){var r=i.getMutationMethod[t];if(r)r(e,void 0);else if(i.mustUseAttribute[t])e.removeAttribute(i.getAttributeName[t]);else{var o=i.getPropertyName[t],a=i.getDefaultValueForProperty(e.nodeName,o);i.hasSideEffects[t]&&""+e[o]===a||(e[o]=a)}}else i.isCustomAttribute(t)?e.removeAttribute(t):"production"!==n.env.NODE_ENV&&h(t)}};t.exports=p}).call(this,e("_process"))},{"./DOMProperty":11,"./escapeTextForBrowser":110,"./memoizeStringOnly":136,"./warning":146,_process:1}],13:[function(e,t){(function(n){"use strict";function r(e){return e.substring(1,e.indexOf(" "))}var i=e("./ExecutionEnvironment"),o=e("./createNodesFromMarkup"),a=e("./emptyFunction"),s=e("./getMarkupWrap"),c=e("./invariant"),l=/^(<[^ \/>]+)/,u="data-danger-index",h={dangerouslyRenderMarkup:function(e){"production"!==n.env.NODE_ENV?c(i.canUseDOM,"dangerouslyRenderMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use React.renderToString for server rendering."):c(i.canUseDOM);for(var t,h={},p=0;p<e.length;p++)"production"!==n.env.NODE_ENV?c(e[p],"dangerouslyRenderMarkup(...): Missing markup."):c(e[p]),t=r(e[p]),t=s(t)?t:"*",h[t]=h[t]||[],h[t][p]=e[p];var d=[],f=0;for(t in h)if(h.hasOwnProperty(t)){var m=h[t];for(var v in m)if(m.hasOwnProperty(v)){var g=m[v];m[v]=g.replace(l,"$1 "+u+'="'+v+'" ')}var y=o(m.join(""),a);for(p=0;p<y.length;++p){var x=y[p];x.hasAttribute&&x.hasAttribute(u)?(v=+x.getAttribute(u),x.removeAttribute(u),"production"!==n.env.NODE_ENV?c(!d.hasOwnProperty(v),"Danger: Assigning to an already-occupied result index."):c(!d.hasOwnProperty(v)),d[v]=x,f+=1):"production"!==n.env.NODE_ENV&&console.error("Danger: Discarding unexpected node:",x)}}return"production"!==n.env.NODE_ENV?c(f===d.length,"Danger: Did not assign to every index of resultList."):c(f===d.length),"production"!==n.env.NODE_ENV?c(d.length===e.length,"Danger: Expected markup to render %s nodes, but rendered %s.",e.length,d.length):c(d.length===e.length),d},dangerouslyReplaceNodeWithMarkup:function(e,t){"production"!==n.env.NODE_ENV?c(i.canUseDOM,"dangerouslyReplaceNodeWithMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use React.renderToString for server rendering."):c(i.canUseDOM),"production"!==n.env.NODE_ENV?c(t,"dangerouslyReplaceNodeWithMarkup(...): Missing markup."):c(t),"production"!==n.env.NODE_ENV?c("html"!==e.tagName.toLowerCase(),"dangerouslyReplaceNodeWithMarkup(...): Cannot replace markup of the <html> node. This is because browser quirks make this unreliable and/or slow. If you want to render to the root you must use server rendering. See renderComponentToString()."):c("html"!==e.tagName.toLowerCase());var r=o(t,a)[0];e.parentNode.replaceChild(r,e)}};t.exports=h}).call(this,e("_process"))},{"./ExecutionEnvironment":22,"./createNodesFromMarkup":105,"./emptyFunction":108,"./getMarkupWrap":119,"./invariant":127,_process:1}],14:[function(e,t){"use strict";var n=e("./keyOf"),r=[n({ResponderEventPlugin:null}),n({SimpleEventPlugin:null}),n({TapEventPlugin:null}),n({EnterLeaveEventPlugin:null}),n({ChangeEventPlugin:null}),n({SelectEventPlugin:null}),n({CompositionEventPlugin:null}),n({BeforeInputEventPlugin:null}),n({AnalyticsEventPlugin:null}),n({MobileSafariClickEventPlugin:null})];t.exports=r},{"./keyOf":134}],15:[function(e,t){"use strict";var n=e("./EventConstants"),r=e("./EventPropagators"),i=e("./SyntheticMouseEvent"),o=e("./ReactMount"),a=e("./keyOf"),s=n.topLevelTypes,c=o.getFirstReactDOM,l={mouseEnter:{registrationName:a({onMouseEnter:null}),dependencies:[s.topMouseOut,s.topMouseOver]},mouseLeave:{registrationName:a({onMouseLeave:null}),dependencies:[s.topMouseOut,s.topMouseOver]}},u=[null,null],h={eventTypes:l,extractEvents:function(e,t,n,a){if(e===s.topMouseOver&&(a.relatedTarget||a.fromElement))return null;if(e!==s.topMouseOut&&e!==s.topMouseOver)return null;var h;if(t.window===t)h=t;else{var p=t.ownerDocument;h=p?p.defaultView||p.parentWindow:window}var d,f;if(e===s.topMouseOut?(d=t,f=c(a.relatedTarget||a.toElement)||h):(d=h,f=t),d===f)return null;var m=d?o.getID(d):"",v=f?o.getID(f):"",g=i.getPooled(l.mouseLeave,m,a);g.type="mouseleave",g.target=d,g.relatedTarget=f;var y=i.getPooled(l.mouseEnter,v,a);return y.type="mouseenter",y.target=f,y.relatedTarget=d,r.accumulateEnterLeaveDispatches(g,y,m,v),u[0]=g,u[1]=y,u}};t.exports=h},{"./EventConstants":16,"./EventPropagators":21,"./ReactMount":64,"./SyntheticMouseEvent":92,"./keyOf":134}],16:[function(e,t){"use strict";var n=e("./keyMirror"),r=n({bubbled:null,captured:null}),i=n({topBlur:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topReset:null,topScroll:null,topSelectionChange:null,topSubmit:null,topTextInput:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topWheel:null}),o={topLevelTypes:i,PropagationPhases:r};t.exports=o},{"./keyMirror":133}],17:[function(e,t){(function(n){var r=e("./emptyFunction"),i={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,i){return e.addEventListener?(e.addEventListener(t,i,!0),{remove:function(){e.removeEventListener(t,i,!0)}}):("production"!==n.env.NODE_ENV&&console.error("Attempted to listen to events during the capture phase on a browser that does not support the capture phase. Your application will not receive some events."),{remove:r})},registerDefault:function(){}};t.exports=i}).call(this,e("_process"))},{"./emptyFunction":108,_process:1}],18:[function(e,t){(function(n){"use strict";function r(){var e=!p||!p.traverseTwoPhase||!p.traverseEnterLeave;if(e)throw new Error("InstanceHandle not injected before use!")}var i=e("./EventPluginRegistry"),o=e("./EventPluginUtils"),a=e("./accumulateInto"),s=e("./forEachAccumulated"),c=e("./invariant"),l={},u=null,h=function(e){if(e){var t=o.executeDispatch,n=i.getPluginModuleForEvent(e);n&&n.executeDispatch&&(t=n.executeDispatch),o.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e)}},p=null,d={injection:{injectMount:o.injection.injectMount,injectInstanceHandle:function(e){p=e,"production"!==n.env.NODE_ENV&&r()},getInstanceHandle:function(){return"production"!==n.env.NODE_ENV&&r(),p},injectEventPluginOrder:i.injectEventPluginOrder,injectEventPluginsByName:i.injectEventPluginsByName},eventNameDispatchConfigs:i.eventNameDispatchConfigs,registrationNameModules:i.registrationNameModules,putListener:function(e,t,r){"production"!==n.env.NODE_ENV?c(!r||"function"==typeof r,"Expected %s listener to be a function, instead got type %s",t,typeof r):c(!r||"function"==typeof r);var i=l[t]||(l[t]={});i[e]=r},getListener:function(e,t){var n=l[t];return n&&n[e]},deleteListener:function(e,t){var n=l[t];n&&delete n[e]},deleteAllListeners:function(e){for(var t in l)delete l[t][e]},extractEvents:function(e,t,n,r){for(var o,s=i.plugins,c=0,l=s.length;l>c;c++){var u=s[c];if(u){var h=u.extractEvents(e,t,n,r);h&&(o=a(o,h))}}return o},enqueueEvents:function(e){e&&(u=a(u,e))},processEventQueue:function(){var e=u;u=null,s(e,h),"production"!==n.env.NODE_ENV?c(!u,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented."):c(!u)},__purge:function(){l={}},__getListenerBank:function(){return l}};t.exports=d}).call(this,e("_process"))},{"./EventPluginRegistry":19,"./EventPluginUtils":20,"./accumulateInto":98,"./forEachAccumulated":113,"./invariant":127,_process:1}],19:[function(e,t){(function(n){"use strict";function r(){if(s)for(var e in c){var t=c[e],r=s.indexOf(e);if("production"!==n.env.NODE_ENV?a(r>-1,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",e):a(r>-1),!l.plugins[r]){"production"!==n.env.NODE_ENV?a(t.extractEvents,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",e):a(t.extractEvents),l.plugins[r]=t;var o=t.eventTypes;for(var u in o)"production"!==n.env.NODE_ENV?a(i(o[u],t,u),"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",u,e):a(i(o[u],t,u))}}}function i(e,t,r){"production"!==n.env.NODE_ENV?a(!l.eventNameDispatchConfigs.hasOwnProperty(r),"EventPluginHub: More than one plugin attempted to publish the same event name, `%s`.",r):a(!l.eventNameDispatchConfigs.hasOwnProperty(r)),l.eventNameDispatchConfigs[r]=e;var i=e.phasedRegistrationNames;if(i){for(var s in i)if(i.hasOwnProperty(s)){var c=i[s];o(c,t,r)}return!0}return e.registrationName?(o(e.registrationName,t,r),!0):!1}function o(e,t,r){"production"!==n.env.NODE_ENV?a(!l.registrationNameModules[e],"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",e):a(!l.registrationNameModules[e]),l.registrationNameModules[e]=t,l.registrationNameDependencies[e]=t.eventTypes[r].dependencies}var a=e("./invariant"),s=null,c={},l={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){"production"!==n.env.NODE_ENV?a(!s,"EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React."):a(!s),s=Array.prototype.slice.call(e),r()},injectEventPluginsByName:function(e){var t=!1;for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];c.hasOwnProperty(i)&&c[i]===o||("production"!==n.env.NODE_ENV?a(!c[i],"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",i):a(!c[i]),c[i]=o,t=!0)}t&&r()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return l.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames)if(t.phasedRegistrationNames.hasOwnProperty(n)){var r=l.registrationNameModules[t.phasedRegistrationNames[n]];if(r)return r}return null},_resetEventPlugins:function(){s=null;for(var e in c)c.hasOwnProperty(e)&&delete c[e];l.plugins.length=0;var t=l.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=l.registrationNameModules;for(var i in r)r.hasOwnProperty(i)&&delete r[i]}};t.exports=l}).call(this,e("_process"))},{"./invariant":127,_process:1}],20:[function(e,t){(function(n){"use strict";function r(e){return e===g.topMouseUp||e===g.topTouchEnd||e===g.topTouchCancel}function i(e){return e===g.topMouseMove||e===g.topTouchMove}function o(e){return e===g.topMouseDown||e===g.topTouchStart}function a(e,t){var r=e._dispatchListeners,i=e._dispatchIDs;if("production"!==n.env.NODE_ENV&&d(e),Array.isArray(r))for(var o=0;o<r.length&&!e.isPropagationStopped();o++)t(e,r[o],i[o]);else r&&t(e,r,i)}function s(e,t,n){e.currentTarget=v.Mount.getNode(n);var r=t(e,n);return e.currentTarget=null,r}function c(e,t){a(e,t),e._dispatchListeners=null,e._dispatchIDs=null}function l(e){var t=e._dispatchListeners,r=e._dispatchIDs;if("production"!==n.env.NODE_ENV&&d(e),Array.isArray(t)){for(var i=0;i<t.length&&!e.isPropagationStopped();i++)if(t[i](e,r[i]))return r[i]}else if(t&&t(e,r))return r;return null}function u(e){var t=l(e);return e._dispatchIDs=null,e._dispatchListeners=null,t}function h(e){"production"!==n.env.NODE_ENV&&d(e);var t=e._dispatchListeners,r=e._dispatchIDs;"production"!==n.env.NODE_ENV?m(!Array.isArray(t),"executeDirectDispatch(...): Invalid `event`."):m(!Array.isArray(t));var i=t?t(e,r):null;return e._dispatchListeners=null,e._dispatchIDs=null,i}function p(e){return!!e._dispatchListeners}var d,f=e("./EventConstants"),m=e("./invariant"),v={Mount:null,injectMount:function(e){v.Mount=e,"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?m(e&&e.getNode,"EventPluginUtils.injection.injectMount(...): Injected Mount module is missing getNode."):m(e&&e.getNode))}},g=f.topLevelTypes;"production"!==n.env.NODE_ENV&&(d=function(e){var t=e._dispatchListeners,r=e._dispatchIDs,i=Array.isArray(t),o=Array.isArray(r),a=o?r.length:r?1:0,s=i?t.length:t?1:0;"production"!==n.env.NODE_ENV?m(o===i&&a===s,"EventPluginUtils: Invalid `event`."):m(o===i&&a===s)});var y={isEndish:r,isMoveish:i,isStartish:o,executeDirectDispatch:h,executeDispatch:s,executeDispatchesInOrder:c,executeDispatchesInOrderStopAtTrue:u,hasDispatches:p,injection:v,useTouchEvents:!1};t.exports=y}).call(this,e("_process"))},{"./EventConstants":16,"./invariant":127,_process:1}],21:[function(e,t){(function(n){"use strict";function r(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return v(e,r)}function i(e,t,i){if("production"!==n.env.NODE_ENV&&!e)throw new Error("Dispatching id must not be null");var o=t?m.bubbled:m.captured,a=r(e,i,o);a&&(i._dispatchListeners=d(i._dispatchListeners,a),i._dispatchIDs=d(i._dispatchIDs,e))}function o(e){e&&e.dispatchConfig.phasedRegistrationNames&&p.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,i,e)}function a(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,i=v(e,r);i&&(n._dispatchListeners=d(n._dispatchListeners,i),n._dispatchIDs=d(n._dispatchIDs,e))}}function s(e){e&&e.dispatchConfig.registrationName&&a(e.dispatchMarker,null,e)}function c(e){f(e,o)}function l(e,t,n,r){p.injection.getInstanceHandle().traverseEnterLeave(n,r,a,e,t)}function u(e){f(e,s)}var h=e("./EventConstants"),p=e("./EventPluginHub"),d=e("./accumulateInto"),f=e("./forEachAccumulated"),m=h.PropagationPhases,v=p.getListener,g={accumulateTwoPhaseDispatches:c,accumulateDirectDispatches:u,accumulateEnterLeaveDispatches:l};t.exports=g}).call(this,e("_process"))},{"./EventConstants":16,"./EventPluginHub":18,"./accumulateInto":98,"./forEachAccumulated":113,_process:1}],22:[function(e,t){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};t.exports=r},{}],23:[function(e,t){"use strict";var n,r=e("./DOMProperty"),i=e("./ExecutionEnvironment"),o=r.injection.MUST_USE_ATTRIBUTE,a=r.injection.MUST_USE_PROPERTY,s=r.injection.HAS_BOOLEAN_VALUE,c=r.injection.HAS_SIDE_EFFECTS,l=r.injection.HAS_NUMERIC_VALUE,u=r.injection.HAS_POSITIVE_NUMERIC_VALUE,h=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE;
if(i.canUseDOM){var p=document.implementation;n=p&&p.hasFeature&&p.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var d={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:o|s,allowTransparency:o,alt:null,async:s,autoComplete:null,autoPlay:s,cellPadding:null,cellSpacing:null,charSet:o,checked:a|s,classID:o,className:n?o:a,cols:o|u,colSpan:null,content:null,contentEditable:null,contextMenu:o,controls:a|s,coords:null,crossOrigin:null,data:null,dateTime:o,defer:s,dir:null,disabled:o|s,download:h,draggable:null,encType:null,form:o,formAction:o,formEncType:o,formMethod:o,formNoValidate:s,formTarget:o,frameBorder:o,height:o,hidden:o|s,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:a,label:null,lang:null,list:o,loop:a|s,manifest:o,marginHeight:null,marginWidth:null,max:null,maxLength:o,media:o,mediaGroup:null,method:null,min:null,multiple:a|s,muted:a|s,name:null,noValidate:s,open:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:a|s,rel:null,required:s,role:o,rows:o|u,rowSpan:null,sandbox:null,scope:null,scrolling:null,seamless:o|s,selected:a|s,shape:null,size:o|u,sizes:o,span:u,spellCheck:null,src:null,srcDoc:a,srcSet:o,start:l,step:null,style:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:a|c,width:o,wmode:o,autoCapitalize:null,autoCorrect:null,itemProp:o,itemScope:o|s,itemType:o,property:null},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",encType:"enctype",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};t.exports=d},{"./DOMProperty":11,"./ExecutionEnvironment":22}],24:[function(e,t){(function(n){"use strict";function r(e){"production"!==n.env.NODE_ENV?l(null==e.props.checkedLink||null==e.props.valueLink,"Cannot provide a checkedLink and a valueLink. If you want to use checkedLink, you probably don't want to use valueLink and vice versa."):l(null==e.props.checkedLink||null==e.props.valueLink)}function i(e){r(e),"production"!==n.env.NODE_ENV?l(null==e.props.value&&null==e.props.onChange,"Cannot provide a valueLink and a value or onChange event. If you want to use value or onChange, you probably don't want to use valueLink."):l(null==e.props.value&&null==e.props.onChange)}function o(e){r(e),"production"!==n.env.NODE_ENV?l(null==e.props.checked&&null==e.props.onChange,"Cannot provide a checkedLink and a checked property or onChange event. If you want to use checked or onChange, you probably don't want to use checkedLink"):l(null==e.props.checked&&null==e.props.onChange)}function a(e){this.props.valueLink.requestChange(e.target.value)}function s(e){this.props.checkedLink.requestChange(e.target.checked)}var c=e("./ReactPropTypes"),l=e("./invariant"),u={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},h={Mixin:{propTypes:{value:function(e,t){return!e[t]||u[e.type]||e.onChange||e.readOnly||e.disabled?void 0:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t){return!e[t]||e.onChange||e.readOnly||e.disabled?void 0:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:c.func}},getValue:function(e){return e.props.valueLink?(i(e),e.props.valueLink.value):e.props.value},getChecked:function(e){return e.props.checkedLink?(o(e),e.props.checkedLink.value):e.props.checked},getOnChange:function(e){return e.props.valueLink?(i(e),a):e.props.checkedLink?(o(e),s):e.props.onChange}};t.exports=h}).call(this,e("_process"))},{"./ReactPropTypes":73,"./invariant":127,_process:1}],25:[function(e,t){(function(n){"use strict";function r(e){e.remove()}var i=e("./ReactBrowserEventEmitter"),o=e("./accumulateInto"),a=e("./forEachAccumulated"),s=e("./invariant"),c={trapBubbledEvent:function(e,t){"production"!==n.env.NODE_ENV?s(this.isMounted(),"Must be mounted to trap events"):s(this.isMounted());var r=i.trapBubbledEvent(e,t,this.getDOMNode());this._localEventListeners=o(this._localEventListeners,r)},componentWillUnmount:function(){this._localEventListeners&&a(this._localEventListeners,r)}};t.exports=c}).call(this,e("_process"))},{"./ReactBrowserEventEmitter":31,"./accumulateInto":98,"./forEachAccumulated":113,"./invariant":127,_process:1}],26:[function(e,t){"use strict";var n=e("./EventConstants"),r=e("./emptyFunction"),i=n.topLevelTypes,o={eventTypes:null,extractEvents:function(e,t,n,o){if(e===i.topTouchStart){var a=o.target;a&&!a.onclick&&(a.onclick=r)}}};t.exports=o},{"./EventConstants":16,"./emptyFunction":108}],27:[function(e,t){function n(e){if(null==e)throw new TypeError("Object.assign target cannot be null or undefined");for(var t=Object(e),n=Object.prototype.hasOwnProperty,r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i){var o=Object(i);for(var a in o)n.call(o,a)&&(t[a]=o[a])}}return t}t.exports=n},{}],28:[function(e,t){(function(n){"use strict";var r=e("./invariant"),i=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},o=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},a=function(e,t,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,e,t,n),i}return new r(e,t,n)},s=function(e,t,n,r,i){var o=this;if(o.instancePool.length){var a=o.instancePool.pop();return o.call(a,e,t,n,r,i),a}return new o(e,t,n,r,i)},c=function(e){var t=this;"production"!==n.env.NODE_ENV?r(e instanceof t,"Trying to release an instance into a pool of a different type."):r(e instanceof t),e.destructor&&e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},l=10,u=i,h=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||u,n.poolSize||(n.poolSize=l),n.release=c,n},p={addPoolingTo:h,oneArgumentPooler:i,twoArgumentPooler:o,threeArgumentPooler:a,fiveArgumentPooler:s};t.exports=p}).call(this,e("_process"))},{"./invariant":127,_process:1}],29:[function(e,t){(function(n){"use strict";var r=e("./DOMPropertyOperations"),i=e("./EventPluginUtils"),o=e("./ReactChildren"),a=e("./ReactComponent"),s=e("./ReactCompositeComponent"),c=e("./ReactContext"),l=e("./ReactCurrentOwner"),u=e("./ReactElement"),h=e("./ReactElementValidator"),p=e("./ReactDOM"),d=e("./ReactDOMComponent"),f=e("./ReactDefaultInjection"),m=e("./ReactInstanceHandles"),v=e("./ReactLegacyElement"),g=e("./ReactMount"),y=e("./ReactMultiChild"),x=e("./ReactPerf"),_=e("./ReactPropTypes"),b=e("./ReactServerRendering"),w=e("./ReactTextComponent"),E=e("./Object.assign"),M=e("./deprecated"),C=e("./onlyChild");f.inject();var S=u.createElement,T=u.createFactory;"production"!==n.env.NODE_ENV&&(S=h.createElement,T=h.createFactory),S=v.wrapCreateElement(S),T=v.wrapCreateFactory(T);var R=x.measure("React","render",g.render),D={Children:{map:o.map,forEach:o.forEach,count:o.count,only:C},DOM:p,PropTypes:_,initializeTouchEvents:function(e){i.useTouchEvents=e},createClass:s.createClass,createElement:S,createFactory:T,constructAndRenderComponent:g.constructAndRenderComponent,constructAndRenderComponentByID:g.constructAndRenderComponentByID,render:R,renderToString:b.renderToString,renderToStaticMarkup:b.renderToStaticMarkup,unmountComponentAtNode:g.unmountComponentAtNode,isValidClass:v.isValidClass,isValidElement:u.isValidElement,withContext:c.withContext,__spread:E,renderComponent:M("React","renderComponent","render",this,R),renderComponentToString:M("React","renderComponentToString","renderToString",this,b.renderToString),renderComponentToStaticMarkup:M("React","renderComponentToStaticMarkup","renderToStaticMarkup",this,b.renderToStaticMarkup),isValidComponent:M("React","isValidComponent","isValidElement",this,u.isValidElement)};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({Component:a,CurrentOwner:l,DOMComponent:d,DOMPropertyOperations:r,InstanceHandles:m,Mount:g,MultiChild:y,TextComponent:w}),"production"!==n.env.NODE_ENV){var A=e("./ExecutionEnvironment");if(A.canUseDOM&&window.top===window.self){navigator.userAgent.indexOf("Chrome")>-1&&"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&console.debug("Download the React DevTools for a better development experience: http://fb.me/react-devtools");for(var N=[Array.isArray,Array.prototype.every,Array.prototype.forEach,Array.prototype.indexOf,Array.prototype.map,Date.now,Function.prototype.bind,Object.keys,String.prototype.split,String.prototype.trim,Object.create,Object.freeze],P=0;P<N.length;P++)if(!N[P]){console.error("One or more ES5 shim/shams expected by React are not available: http://fb.me/react-warning-polyfills");break}}}D.version="0.12.2",t.exports=D}).call(this,e("_process"))},{"./DOMPropertyOperations":12,"./EventPluginUtils":20,"./ExecutionEnvironment":22,"./Object.assign":27,"./ReactChildren":32,"./ReactComponent":33,"./ReactCompositeComponent":35,"./ReactContext":36,"./ReactCurrentOwner":37,"./ReactDOM":38,"./ReactDOMComponent":40,"./ReactDefaultInjection":50,"./ReactElement":53,"./ReactElementValidator":54,"./ReactInstanceHandles":61,"./ReactLegacyElement":62,"./ReactMount":64,"./ReactMultiChild":65,"./ReactPerf":69,"./ReactPropTypes":73,"./ReactServerRendering":77,"./ReactTextComponent":79,"./deprecated":107,"./onlyChild":138,_process:1}],30:[function(e,t){(function(n){"use strict";var r=e("./ReactEmptyComponent"),i=e("./ReactMount"),o=e("./invariant"),a={getDOMNode:function(){return"production"!==n.env.NODE_ENV?o(this.isMounted(),"getDOMNode(): A component must be mounted to have a DOM node."):o(this.isMounted()),r.isNullComponentID(this._rootNodeID)?null:i.getNode(this._rootNodeID)}};t.exports=a}).call(this,e("_process"))},{"./ReactEmptyComponent":55,"./ReactMount":64,"./invariant":127,_process:1}],31:[function(e,t){"use strict";function n(e){return Object.prototype.hasOwnProperty.call(e,f)||(e[f]=p++,u[e[f]]={}),u[e[f]]}var r=e("./EventConstants"),i=e("./EventPluginHub"),o=e("./EventPluginRegistry"),a=e("./ReactEventEmitterMixin"),s=e("./ViewportMetrics"),c=e("./Object.assign"),l=e("./isEventSupported"),u={},h=!1,p=0,d={topBlur:"blur",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topWheel:"wheel"},f="_reactListenersID"+String(Math.random()).slice(2),m=c({},a,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(m.handleTopLevel),m.ReactEventListener=e}},setEnabled:function(e){m.ReactEventListener&&m.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!m.ReactEventListener||!m.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var i=t,a=n(i),s=o.registrationNameDependencies[e],c=r.topLevelTypes,u=0,h=s.length;h>u;u++){var p=s[u];a.hasOwnProperty(p)&&a[p]||(p===c.topWheel?l("wheel")?m.ReactEventListener.trapBubbledEvent(c.topWheel,"wheel",i):l("mousewheel")?m.ReactEventListener.trapBubbledEvent(c.topWheel,"mousewheel",i):m.ReactEventListener.trapBubbledEvent(c.topWheel,"DOMMouseScroll",i):p===c.topScroll?l("scroll",!0)?m.ReactEventListener.trapCapturedEvent(c.topScroll,"scroll",i):m.ReactEventListener.trapBubbledEvent(c.topScroll,"scroll",m.ReactEventListener.WINDOW_HANDLE):p===c.topFocus||p===c.topBlur?(l("focus",!0)?(m.ReactEventListener.trapCapturedEvent(c.topFocus,"focus",i),m.ReactEventListener.trapCapturedEvent(c.topBlur,"blur",i)):l("focusin")&&(m.ReactEventListener.trapBubbledEvent(c.topFocus,"focusin",i),m.ReactEventListener.trapBubbledEvent(c.topBlur,"focusout",i)),a[c.topBlur]=!0,a[c.topFocus]=!0):d.hasOwnProperty(p)&&m.ReactEventListener.trapBubbledEvent(p,d[p],i),a[p]=!0)}},trapBubbledEvent:function(e,t,n){return m.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return m.ReactEventListener.trapCapturedEvent(e,t,n)},ensureScrollValueMonitoring:function(){if(!h){var e=s.refreshScrollValues;m.ReactEventListener.monitorScrollValue(e),h=!0}},eventNameDispatchConfigs:i.eventNameDispatchConfigs,registrationNameModules:i.registrationNameModules,putListener:i.putListener,getListener:i.getListener,deleteListener:i.deleteListener,deleteAllListeners:i.deleteAllListeners});t.exports=m},{"./EventConstants":16,"./EventPluginHub":18,"./EventPluginRegistry":19,"./Object.assign":27,"./ReactEventEmitterMixin":57,"./ViewportMetrics":97,"./isEventSupported":128}],32:[function(e,t){(function(n){"use strict";function r(e,t){this.forEachFunction=e,this.forEachContext=t}function i(e,t,n,r){var i=e;i.forEachFunction.call(i.forEachContext,t,r)}function o(e,t,n){if(null==e)return e;var o=r.getPooled(t,n);p(e,i,o),r.release(o)}function a(e,t,n){this.mapResult=e,this.mapFunction=t,this.mapContext=n}function s(e,t,r,i){var o=e,a=o.mapResult,s=!a.hasOwnProperty(r);if("production"!==n.env.NODE_ENV?d(s,"ReactChildren.map(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",r):null,s){var c=o.mapFunction.call(o.mapContext,t,i);a[r]=c}}function c(e,t,n){if(null==e)return e;var r={},i=a.getPooled(r,t,n);return p(e,s,i),a.release(i),r}function l(){return null}function u(e){return p(e,l,null)}var h=e("./PooledClass"),p=e("./traverseAllChildren"),d=e("./warning"),f=h.twoArgumentPooler,m=h.threeArgumentPooler;h.addPoolingTo(r,f),h.addPoolingTo(a,m);var v={forEach:o,map:c,count:u};t.exports=v}).call(this,e("_process"))},{"./PooledClass":28,"./traverseAllChildren":145,"./warning":146,_process:1}],33:[function(e,t){(function(n){"use strict";var r=e("./ReactElement"),i=e("./ReactOwner"),o=e("./ReactUpdates"),a=e("./Object.assign"),s=e("./invariant"),c=e("./keyMirror"),l=c({MOUNTED:null,UNMOUNTED:null}),u=!1,h=null,p=null,d={injection:{injectEnvironment:function(e){"production"!==n.env.NODE_ENV?s(!u,"ReactComponent: injectEnvironment() can only be called once."):s(!u),p=e.mountImageIntoNode,h=e.unmountIDFromEnvironment,d.BackendIDOperations=e.BackendIDOperations,u=!0}},LifeCycle:l,BackendIDOperations:null,Mixin:{isMounted:function(){return this._lifeCycleState===l.MOUNTED},setProps:function(e,t){var n=this._pendingElement||this._currentElement;this.replaceProps(a({},n.props,e),t)},replaceProps:function(e,t){"production"!==n.env.NODE_ENV?s(this.isMounted(),"replaceProps(...): Can only update a mounted component."):s(this.isMounted()),"production"!==n.env.NODE_ENV?s(0===this._mountDepth,"replaceProps(...): You called `setProps` or `replaceProps` on a component with a parent. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created."):s(0===this._mountDepth),this._pendingElement=r.cloneAndReplaceProps(this._pendingElement||this._currentElement,e),o.enqueueUpdate(this,t)},_setPropsInternal:function(e,t){var n=this._pendingElement||this._currentElement;this._pendingElement=r.cloneAndReplaceProps(n,a({},n.props,e)),o.enqueueUpdate(this,t)},construct:function(e){this.props=e.props,this._owner=e._owner,this._lifeCycleState=l.UNMOUNTED,this._pendingCallbacks=null,this._currentElement=e,this._pendingElement=null},mountComponent:function(e,t,r){"production"!==n.env.NODE_ENV?s(!this.isMounted(),"mountComponent(%s, ...): Can only mount an unmounted component. Make sure to avoid storing components between renders or reusing a single component instance in multiple places.",e):s(!this.isMounted());var o=this._currentElement.ref;if(null!=o){var a=this._currentElement._owner;i.addComponentAsRefTo(this,o,a)}this._rootNodeID=e,this._lifeCycleState=l.MOUNTED,this._mountDepth=r},unmountComponent:function(){"production"!==n.env.NODE_ENV?s(this.isMounted(),"unmountComponent(): Can only unmount a mounted component."):s(this.isMounted());var e=this._currentElement.ref;null!=e&&i.removeComponentAsRefFrom(this,e,this._owner),h(this._rootNodeID),this._rootNodeID=null,this._lifeCycleState=l.UNMOUNTED},receiveComponent:function(e,t){"production"!==n.env.NODE_ENV?s(this.isMounted(),"receiveComponent(...): Can only update a mounted component."):s(this.isMounted()),this._pendingElement=e,this.performUpdateIfNecessary(t)},performUpdateIfNecessary:function(e){if(null!=this._pendingElement){var t=this._currentElement,n=this._pendingElement;this._currentElement=n,this.props=n.props,this._owner=n._owner,this._pendingElement=null,this.updateComponent(e,t)}},updateComponent:function(e,t){var n=this._currentElement;(n._owner!==t._owner||n.ref!==t.ref)&&(null!=t.ref&&i.removeComponentAsRefFrom(this,t.ref,t._owner),null!=n.ref&&i.addComponentAsRefTo(this,n.ref,n._owner))},mountComponentIntoNode:function(e,t,n){var r=o.ReactReconcileTransaction.getPooled();r.perform(this._mountComponentIntoNode,this,e,t,r,n),o.ReactReconcileTransaction.release(r)},_mountComponentIntoNode:function(e,t,n,r){var i=this.mountComponent(e,n,0);p(i,t,r)},isOwnedBy:function(e){return this._owner===e},getSiblingByRef:function(e){var t=this._owner;return t&&t.refs?t.refs[e]:null}}};t.exports=d}).call(this,e("_process"))},{"./Object.assign":27,"./ReactElement":53,"./ReactOwner":68,"./ReactUpdates":80,"./invariant":127,"./keyMirror":133,_process:1}],34:[function(e,t){(function(n){"use strict";var r=e("./ReactDOMIDOperations"),i=e("./ReactMarkupChecksum"),o=e("./ReactMount"),a=e("./ReactPerf"),s=e("./ReactReconcileTransaction"),c=e("./getReactRootElementInContainer"),l=e("./invariant"),u=e("./setInnerHTML"),h=1,p=9,d={ReactReconcileTransaction:s,BackendIDOperations:r,unmountIDFromEnvironment:function(e){o.purgeID(e)},mountImageIntoNode:a.measure("ReactComponentBrowserEnvironment","mountImageIntoNode",function(e,t,r){if("production"!==n.env.NODE_ENV?l(t&&(t.nodeType===h||t.nodeType===p),"mountComponentIntoNode(...): Target container is not valid."):l(t&&(t.nodeType===h||t.nodeType===p)),r){if(i.canReuseMarkup(e,c(t)))return;"production"!==n.env.NODE_ENV?l(t.nodeType!==p,"You're trying to render a component to the document using server rendering but the checksum was invalid. This usually means you rendered a different component type or props on the client from the one on the server, or your render() methods are impure. React cannot handle this case due to cross-browser quirks by rendering at the document root. You should look for environment dependent code in your components and ensure the props are the same client and server side."):l(t.nodeType!==p),"production"!==n.env.NODE_ENV&&console.warn("React attempted to use reuse markup in a container but the checksum was invalid. This generally means that you are using server rendering and the markup generated on the server was not what the client was expecting. React injected new markup to compensate which works but you have lost many of the benefits of server rendering. Instead, figure out why the markup being generated is different on the client or server.")}"production"!==n.env.NODE_ENV?l(t.nodeType!==p,"You're trying to render a component to the document but you didn't use server rendering. We can't do this without using server rendering due to cross-browser quirks. See renderComponentToString() for server rendering."):l(t.nodeType!==p),u(t,e)})};t.exports=d}).call(this,e("_process"))},{"./ReactDOMIDOperations":42,"./ReactMarkupChecksum":63,"./ReactMount":64,"./ReactPerf":69,"./ReactReconcileTransaction":75,"./getReactRootElementInContainer":121,"./invariant":127,"./setInnerHTML":141,_process:1}],35:[function(e,t){(function(n){"use strict";function r(e){var t=e._owner||null;return t&&t.constructor&&t.constructor.displayName?" Check the render method of `"+t.constructor.displayName+"`.":""}function i(e,t,r){for(var i in t)t.hasOwnProperty(i)&&("production"!==n.env.NODE_ENV?R("function"==typeof t[i],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",e.displayName||"ReactCompositeComponent",M[r],i):R("function"==typeof t[i]))}function o(e,t){var r=F.hasOwnProperty(t)?F[t]:null;z.hasOwnProperty(t)&&("production"!==n.env.NODE_ENV?R(r===V.OVERRIDE_BASE,"ReactCompositeComponentInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t):R(r===V.OVERRIDE_BASE)),e.hasOwnProperty(t)&&("production"!==n.env.NODE_ENV?R(r===V.DEFINE_MANY||r===V.DEFINE_MANY_MERGED,"ReactCompositeComponentInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t):R(r===V.DEFINE_MANY||r===V.DEFINE_MANY_MERGED))}function a(e){var t=e._compositeLifeCycleState;"production"!==n.env.NODE_ENV?R(e.isMounted()||t===B.MOUNTING,"replaceState(...): Can only update a mounted or mounting component."):R(e.isMounted()||t===B.MOUNTING),"production"!==n.env.NODE_ENV?R(null==f.current,"replaceState(...): Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state."):R(null==f.current),"production"!==n.env.NODE_ENV?R(t!==B.UNMOUNTING,"replaceState(...): Cannot update while unmounting component. This usually means you called setState() on an unmounted component."):R(t!==B.UNMOUNTING)}function s(e,t){if(t){"production"!==n.env.NODE_ENV?R(!x.isValidFactory(t),"ReactCompositeComponent: You're attempting to use a component class as a mixin. Instead, just use a regular object."):R(!x.isValidFactory(t)),"production"!==n.env.NODE_ENV?R(!m.isValidElement(t),"ReactCompositeComponent: You're attempting to use a component as a mixin. Instead, just use a regular object."):R(!m.isValidElement(t));var r=e.prototype;t.hasOwnProperty(U)&&I.mixins(e,t.mixins);for(var i in t)if(t.hasOwnProperty(i)&&i!==U){var a=t[i];if(o(r,i),I.hasOwnProperty(i))I[i](e,a);else{var s=F.hasOwnProperty(i),c=r.hasOwnProperty(i),l=a&&a.__reactDontBind,p="function"==typeof a,d=p&&!s&&!c&&!l;if(d)r.__reactAutoBindMap||(r.__reactAutoBindMap={}),r.__reactAutoBindMap[i]=a,r[i]=a;else if(c){var f=F[i];"production"!==n.env.NODE_ENV?R(s&&(f===V.DEFINE_MANY_MERGED||f===V.DEFINE_MANY),"ReactCompositeComponent: Unexpected spec policy %s for key %s when mixing in component specs.",f,i):R(s&&(f===V.DEFINE_MANY_MERGED||f===V.DEFINE_MANY)),f===V.DEFINE_MANY_MERGED?r[i]=u(r[i],a):f===V.DEFINE_MANY&&(r[i]=h(r[i],a))}else r[i]=a,"production"!==n.env.NODE_ENV&&"function"==typeof a&&t.displayName&&(r[i].displayName=t.displayName+"_"+i)}}}}function c(e,t){if(t)for(var r in t){var i=t[r];if(t.hasOwnProperty(r)){var o=r in I;"production"!==n.env.NODE_ENV?R(!o,'ReactCompositeComponent: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',r):R(!o);var a=r in e;"production"!==n.env.NODE_ENV?R(!a,"ReactCompositeComponent: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",r):R(!a),e[r]=i}}}function l(e,t){return"production"!==n.env.NODE_ENV?R(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeObjectsWithNoDuplicateKeys(): Cannot merge non-objects"):R(e&&t&&"object"==typeof e&&"object"==typeof t),P(t,function(t,r){"production"!==n.env.NODE_ENV?R(void 0===e[r],"mergeObjectsWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",r):R(void 0===e[r]),e[r]=t}),e}function u(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);return null==n?r:null==r?n:l(n,r)}}function h(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}var p=e("./ReactComponent"),d=e("./ReactContext"),f=e("./ReactCurrentOwner"),m=e("./ReactElement"),v=e("./ReactElementValidator"),g=e("./ReactEmptyComponent"),y=e("./ReactErrorUtils"),x=e("./ReactLegacyElement"),_=e("./ReactOwner"),b=e("./ReactPerf"),w=e("./ReactPropTransferer"),E=e("./ReactPropTypeLocations"),M=e("./ReactPropTypeLocationNames"),C=e("./ReactUpdates"),S=e("./Object.assign"),T=e("./instantiateReactComponent"),R=e("./invariant"),D=e("./keyMirror"),A=e("./keyOf"),N=e("./monitorCodeUse"),P=e("./mapObject"),O=e("./shouldUpdateReactComponent"),L=e("./warning"),U=A({mixins:null}),V=D({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),k=[],F={mixins:V.DEFINE_MANY,statics:V.DEFINE_MANY,propTypes:V.DEFINE_MANY,contextTypes:V.DEFINE_MANY,childContextTypes:V.DEFINE_MANY,getDefaultProps:V.DEFINE_MANY_MERGED,getInitialState:V.DEFINE_MANY_MERGED,getChildContext:V.DEFINE_MANY_MERGED,render:V.DEFINE_ONCE,componentWillMount:V.DEFINE_MANY,componentDidMount:V.DEFINE_MANY,componentWillReceiveProps:V.DEFINE_MANY,shouldComponentUpdate:V.DEFINE_ONCE,componentWillUpdate:V.DEFINE_MANY,componentDidUpdate:V.DEFINE_MANY,componentWillUnmount:V.DEFINE_MANY,updateComponent:V.OVERRIDE_BASE},I={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)s(e,t[n])},childContextTypes:function(e,t){i(e,t,E.childContext),e.childContextTypes=S({},e.childContextTypes,t)},contextTypes:function(e,t){i(e,t,E.context),e.contextTypes=S({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps=e.getDefaultProps?u(e.getDefaultProps,t):t},propTypes:function(e,t){i(e,t,E.prop),e.propTypes=S({},e.propTypes,t)},statics:function(e,t){c(e,t)}},B=D({MOUNTING:null,UNMOUNTING:null,RECEIVING_PROPS:null}),z={construct:function(){p.Mixin.construct.apply(this,arguments),_.Mixin.construct.apply(this,arguments),this.state=null,this._pendingState=null,this.context=null,this._compositeLifeCycleState=null},isMounted:function(){return p.Mixin.isMounted.call(this)&&this._compositeLifeCycleState!==B.MOUNTING},mountComponent:b.measure("ReactCompositeComponent","mountComponent",function(e,t,r){p.Mixin.mountComponent.call(this,e,t,r),this._compositeLifeCycleState=B.MOUNTING,this.__reactAutoBindMap&&this._bindAutoBindMethods(),this.context=this._processContext(this._currentElement._context),this.props=this._processProps(this.props),this.state=this.getInitialState?this.getInitialState():null,"production"!==n.env.NODE_ENV?R("object"==typeof this.state&&!Array.isArray(this.state),"%s.getInitialState(): must return an object or null",this.constructor.displayName||"ReactCompositeComponent"):R("object"==typeof this.state&&!Array.isArray(this.state)),this._pendingState=null,this._pendingForceUpdate=!1,this.componentWillMount&&(this.componentWillMount(),this._pendingState&&(this.state=this._pendingState,this._pendingState=null)),this._renderedComponent=T(this._renderValidatedComponent(),this._currentElement.type),this._compositeLifeCycleState=null;var i=this._renderedComponent.mountComponent(e,t,r+1);return this.componentDidMount&&t.getReactMountReady().enqueue(this.componentDidMount,this),i}),unmountComponent:function(){this._compositeLifeCycleState=B.UNMOUNTING,this.componentWillUnmount&&this.componentWillUnmount(),this._compositeLifeCycleState=null,this._renderedComponent.unmountComponent(),this._renderedComponent=null,p.Mixin.unmountComponent.call(this)},setState:function(e,t){"production"!==n.env.NODE_ENV?R("object"==typeof e||null==e,"setState(...): takes an object of state variables to update."):R("object"==typeof e||null==e),"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?L(null!=e,"setState(...): You passed an undefined or null state object; instead, use forceUpdate()."):null),this.replaceState(S({},this._pendingState||this.state,e),t)},replaceState:function(e,t){a(this),this._pendingState=e,this._compositeLifeCycleState!==B.MOUNTING&&C.enqueueUpdate(this,t)},_processContext:function(e){var t=null,r=this.constructor.contextTypes;if(r){t={};for(var i in r)t[i]=e[i];"production"!==n.env.NODE_ENV&&this._checkPropTypes(r,t,E.context)}return t},_processChildContext:function(e){var t=this.getChildContext&&this.getChildContext(),r=this.constructor.displayName||"ReactCompositeComponent";if(t){"production"!==n.env.NODE_ENV?R("object"==typeof this.constructor.childContextTypes,"%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",r):R("object"==typeof this.constructor.childContextTypes),"production"!==n.env.NODE_ENV&&this._checkPropTypes(this.constructor.childContextTypes,t,E.childContext);for(var i in t)"production"!==n.env.NODE_ENV?R(i in this.constructor.childContextTypes,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',r,i):R(i in this.constructor.childContextTypes);return S({},e,t)}return e},_processProps:function(e){if("production"!==n.env.NODE_ENV){var t=this.constructor.propTypes;t&&this._checkPropTypes(t,e,E.prop)}return e},_checkPropTypes:function(e,t,i){var o=this.constructor.displayName;for(var a in e)if(e.hasOwnProperty(a)){var s=e[a](t,a,o,i);if(s instanceof Error){var c=r(this);"production"!==n.env.NODE_ENV?L(!1,s.message+c):null}}},performUpdateIfNecessary:function(e){var t=this._compositeLifeCycleState;if(t!==B.MOUNTING&&t!==B.RECEIVING_PROPS&&(null!=this._pendingElement||null!=this._pendingState||this._pendingForceUpdate)){var r=this.context,i=this.props,o=this._currentElement;null!=this._pendingElement&&(o=this._pendingElement,r=this._processContext(o._context),i=this._processProps(o.props),this._pendingElement=null,this._compositeLifeCycleState=B.RECEIVING_PROPS,this.componentWillReceiveProps&&this.componentWillReceiveProps(i,r)),this._compositeLifeCycleState=null;var a=this._pendingState||this.state;this._pendingState=null;var s=this._pendingForceUpdate||!this.shouldComponentUpdate||this.shouldComponentUpdate(i,a,r);"production"!==n.env.NODE_ENV&&"undefined"==typeof s&&console.warn((this.constructor.displayName||"ReactCompositeComponent")+".shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false."),s?(this._pendingForceUpdate=!1,this._performComponentUpdate(o,i,a,r,e)):(this._currentElement=o,this.props=i,this.state=a,this.context=r,this._owner=o._owner)}},_performComponentUpdate:function(e,t,n,r,i){var o=this._currentElement,a=this.props,s=this.state,c=this.context;this.componentWillUpdate&&this.componentWillUpdate(t,n,r),this._currentElement=e,this.props=t,this.state=n,this.context=r,this._owner=e._owner,this.updateComponent(i,o),this.componentDidUpdate&&i.getReactMountReady().enqueue(this.componentDidUpdate.bind(this,a,s,c),this)},receiveComponent:function(e,t){(e!==this._currentElement||null==e._owner)&&p.Mixin.receiveComponent.call(this,e,t)},updateComponent:b.measure("ReactCompositeComponent","updateComponent",function(e,t){p.Mixin.updateComponent.call(this,e,t);var n=this._renderedComponent,r=n._currentElement,i=this._renderValidatedComponent();if(O(r,i))n.receiveComponent(i,e);
else{var o=this._rootNodeID,a=n._rootNodeID;n.unmountComponent(),this._renderedComponent=T(i,this._currentElement.type);var s=this._renderedComponent.mountComponent(o,e,this._mountDepth+1);p.BackendIDOperations.dangerouslyReplaceNodeWithMarkupByID(a,s)}}),forceUpdate:function(e){var t=this._compositeLifeCycleState;"production"!==n.env.NODE_ENV?R(this.isMounted()||t===B.MOUNTING,"forceUpdate(...): Can only force an update on mounted or mounting components."):R(this.isMounted()||t===B.MOUNTING),"production"!==n.env.NODE_ENV?R(t!==B.UNMOUNTING&&null==f.current,"forceUpdate(...): Cannot force an update while unmounting component or within a `render` function."):R(t!==B.UNMOUNTING&&null==f.current),this._pendingForceUpdate=!0,C.enqueueUpdate(this,e)},_renderValidatedComponent:b.measure("ReactCompositeComponent","_renderValidatedComponent",function(){var e,t=d.current;d.current=this._processChildContext(this._currentElement._context),f.current=this;try{e=this.render(),null===e||e===!1?(e=g.getEmptyComponent(),g.registerNullComponentID(this._rootNodeID)):g.deregisterNullComponentID(this._rootNodeID)}finally{d.current=t,f.current=null}return"production"!==n.env.NODE_ENV?R(m.isValidElement(e),"%s.render(): A valid ReactComponent must be returned. You may have returned undefined, an array or some other invalid object.",this.constructor.displayName||"ReactCompositeComponent"):R(m.isValidElement(e)),e}),_bindAutoBindMethods:function(){for(var e in this.__reactAutoBindMap)if(this.__reactAutoBindMap.hasOwnProperty(e)){var t=this.__reactAutoBindMap[e];this[e]=this._bindAutoBindMethod(y.guard(t,this.constructor.displayName+"."+e))}},_bindAutoBindMethod:function(e){var t=this,r=e.bind(t);if("production"!==n.env.NODE_ENV){r.__reactBoundContext=t,r.__reactBoundMethod=e,r.__reactBoundArguments=null;var i=t.constructor.displayName,o=r.bind;r.bind=function(n){for(var a=[],s=1,c=arguments.length;c>s;s++)a.push(arguments[s]);if(n!==t&&null!==n)N("react_bind_warning",{component:i}),console.warn("bind(): React component methods may only be bound to the component instance. See "+i);else if(!a.length)return N("react_bind_warning",{component:i}),console.warn("bind(): You are binding a component method to the component. React does this for you automatically in a high-performance way, so you can safely remove this call. See "+i),r;var l=o.apply(r,arguments);return l.__reactBoundContext=t,l.__reactBoundMethod=e,l.__reactBoundArguments=a,l}}return r}},H=function(){};S(H.prototype,p.Mixin,_.Mixin,w.Mixin,z);var j={LifeCycle:B,Base:H,createClass:function(e){var t=function(){};t.prototype=new H,t.prototype.constructor=t,k.forEach(s.bind(null,t)),s(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),"production"!==n.env.NODE_ENV?R(t.prototype.render,"createClass(...): Class specification must implement a `render` method."):R(t.prototype.render),"production"!==n.env.NODE_ENV&&t.prototype.componentShouldUpdate&&(N("react_component_should_update_warning",{component:e.displayName}),console.warn((e.displayName||"A component")+" has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value."));for(var r in F)t.prototype[r]||(t.prototype[r]=null);return x.wrapFactory("production"!==n.env.NODE_ENV?v.createFactory(t):m.createFactory(t))},injection:{injectMixin:function(e){k.push(e)}}};t.exports=j}).call(this,e("_process"))},{"./Object.assign":27,"./ReactComponent":33,"./ReactContext":36,"./ReactCurrentOwner":37,"./ReactElement":53,"./ReactElementValidator":54,"./ReactEmptyComponent":55,"./ReactErrorUtils":56,"./ReactLegacyElement":62,"./ReactOwner":68,"./ReactPerf":69,"./ReactPropTransferer":70,"./ReactPropTypeLocationNames":71,"./ReactPropTypeLocations":72,"./ReactUpdates":80,"./instantiateReactComponent":126,"./invariant":127,"./keyMirror":133,"./keyOf":134,"./mapObject":135,"./monitorCodeUse":137,"./shouldUpdateReactComponent":143,"./warning":146,_process:1}],36:[function(e,t){"use strict";var n=e("./Object.assign"),r={current:{},withContext:function(e,t){var i,o=r.current;r.current=n({},o,e);try{i=t()}finally{r.current=o}return i}};t.exports=r},{"./Object.assign":27}],37:[function(e,t){"use strict";var n={current:null};t.exports=n},{}],38:[function(e,t){(function(n){"use strict";function r(e){return a.markNonLegacyFactory("production"!==n.env.NODE_ENV?o.createFactory(e):i.createFactory(e))}var i=e("./ReactElement"),o=e("./ReactElementValidator"),a=e("./ReactLegacyElement"),s=e("./mapObject"),c=s({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul","var":"var",video:"video",wbr:"wbr",circle:"circle",defs:"defs",ellipse:"ellipse",g:"g",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},r);t.exports=c}).call(this,e("_process"))},{"./ReactElement":53,"./ReactElementValidator":54,"./ReactLegacyElement":62,"./mapObject":135,_process:1}],39:[function(e,t){"use strict";var n=e("./AutoFocusMixin"),r=e("./ReactBrowserComponentMixin"),i=e("./ReactCompositeComponent"),o=e("./ReactElement"),a=e("./ReactDOM"),s=e("./keyMirror"),c=o.createFactory(a.button.type),l=s({onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0}),u=i.createClass({displayName:"ReactDOMButton",mixins:[n,r],render:function(){var e={};for(var t in this.props)!this.props.hasOwnProperty(t)||this.props.disabled&&l[t]||(e[t]=this.props[t]);return c(e,this.props.children)}});t.exports=u},{"./AutoFocusMixin":2,"./ReactBrowserComponentMixin":30,"./ReactCompositeComponent":35,"./ReactDOM":38,"./ReactElement":53,"./keyMirror":133}],40:[function(e,t){(function(n){"use strict";function r(e){e&&("production"!==n.env.NODE_ENV?y(null==e.children||null==e.dangerouslySetInnerHTML,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."):y(null==e.children||null==e.dangerouslySetInnerHTML),"production"!==n.env.NODE_ENV&&e.contentEditable&&null!=e.children&&console.warn("A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),"production"!==n.env.NODE_ENV?y(null==e.style||"object"==typeof e.style,"The `style` prop expects a mapping from style properties to values, not a string."):y(null==e.style||"object"==typeof e.style))}function i(e,t,r,i){"production"!==n.env.NODE_ENV&&("onScroll"!==t||x("scroll",!0)||(b("react_no_scroll_event"),console.warn("This browser doesn't support the `onScroll` event")));var o=d.findReactContainerForID(e);if(o){var a=o.nodeType===T?o.ownerDocument:o;E(t,a)}i.getPutListenerQueue().enqueuePutListener(e,t,r)}function o(e){N.call(A,e)||("production"!==n.env.NODE_ENV?y(D.test(e),"Invalid tag: %s",e):y(D.test(e)),A[e]=!0)}function a(e){o(e),this._tag=e,this.tagName=e.toUpperCase()}var s=e("./CSSPropertyOperations"),c=e("./DOMProperty"),l=e("./DOMPropertyOperations"),u=e("./ReactBrowserComponentMixin"),h=e("./ReactComponent"),p=e("./ReactBrowserEventEmitter"),d=e("./ReactMount"),f=e("./ReactMultiChild"),m=e("./ReactPerf"),v=e("./Object.assign"),g=e("./escapeTextForBrowser"),y=e("./invariant"),x=e("./isEventSupported"),_=e("./keyOf"),b=e("./monitorCodeUse"),w=p.deleteListener,E=p.listenTo,M=p.registrationNameModules,C={string:!0,number:!0},S=_({style:null}),T=1,R={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},D=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,A={},N={}.hasOwnProperty;a.displayName="ReactDOMComponent",a.Mixin={mountComponent:m.measure("ReactDOMComponent","mountComponent",function(e,t,n){h.Mixin.mountComponent.call(this,e,t,n),r(this.props);var i=R[this._tag]?"":"</"+this._tag+">";return this._createOpenTagMarkupAndPutListeners(t)+this._createContentMarkup(t)+i}),_createOpenTagMarkupAndPutListeners:function(e){var t=this.props,n="<"+this._tag;for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];if(null!=o)if(M.hasOwnProperty(r))i(this._rootNodeID,r,o,e);else{r===S&&(o&&(o=t.style=v({},t.style)),o=s.createMarkupForStyles(o));var a=l.createMarkupForProperty(r,o);a&&(n+=" "+a)}}if(e.renderToStaticMarkup)return n+">";var c=l.createMarkupForID(this._rootNodeID);return n+" "+c+">"},_createContentMarkup:function(e){var t=this.props.dangerouslySetInnerHTML;if(null!=t){if(null!=t.__html)return t.__html}else{var n=C[typeof this.props.children]?this.props.children:null,r=null!=n?null:this.props.children;if(null!=n)return g(n);if(null!=r){var i=this.mountChildren(r,e);return i.join("")}}return""},receiveComponent:function(e,t){(e!==this._currentElement||null==e._owner)&&h.Mixin.receiveComponent.call(this,e,t)},updateComponent:m.measure("ReactDOMComponent","updateComponent",function(e,t){r(this._currentElement.props),h.Mixin.updateComponent.call(this,e,t),this._updateDOMProperties(t.props,e),this._updateDOMChildren(t.props,e)}),_updateDOMProperties:function(e,t){var n,r,o,a=this.props;for(n in e)if(!a.hasOwnProperty(n)&&e.hasOwnProperty(n))if(n===S){var s=e[n];for(r in s)s.hasOwnProperty(r)&&(o=o||{},o[r]="")}else M.hasOwnProperty(n)?w(this._rootNodeID,n):(c.isStandardName[n]||c.isCustomAttribute(n))&&h.BackendIDOperations.deletePropertyByID(this._rootNodeID,n);for(n in a){var l=a[n],u=e[n];if(a.hasOwnProperty(n)&&l!==u)if(n===S)if(l&&(l=a.style=v({},l)),u){for(r in u)!u.hasOwnProperty(r)||l&&l.hasOwnProperty(r)||(o=o||{},o[r]="");for(r in l)l.hasOwnProperty(r)&&u[r]!==l[r]&&(o=o||{},o[r]=l[r])}else o=l;else M.hasOwnProperty(n)?i(this._rootNodeID,n,l,t):(c.isStandardName[n]||c.isCustomAttribute(n))&&h.BackendIDOperations.updatePropertyByID(this._rootNodeID,n,l)}o&&h.BackendIDOperations.updateStylesByID(this._rootNodeID,o)},_updateDOMChildren:function(e,t){var n=this.props,r=C[typeof e.children]?e.children:null,i=C[typeof n.children]?n.children:null,o=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,a=n.dangerouslySetInnerHTML&&n.dangerouslySetInnerHTML.__html,s=null!=r?null:e.children,c=null!=i?null:n.children,l=null!=r||null!=o,u=null!=i||null!=a;null!=s&&null==c?this.updateChildren(null,t):l&&!u&&this.updateTextContent(""),null!=i?r!==i&&this.updateTextContent(""+i):null!=a?o!==a&&h.BackendIDOperations.updateInnerHTMLByID(this._rootNodeID,a):null!=c&&this.updateChildren(c,t)},unmountComponent:function(){this.unmountChildren(),p.deleteAllListeners(this._rootNodeID),h.Mixin.unmountComponent.call(this)}},v(a.prototype,h.Mixin,a.Mixin,f.Mixin,u),t.exports=a}).call(this,e("_process"))},{"./CSSPropertyOperations":5,"./DOMProperty":11,"./DOMPropertyOperations":12,"./Object.assign":27,"./ReactBrowserComponentMixin":30,"./ReactBrowserEventEmitter":31,"./ReactComponent":33,"./ReactMount":64,"./ReactMultiChild":65,"./ReactPerf":69,"./escapeTextForBrowser":110,"./invariant":127,"./isEventSupported":128,"./keyOf":134,"./monitorCodeUse":137,_process:1}],41:[function(e,t){"use strict";var n=e("./EventConstants"),r=e("./LocalEventTrapMixin"),i=e("./ReactBrowserComponentMixin"),o=e("./ReactCompositeComponent"),a=e("./ReactElement"),s=e("./ReactDOM"),c=a.createFactory(s.form.type),l=o.createClass({displayName:"ReactDOMForm",mixins:[i,r],render:function(){return c(this.props)},componentDidMount:function(){this.trapBubbledEvent(n.topLevelTypes.topReset,"reset"),this.trapBubbledEvent(n.topLevelTypes.topSubmit,"submit")}});t.exports=l},{"./EventConstants":16,"./LocalEventTrapMixin":25,"./ReactBrowserComponentMixin":30,"./ReactCompositeComponent":35,"./ReactDOM":38,"./ReactElement":53}],42:[function(e,t){(function(n){"use strict";var r=e("./CSSPropertyOperations"),i=e("./DOMChildrenOperations"),o=e("./DOMPropertyOperations"),a=e("./ReactMount"),s=e("./ReactPerf"),c=e("./invariant"),l=e("./setInnerHTML"),u={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},h={updatePropertyByID:s.measure("ReactDOMIDOperations","updatePropertyByID",function(e,t,r){var i=a.getNode(e);"production"!==n.env.NODE_ENV?c(!u.hasOwnProperty(t),"updatePropertyByID(...): %s",u[t]):c(!u.hasOwnProperty(t)),null!=r?o.setValueForProperty(i,t,r):o.deleteValueForProperty(i,t)}),deletePropertyByID:s.measure("ReactDOMIDOperations","deletePropertyByID",function(e,t,r){var i=a.getNode(e);"production"!==n.env.NODE_ENV?c(!u.hasOwnProperty(t),"updatePropertyByID(...): %s",u[t]):c(!u.hasOwnProperty(t)),o.deleteValueForProperty(i,t,r)}),updateStylesByID:s.measure("ReactDOMIDOperations","updateStylesByID",function(e,t){var n=a.getNode(e);r.setValueForStyles(n,t)}),updateInnerHTMLByID:s.measure("ReactDOMIDOperations","updateInnerHTMLByID",function(e,t){var n=a.getNode(e);l(n,t)}),updateTextContentByID:s.measure("ReactDOMIDOperations","updateTextContentByID",function(e,t){var n=a.getNode(e);i.updateTextContent(n,t)}),dangerouslyReplaceNodeWithMarkupByID:s.measure("ReactDOMIDOperations","dangerouslyReplaceNodeWithMarkupByID",function(e,t){var n=a.getNode(e);i.dangerouslyReplaceNodeWithMarkup(n,t)}),dangerouslyProcessChildrenUpdates:s.measure("ReactDOMIDOperations","dangerouslyProcessChildrenUpdates",function(e,t){for(var n=0;n<e.length;n++)e[n].parentNode=a.getNode(e[n].parentID);i.processUpdates(e,t)})};t.exports=h}).call(this,e("_process"))},{"./CSSPropertyOperations":5,"./DOMChildrenOperations":10,"./DOMPropertyOperations":12,"./ReactMount":64,"./ReactPerf":69,"./invariant":127,"./setInnerHTML":141,_process:1}],43:[function(e,t){"use strict";var n=e("./EventConstants"),r=e("./LocalEventTrapMixin"),i=e("./ReactBrowserComponentMixin"),o=e("./ReactCompositeComponent"),a=e("./ReactElement"),s=e("./ReactDOM"),c=a.createFactory(s.img.type),l=o.createClass({displayName:"ReactDOMImg",tagName:"IMG",mixins:[i,r],render:function(){return c(this.props)},componentDidMount:function(){this.trapBubbledEvent(n.topLevelTypes.topLoad,"load"),this.trapBubbledEvent(n.topLevelTypes.topError,"error")}});t.exports=l},{"./EventConstants":16,"./LocalEventTrapMixin":25,"./ReactBrowserComponentMixin":30,"./ReactCompositeComponent":35,"./ReactDOM":38,"./ReactElement":53}],44:[function(e,t){(function(n){"use strict";function r(){this.isMounted()&&this.forceUpdate()}var i=e("./AutoFocusMixin"),o=e("./DOMPropertyOperations"),a=e("./LinkedValueUtils"),s=e("./ReactBrowserComponentMixin"),c=e("./ReactCompositeComponent"),l=e("./ReactElement"),u=e("./ReactDOM"),h=e("./ReactMount"),p=e("./ReactUpdates"),d=e("./Object.assign"),f=e("./invariant"),m=l.createFactory(u.input.type),v={},g=c.createClass({displayName:"ReactDOMInput",mixins:[i,a.Mixin,s],getInitialState:function(){var e=this.props.defaultValue;return{initialChecked:this.props.defaultChecked||!1,initialValue:null!=e?e:null}},render:function(){var e=d({},this.props);e.defaultChecked=null,e.defaultValue=null;var t=a.getValue(this);e.value=null!=t?t:this.state.initialValue;var n=a.getChecked(this);return e.checked=null!=n?n:this.state.initialChecked,e.onChange=this._handleChange,m(e,this.props.children)},componentDidMount:function(){var e=h.getID(this.getDOMNode());v[e]=this},componentWillUnmount:function(){var e=this.getDOMNode(),t=h.getID(e);delete v[t]},componentDidUpdate:function(){var e=this.getDOMNode();null!=this.props.checked&&o.setValueForProperty(e,"checked",this.props.checked||!1);var t=a.getValue(this);null!=t&&o.setValueForProperty(e,"value",""+t)},_handleChange:function(e){var t,i=a.getOnChange(this);i&&(t=i.call(this,e)),p.asap(r,this);var o=this.props.name;if("radio"===this.props.type&&null!=o){for(var s=this.getDOMNode(),c=s;c.parentNode;)c=c.parentNode;for(var l=c.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),u=0,d=l.length;d>u;u++){var m=l[u];if(m!==s&&m.form===s.form){var g=h.getID(m);"production"!==n.env.NODE_ENV?f(g,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported."):f(g);var y=v[g];"production"!==n.env.NODE_ENV?f(y,"ReactDOMInput: Unknown radio button ID %s.",g):f(y),p.asap(r,y)}}}return t}});t.exports=g}).call(this,e("_process"))},{"./AutoFocusMixin":2,"./DOMPropertyOperations":12,"./LinkedValueUtils":24,"./Object.assign":27,"./ReactBrowserComponentMixin":30,"./ReactCompositeComponent":35,"./ReactDOM":38,"./ReactElement":53,"./ReactMount":64,"./ReactUpdates":80,"./invariant":127,_process:1}],45:[function(e,t){(function(n){"use strict";var r=e("./ReactBrowserComponentMixin"),i=e("./ReactCompositeComponent"),o=e("./ReactElement"),a=e("./ReactDOM"),s=e("./warning"),c=o.createFactory(a.option.type),l=i.createClass({displayName:"ReactDOMOption",mixins:[r],componentWillMount:function(){"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?s(null==this.props.selected,"Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."):null)},render:function(){return c(this.props,this.props.children)}});t.exports=l}).call(this,e("_process"))},{"./ReactBrowserComponentMixin":30,"./ReactCompositeComponent":35,"./ReactDOM":38,"./ReactElement":53,"./warning":146,_process:1}],46:[function(e,t){"use strict";function n(){this.isMounted()&&(this.setState({value:this._pendingValue}),this._pendingValue=0)}function r(e,t){if(null!=e[t])if(e.multiple){if(!Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be an array if `multiple` is true.")}else if(Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be a scalar value if `multiple` is false.")}function i(e,t){var n,r,i,o=e.props.multiple,a=null!=t?t:e.state.value,s=e.getDOMNode().options;if(o)for(n={},r=0,i=a.length;i>r;++r)n[""+a[r]]=!0;else n=""+a;for(r=0,i=s.length;i>r;r++){var c=o?n.hasOwnProperty(s[r].value):s[r].value===n;c!==s[r].selected&&(s[r].selected=c)}}var o=e("./AutoFocusMixin"),a=e("./LinkedValueUtils"),s=e("./ReactBrowserComponentMixin"),c=e("./ReactCompositeComponent"),l=e("./ReactElement"),u=e("./ReactDOM"),h=e("./ReactUpdates"),p=e("./Object.assign"),d=l.createFactory(u.select.type),f=c.createClass({displayName:"ReactDOMSelect",mixins:[o,a.Mixin,s],propTypes:{defaultValue:r,value:r},getInitialState:function(){return{value:this.props.defaultValue||(this.props.multiple?[]:"")}},componentWillMount:function(){this._pendingValue=null},componentWillReceiveProps:function(e){!this.props.multiple&&e.multiple?this.setState({value:[this.state.value]}):this.props.multiple&&!e.multiple&&this.setState({value:this.state.value[0]})},render:function(){var e=p({},this.props);return e.onChange=this._handleChange,e.value=null,d(e,this.props.children)},componentDidMount:function(){i(this,a.getValue(this))},componentDidUpdate:function(e){var t=a.getValue(this),n=!!e.multiple,r=!!this.props.multiple;(null!=t||n!==r)&&i(this,t)},_handleChange:function(e){var t,r=a.getOnChange(this);r&&(t=r.call(this,e));var i;if(this.props.multiple){i=[];for(var o=e.target.options,s=0,c=o.length;c>s;s++)o[s].selected&&i.push(o[s].value)}else i=e.target.value;return this._pendingValue=i,h.asap(n,this),t}});t.exports=f},{"./AutoFocusMixin":2,"./LinkedValueUtils":24,"./Object.assign":27,"./ReactBrowserComponentMixin":30,"./ReactCompositeComponent":35,"./ReactDOM":38,"./ReactElement":53,"./ReactUpdates":80}],47:[function(e,t){"use strict";function n(e,t,n,r){return e===n&&t===r}function r(e){var t=document.selection,n=t.createRange(),r=n.text.length,i=n.duplicate();i.moveToElementText(e),i.setEndPoint("EndToStart",n);var o=i.text.length,a=o+r;return{start:o,end:a}}function i(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var r=t.anchorNode,i=t.anchorOffset,o=t.focusNode,a=t.focusOffset,s=t.getRangeAt(0),c=n(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),l=c?0:s.toString().length,u=s.cloneRange();u.selectNodeContents(e),u.setEnd(s.startContainer,s.startOffset);var h=n(u.startContainer,u.startOffset,u.endContainer,u.endOffset),p=h?0:u.toString().length,d=p+l,f=document.createRange();f.setStart(r,i),f.setEnd(o,a);var m=f.collapsed;return{start:m?d:p,end:m?p:d}}function o(e,t){var n,r,i=document.selection.createRange().duplicate();"undefined"==typeof t.end?(n=t.start,r=n):t.start>t.end?(n=t.end,r=t.start):(n=t.start,r=t.end),i.moveToElementText(e),i.moveStart("character",n),i.setEndPoint("EndToStart",i),i.moveEnd("character",r-n),i.select()}function a(e,t){if(window.getSelection){var n=window.getSelection(),r=e[l()].length,i=Math.min(t.start,r),o="undefined"==typeof t.end?i:Math.min(t.end,r);if(!n.extend&&i>o){var a=o;o=i,i=a}var s=c(e,i),u=c(e,o);if(s&&u){var h=document.createRange();h.setStart(s.node,s.offset),n.removeAllRanges(),i>o?(n.addRange(h),n.extend(u.node,u.offset)):(h.setEnd(u.node,u.offset),n.addRange(h))}}}var s=e("./ExecutionEnvironment"),c=e("./getNodeForCharacterOffset"),l=e("./getTextContentAccessor"),u=s.canUseDOM&&document.selection,h={getOffsets:u?r:i,setOffsets:u?o:a};t.exports=h},{"./ExecutionEnvironment":22,"./getNodeForCharacterOffset":120,"./getTextContentAccessor":122}],48:[function(e,t){(function(n){"use strict";function r(){this.isMounted()&&this.forceUpdate()}var i=e("./AutoFocusMixin"),o=e("./DOMPropertyOperations"),a=e("./LinkedValueUtils"),s=e("./ReactBrowserComponentMixin"),c=e("./ReactCompositeComponent"),l=e("./ReactElement"),u=e("./ReactDOM"),h=e("./ReactUpdates"),p=e("./Object.assign"),d=e("./invariant"),f=e("./warning"),m=l.createFactory(u.textarea.type),v=c.createClass({displayName:"ReactDOMTextarea",mixins:[i,a.Mixin,s],getInitialState:function(){var e=this.props.defaultValue,t=this.props.children;null!=t&&("production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?f(!1,"Use the `defaultValue` or `value` props instead of setting children on <textarea>."):null),"production"!==n.env.NODE_ENV?d(null==e,"If you supply `defaultValue` on a <textarea>, do not pass children."):d(null==e),Array.isArray(t)&&("production"!==n.env.NODE_ENV?d(t.length<=1,"<textarea> can only have at most one child."):d(t.length<=1),t=t[0]),e=""+t),null==e&&(e="");var r=a.getValue(this);return{initialValue:""+(null!=r?r:e)}},render:function(){var e=p({},this.props);return"production"!==n.env.NODE_ENV?d(null==e.dangerouslySetInnerHTML,"`dangerouslySetInnerHTML` does not make sense on <textarea>."):d(null==e.dangerouslySetInnerHTML),e.defaultValue=null,e.value=null,e.onChange=this._handleChange,m(e,this.state.initialValue)},componentDidUpdate:function(){var e=a.getValue(this);if(null!=e){var t=this.getDOMNode();o.setValueForProperty(t,"value",""+e)}},_handleChange:function(e){var t,n=a.getOnChange(this);return n&&(t=n.call(this,e)),h.asap(r,this),t}});t.exports=v}).call(this,e("_process"))},{"./AutoFocusMixin":2,"./DOMPropertyOperations":12,"./LinkedValueUtils":24,"./Object.assign":27,"./ReactBrowserComponentMixin":30,"./ReactCompositeComponent":35,"./ReactDOM":38,"./ReactElement":53,"./ReactUpdates":80,"./invariant":127,"./warning":146,_process:1}],49:[function(e,t){"use strict";function n(){this.reinitializeTransaction()}var r=e("./ReactUpdates"),i=e("./Transaction"),o=e("./Object.assign"),a=e("./emptyFunction"),s={initialize:a,close:function(){h.isBatchingUpdates=!1}},c={initialize:a,close:r.flushBatchedUpdates.bind(r)},l=[c,s];o(n.prototype,i.Mixin,{getTransactionWrappers:function(){return l}});var u=new n,h={isBatchingUpdates:!1,batchedUpdates:function(e,t,n){var r=h.isBatchingUpdates;h.isBatchingUpdates=!0,r?e(t,n):u.perform(e,null,t,n)}};t.exports=h},{"./Object.assign":27,"./ReactUpdates":80,"./Transaction":96,"./emptyFunction":108}],50:[function(e,t){(function(n){"use strict";function r(){if(C.EventEmitter.injectReactEventListener(M),C.EventPluginHub.injectEventPluginOrder(c),C.EventPluginHub.injectInstanceHandle(S),C.EventPluginHub.injectMount(T),C.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:A,EnterLeaveEventPlugin:l,ChangeEventPlugin:o,CompositionEventPlugin:s,MobileSafariClickEventPlugin:p,SelectEventPlugin:R,BeforeInputEventPlugin:i}),C.NativeComponent.injectGenericComponentClass(v),C.NativeComponent.injectComponentClasses({button:g,form:y,img:x,input:_,option:b,select:w,textarea:E,html:P("html"),head:P("head"),body:P("body")}),C.CompositeComponent.injectMixin(d),C.DOMProperty.injectDOMPropertyConfig(h),C.DOMProperty.injectDOMPropertyConfig(N),C.EmptyComponent.injectEmptyComponent("noscript"),C.Updates.injectReconcileTransaction(f.ReactReconcileTransaction),C.Updates.injectBatchingStrategy(m),C.RootIndex.injectCreateReactRootIndex(u.canUseDOM?a.createReactRootIndex:D.createReactRootIndex),C.Component.injectEnvironment(f),"production"!==n.env.NODE_ENV){var t=u.canUseDOM&&window.location.href||"";if(/[?&]react_perf\b/.test(t)){var r=e("./ReactDefaultPerf");r.start()}}}var i=e("./BeforeInputEventPlugin"),o=e("./ChangeEventPlugin"),a=e("./ClientReactRootIndex"),s=e("./CompositionEventPlugin"),c=e("./DefaultEventPluginOrder"),l=e("./EnterLeaveEventPlugin"),u=e("./ExecutionEnvironment"),h=e("./HTMLDOMPropertyConfig"),p=e("./MobileSafariClickEventPlugin"),d=e("./ReactBrowserComponentMixin"),f=e("./ReactComponentBrowserEnvironment"),m=e("./ReactDefaultBatchingStrategy"),v=e("./ReactDOMComponent"),g=e("./ReactDOMButton"),y=e("./ReactDOMForm"),x=e("./ReactDOMImg"),_=e("./ReactDOMInput"),b=e("./ReactDOMOption"),w=e("./ReactDOMSelect"),E=e("./ReactDOMTextarea"),M=e("./ReactEventListener"),C=e("./ReactInjection"),S=e("./ReactInstanceHandles"),T=e("./ReactMount"),R=e("./SelectEventPlugin"),D=e("./ServerReactRootIndex"),A=e("./SimpleEventPlugin"),N=e("./SVGDOMPropertyConfig"),P=e("./createFullPageComponent");t.exports={inject:r}}).call(this,e("_process"))},{"./BeforeInputEventPlugin":3,"./ChangeEventPlugin":7,"./ClientReactRootIndex":8,"./CompositionEventPlugin":9,"./DefaultEventPluginOrder":14,"./EnterLeaveEventPlugin":15,"./ExecutionEnvironment":22,"./HTMLDOMPropertyConfig":23,"./MobileSafariClickEventPlugin":26,"./ReactBrowserComponentMixin":30,"./ReactComponentBrowserEnvironment":34,"./ReactDOMButton":39,"./ReactDOMComponent":40,"./ReactDOMForm":41,"./ReactDOMImg":43,"./ReactDOMInput":44,"./ReactDOMOption":45,"./ReactDOMSelect":46,"./ReactDOMTextarea":48,"./ReactDefaultBatchingStrategy":49,"./ReactDefaultPerf":51,"./ReactEventListener":58,"./ReactInjection":59,"./ReactInstanceHandles":61,"./ReactMount":64,"./SVGDOMPropertyConfig":81,"./SelectEventPlugin":82,"./ServerReactRootIndex":83,"./SimpleEventPlugin":84,"./createFullPageComponent":104,_process:1}],51:[function(e,t){"use strict";function n(e){return Math.floor(100*e)/100}function r(e,t,n){e[t]=(e[t]||0)+n}var i=e("./DOMProperty"),o=e("./ReactDefaultPerfAnalysis"),a=e("./ReactMount"),s=e("./ReactPerf"),c=e("./performanceNow"),l={_allMeasurements:[],_mountStack:[0],_injected:!1,start:function(){l._injected||s.injection.injectMeasure(l.measure),l._allMeasurements.length=0,s.enableMeasure=!0},stop:function(){s.enableMeasure=!1},getLastMeasurements:function(){return l._allMeasurements},printExclusive:function(e){e=e||l._allMeasurements;var t=o.getExclusiveSummary(e);console.table(t.map(function(e){return{"Component class name":e.componentName,"Total inclusive time (ms)":n(e.inclusive),"Exclusive mount time (ms)":n(e.exclusive),"Exclusive render time (ms)":n(e.render),"Mount time per instance (ms)":n(e.exclusive/e.count),"Render time per instance (ms)":n(e.render/e.count),Instances:e.count}}))},printInclusive:function(e){e=e||l._allMeasurements;var t=o.getInclusiveSummary(e);console.table(t.map(function(e){return{"Owner > component":e.componentName,"Inclusive time (ms)":n(e.time),Instances:e.count}})),console.log("Total time:",o.getTotalTime(e).toFixed(2)+" ms")},getMeasurementsSummaryMap:function(e){var t=o.getInclusiveSummary(e,!0);return t.map(function(e){return{"Owner > component":e.componentName,"Wasted time (ms)":e.time,Instances:e.count}})},printWasted:function(e){e=e||l._allMeasurements,console.table(l.getMeasurementsSummaryMap(e)),console.log("Total time:",o.getTotalTime(e).toFixed(2)+" ms")},printDOM:function(e){e=e||l._allMeasurements;var t=o.getDOMSummary(e);console.table(t.map(function(e){var t={};return t[i.ID_ATTRIBUTE_NAME]=e.id,t.type=e.type,t.args=JSON.stringify(e.args),t})),console.log("Total time:",o.getTotalTime(e).toFixed(2)+" ms")},_recordWrite:function(e,t,n,r){var i=l._allMeasurements[l._allMeasurements.length-1].writes;i[e]=i[e]||[],i[e].push({type:t,time:n,args:r})},measure:function(e,t,n){return function(){for(var i=[],o=0,s=arguments.length;s>o;o++)i.push(arguments[o]);var u,h,p;if("_renderNewRootComponent"===t||"flushBatchedUpdates"===t)return l._allMeasurements.push({exclusive:{},inclusive:{},render:{},counts:{},writes:{},displayNames:{},totalTime:0}),p=c(),h=n.apply(this,i),l._allMeasurements[l._allMeasurements.length-1].totalTime=c()-p,h;if("ReactDOMIDOperations"===e||"ReactComponentBrowserEnvironment"===e){if(p=c(),h=n.apply(this,i),u=c()-p,"mountImageIntoNode"===t){var d=a.getID(i[1]);l._recordWrite(d,t,u,i[0])}else"dangerouslyProcessChildrenUpdates"===t?i[0].forEach(function(e){var t={};null!==e.fromIndex&&(t.fromIndex=e.fromIndex),null!==e.toIndex&&(t.toIndex=e.toIndex),null!==e.textContent&&(t.textContent=e.textContent),null!==e.markupIndex&&(t.markup=i[1][e.markupIndex]),l._recordWrite(e.parentID,e.type,u,t)}):l._recordWrite(i[0],t,u,Array.prototype.slice.call(i,1));return h}if("ReactCompositeComponent"!==e||"mountComponent"!==t&&"updateComponent"!==t&&"_renderValidatedComponent"!==t)return n.apply(this,i);var f="mountComponent"===t?i[0]:this._rootNodeID,m="_renderValidatedComponent"===t,v="mountComponent"===t,g=l._mountStack,y=l._allMeasurements[l._allMeasurements.length-1];if(m?r(y.counts,f,1):v&&g.push(0),p=c(),h=n.apply(this,i),u=c()-p,m)r(y.render,f,u);else if(v){var x=g.pop();g[g.length-1]+=u,r(y.exclusive,f,u-x),r(y.inclusive,f,u)}else r(y.inclusive,f,u);return y.displayNames[f]={current:this.constructor.displayName,owner:this._owner?this._owner.constructor.displayName:"<root>"},h}}};t.exports=l},{"./DOMProperty":11,"./ReactDefaultPerfAnalysis":52,"./ReactMount":64,"./ReactPerf":69,"./performanceNow":140}],52:[function(e,t){function n(e){for(var t=0,n=0;n<e.length;n++){var r=e[n];t+=r.totalTime}return t}function r(e){for(var t=[],n=0;n<e.length;n++){var r,i=e[n];for(r in i.writes)i.writes[r].forEach(function(e){t.push({id:r,type:l[e.type]||e.type,args:e.args})})}return t}function i(e){for(var t,n={},r=0;r<e.length;r++){var i=e[r],o=s({},i.exclusive,i.inclusive);for(var a in o)t=i.displayNames[a].current,n[t]=n[t]||{componentName:t,inclusive:0,exclusive:0,render:0,count:0},i.render[a]&&(n[t].render+=i.render[a]),i.exclusive[a]&&(n[t].exclusive+=i.exclusive[a]),i.inclusive[a]&&(n[t].inclusive+=i.inclusive[a]),i.counts[a]&&(n[t].count+=i.counts[a])
}var l=[];for(t in n)n[t].exclusive>=c&&l.push(n[t]);return l.sort(function(e,t){return t.exclusive-e.exclusive}),l}function o(e,t){for(var n,r={},i=0;i<e.length;i++){var o,l=e[i],u=s({},l.exclusive,l.inclusive);t&&(o=a(l));for(var h in u)if(!t||o[h]){var p=l.displayNames[h];n=p.owner+" > "+p.current,r[n]=r[n]||{componentName:n,time:0,count:0},l.inclusive[h]&&(r[n].time+=l.inclusive[h]),l.counts[h]&&(r[n].count+=l.counts[h])}}var d=[];for(n in r)r[n].time>=c&&d.push(r[n]);return d.sort(function(e,t){return t.time-e.time}),d}function a(e){var t={},n=Object.keys(e.writes),r=s({},e.exclusive,e.inclusive);for(var i in r){for(var o=!1,a=0;a<n.length;a++)if(0===n[a].indexOf(i)){o=!0;break}!o&&e.counts[i]>0&&(t[i]=!0)}return t}var s=e("./Object.assign"),c=1.2,l={mountImageIntoNode:"set innerHTML",INSERT_MARKUP:"set innerHTML",MOVE_EXISTING:"move",REMOVE_NODE:"remove",TEXT_CONTENT:"set textContent",updatePropertyByID:"update attribute",deletePropertyByID:"delete attribute",updateStylesByID:"update styles",updateInnerHTMLByID:"set innerHTML",dangerouslyReplaceNodeWithMarkupByID:"replace"},u={getExclusiveSummary:i,getInclusiveSummary:o,getDOMSummary:r,getTotalTime:n};t.exports=u},{"./Object.assign":27}],53:[function(e,t){(function(n){"use strict";function r(e,t){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:function(){return this._store?this._store[t]:null},set:function(e){"production"!==n.env.NODE_ENV?s(!1,"Don't set the "+t+" property of the component. Mutate the existing props object instead."):null,this._store[t]=e}})}function i(e){try{var t={props:!0};for(var n in t)r(e,n);l=!0}catch(i){}}var o=e("./ReactContext"),a=e("./ReactCurrentOwner"),s=e("./warning"),c={key:!0,ref:!0},l=!1,u=function(e,t,r,i,o,a){return this.type=e,this.key=t,this.ref=r,this._owner=i,this._context=o,"production"!==n.env.NODE_ENV&&(this._store={validated:!1,props:a},l)?void Object.freeze(this):void(this.props=a)};u.prototype={_isReactElement:!0},"production"!==n.env.NODE_ENV&&i(u.prototype),u.createElement=function(e,t,r){var i,l={},h=null,p=null;if(null!=t){p=void 0===t.ref?null:t.ref,"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?s(null!==t.key,"createElement(...): Encountered component with a `key` of null. In a future version, this will be treated as equivalent to the string 'null'; instead, provide an explicit key or use undefined."):null),h=null==t.key?null:""+t.key;for(i in t)t.hasOwnProperty(i)&&!c.hasOwnProperty(i)&&(l[i]=t[i])}var d=arguments.length-2;if(1===d)l.children=r;else if(d>1){for(var f=Array(d),m=0;d>m;m++)f[m]=arguments[m+2];l.children=f}if(e&&e.defaultProps){var v=e.defaultProps;for(i in v)"undefined"==typeof l[i]&&(l[i]=v[i])}return new u(e,h,p,a.current,o.current,l)},u.createFactory=function(e){var t=u.createElement.bind(null,e);return t.type=e,t},u.cloneAndReplaceProps=function(e,t){var r=new u(e.type,e.key,e.ref,e._owner,e._context,t);return"production"!==n.env.NODE_ENV&&(r._store.validated=e._store.validated),r},u.isValidElement=function(e){var t=!(!e||!e._isReactElement);return t},t.exports=u}).call(this,e("_process"))},{"./ReactContext":36,"./ReactCurrentOwner":37,"./warning":146,_process:1}],54:[function(e,t){(function(n){"use strict";function r(){var e=p.current;return e&&e.constructor.displayName||void 0}function i(e,t){e._store.validated||null!=e.key||(e._store.validated=!0,a("react_key_warning",'Each child in an array should have a unique "key" prop.',e,t))}function o(e,t,n){y.test(e)&&a("react_numeric_key_warning","Child objects should have non-numeric keys so ordering is preserved.",t,n)}function a(e,t,n,i){var o=r(),a=i.displayName,s=o||a,c=m[e];if(!c.hasOwnProperty(s)){c[s]=!0,t+=o?" Check the render method of "+o+".":" Check the renderComponent call using <"+a+">.";var l=null;n._owner&&n._owner!==p.current&&(l=n._owner.constructor.displayName,t+=" It was passed a child from "+l+"."),t+=" See http://fb.me/react-warning-keys for more information.",d(e,{component:s,componentOwner:l}),console.warn(t)}}function s(){var e=r()||"";v.hasOwnProperty(e)||(v[e]=!0,d("react_object_map_children"))}function c(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n];u.isValidElement(r)&&i(r,t)}else if(u.isValidElement(e))e._store.validated=!0;else if(e&&"object"==typeof e){s();for(var a in e)o(a,e[a],t)}}function l(e,t,n,r){for(var i in t)if(t.hasOwnProperty(i)){var o;try{o=t[i](n,i,e,r)}catch(a){o=a}o instanceof Error&&!(o.message in g)&&(g[o.message]=!0,d("react_failed_descriptor_type_check",{message:o.message}))}}var u=e("./ReactElement"),h=e("./ReactPropTypeLocations"),p=e("./ReactCurrentOwner"),d=e("./monitorCodeUse"),f=e("./warning"),m={react_key_warning:{},react_numeric_key_warning:{}},v={},g={},y=/^\d+$/,x={createElement:function(e){"production"!==n.env.NODE_ENV?f(null!=e,"React.createElement: type should not be null or undefined. It should be a string (for DOM elements) or a ReactClass (for composite components)."):null;var t=u.createElement.apply(this,arguments);if(null==t)return t;for(var r=2;r<arguments.length;r++)c(arguments[r],e);if(e){var i=e.displayName;e.propTypes&&l(i,e.propTypes,t.props,h.prop),e.contextTypes&&l(i,e.contextTypes,t._context,h.context)}return t},createFactory:function(e){var t=x.createElement.bind(null,e);return t.type=e,t}};t.exports=x}).call(this,e("_process"))},{"./ReactCurrentOwner":37,"./ReactElement":53,"./ReactPropTypeLocations":72,"./monitorCodeUse":137,"./warning":146,_process:1}],55:[function(e,t){(function(n){"use strict";function r(){return"production"!==n.env.NODE_ENV?l(s,"Trying to return null from a render, but no null placeholder component was injected."):l(s),s()}function i(e){u[e]=!0}function o(e){delete u[e]}function a(e){return u[e]}var s,c=e("./ReactElement"),l=e("./invariant"),u={},h={injectEmptyComponent:function(e){s=c.createFactory(e)}},p={deregisterNullComponentID:o,getEmptyComponent:r,injection:h,isNullComponentID:a,registerNullComponentID:i};t.exports=p}).call(this,e("_process"))},{"./ReactElement":53,"./invariant":127,_process:1}],56:[function(e,t){"use strict";var n={guard:function(e){return e}};t.exports=n},{}],57:[function(e,t){"use strict";function n(e){r.enqueueEvents(e),r.processEventQueue()}var r=e("./EventPluginHub"),i={handleTopLevel:function(e,t,i,o){var a=r.extractEvents(e,t,i,o);n(a)}};t.exports=i},{"./EventPluginHub":18}],58:[function(e,t){"use strict";function n(e){var t=u.getID(e),n=l.getReactRootIDFromNodeID(t),r=u.findReactContainerForID(n),i=u.getFirstReactDOM(r);return i}function r(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function i(e){for(var t=u.getFirstReactDOM(d(e.nativeEvent))||window,r=t;r;)e.ancestors.push(r),r=n(r);for(var i=0,o=e.ancestors.length;o>i;i++){t=e.ancestors[i];var a=u.getID(t)||"";m._handleTopLevel(e.topLevelType,t,a,e.nativeEvent)}}function o(e){var t=f(window);e(t)}var a=e("./EventListener"),s=e("./ExecutionEnvironment"),c=e("./PooledClass"),l=e("./ReactInstanceHandles"),u=e("./ReactMount"),h=e("./ReactUpdates"),p=e("./Object.assign"),d=e("./getEventTarget"),f=e("./getUnboundedScrollPosition");p(r.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(r,c.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:s.canUseDOM?window:null,setHandleTopLevel:function(e){m._handleTopLevel=e},setEnabled:function(e){m._enabled=!!e},isEnabled:function(){return m._enabled},trapBubbledEvent:function(e,t,n){var r=n;if(r)return a.listen(r,t,m.dispatchEvent.bind(null,e))},trapCapturedEvent:function(e,t,n){var r=n;if(r)return a.capture(r,t,m.dispatchEvent.bind(null,e))},monitorScrollValue:function(e){var t=o.bind(null,e);a.listen(window,"scroll",t),a.listen(window,"resize",t)},dispatchEvent:function(e,t){if(m._enabled){var n=r.getPooled(e,t);try{h.batchedUpdates(i,n)}finally{r.release(n)}}}};t.exports=m},{"./EventListener":17,"./ExecutionEnvironment":22,"./Object.assign":27,"./PooledClass":28,"./ReactInstanceHandles":61,"./ReactMount":64,"./ReactUpdates":80,"./getEventTarget":118,"./getUnboundedScrollPosition":123}],59:[function(e,t){"use strict";var n=e("./DOMProperty"),r=e("./EventPluginHub"),i=e("./ReactComponent"),o=e("./ReactCompositeComponent"),a=e("./ReactEmptyComponent"),s=e("./ReactBrowserEventEmitter"),c=e("./ReactNativeComponent"),l=e("./ReactPerf"),u=e("./ReactRootIndex"),h=e("./ReactUpdates"),p={Component:i.injection,CompositeComponent:o.injection,DOMProperty:n.injection,EmptyComponent:a.injection,EventPluginHub:r.injection,EventEmitter:s.injection,NativeComponent:c.injection,Perf:l.injection,RootIndex:u.injection,Updates:h.injection};t.exports=p},{"./DOMProperty":11,"./EventPluginHub":18,"./ReactBrowserEventEmitter":31,"./ReactComponent":33,"./ReactCompositeComponent":35,"./ReactEmptyComponent":55,"./ReactNativeComponent":67,"./ReactPerf":69,"./ReactRootIndex":76,"./ReactUpdates":80}],60:[function(e,t){"use strict";function n(e){return i(document.documentElement,e)}var r=e("./ReactDOMSelection"),i=e("./containsNode"),o=e("./focusNode"),a=e("./getActiveElement"),s={hasSelectionCapabilities:function(e){return e&&("INPUT"===e.nodeName&&"text"===e.type||"TEXTAREA"===e.nodeName||"true"===e.contentEditable)},getSelectionInformation:function(){var e=a();return{focusedElem:e,selectionRange:s.hasSelectionCapabilities(e)?s.getSelection(e):null}},restoreSelection:function(e){var t=a(),r=e.focusedElem,i=e.selectionRange;t!==r&&n(r)&&(s.hasSelectionCapabilities(r)&&s.setSelection(r,i),o(r))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&"INPUT"===e.nodeName){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=r.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,i=t.end;if("undefined"==typeof i&&(i=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(i,e.value.length);else if(document.selection&&"INPUT"===e.nodeName){var o=e.createTextRange();o.collapse(!0),o.moveStart("character",n),o.moveEnd("character",i-n),o.select()}else r.setOffsets(e,t)}};t.exports=s},{"./ReactDOMSelection":47,"./containsNode":102,"./focusNode":112,"./getActiveElement":114}],61:[function(e,t){(function(n){"use strict";function r(e){return d+e.toString(36)}function i(e,t){return e.charAt(t)===d||t===e.length}function o(e){return""===e||e.charAt(0)===d&&e.charAt(e.length-1)!==d}function a(e,t){return 0===t.indexOf(e)&&i(t,e.length)}function s(e){return e?e.substr(0,e.lastIndexOf(d)):""}function c(e,t){if("production"!==n.env.NODE_ENV?p(o(e)&&o(t),"getNextDescendantID(%s, %s): Received an invalid React DOM ID.",e,t):p(o(e)&&o(t)),"production"!==n.env.NODE_ENV?p(a(e,t),"getNextDescendantID(...): React has made an invalid assumption about the DOM hierarchy. Expected `%s` to be an ancestor of `%s`.",e,t):p(a(e,t)),e===t)return e;for(var r=e.length+f,s=r;s<t.length&&!i(t,s);s++);return t.substr(0,s)}function l(e,t){var r=Math.min(e.length,t.length);if(0===r)return"";for(var a=0,s=0;r>=s;s++)if(i(e,s)&&i(t,s))a=s;else if(e.charAt(s)!==t.charAt(s))break;var c=e.substr(0,a);return"production"!==n.env.NODE_ENV?p(o(c),"getFirstCommonAncestorID(%s, %s): Expected a valid React DOM ID: %s",e,t,c):p(o(c)),c}function u(e,t,r,i,o,l){e=e||"",t=t||"","production"!==n.env.NODE_ENV?p(e!==t,"traverseParentPath(...): Cannot traverse from and to the same ID, `%s`.",e):p(e!==t);var u=a(t,e);"production"!==n.env.NODE_ENV?p(u||a(e,t),"traverseParentPath(%s, %s, ...): Cannot traverse from two IDs that do not have a parent path.",e,t):p(u||a(e,t));for(var h=0,d=u?s:c,f=e;;f=d(f,t)){var v;if(o&&f===e||l&&f===t||(v=r(f,u,i)),v===!1||f===t)break;"production"!==n.env.NODE_ENV?p(h++<m,"traverseParentPath(%s, %s, ...): Detected an infinite loop while traversing the React DOM ID tree. This may be due to malformed IDs: %s",e,t):p(h++<m)}}var h=e("./ReactRootIndex"),p=e("./invariant"),d=".",f=d.length,m=100,v={createReactRootID:function(){return r(h.createReactRootIndex())},createReactID:function(e,t){return e+t},getReactRootIDFromNodeID:function(e){if(e&&e.charAt(0)===d&&e.length>1){var t=e.indexOf(d,1);return t>-1?e.substr(0,t):e}return null},traverseEnterLeave:function(e,t,n,r,i){var o=l(e,t);o!==e&&u(e,o,n,r,!1,!0),o!==t&&u(o,t,n,i,!0,!1)},traverseTwoPhase:function(e,t,n){e&&(u("",e,t,n,!0,!1),u(e,"",t,n,!1,!0))},traverseAncestors:function(e,t,n){u("",e,t,n,!0,!1)},_getFirstCommonAncestorID:l,_getNextDescendantID:c,isAncestorIDOf:a,SEPARATOR:d};t.exports=v}).call(this,e("_process"))},{"./ReactRootIndex":76,"./invariant":127,_process:1}],62:[function(e,t){(function(n){"use strict";function r(){if(f._isLegacyCallWarningEnabled){var e=s.current,t=e&&e.constructor?e.constructor.displayName:"";t||(t="Something"),h.hasOwnProperty(t)||(h[t]=!0,"production"!==n.env.NODE_ENV?u(!1,t+" is calling a React component directly. Use a factory or JSX instead. See: http://fb.me/react-legacyfactory"):null,l("react_legacy_factory_call",{version:3,name:t}))}}function i(e){var t=e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent;if(t)"production"!==n.env.NODE_ENV?u(!1,"Did not expect to get a React class here. Use `Component` instead of `Component.type` or `this.constructor`."):null;else{if(!e._reactWarnedForThisType){try{e._reactWarnedForThisType=!0}catch(r){}l("react_non_component_in_jsx",{version:3,name:e.name})}"production"!==n.env.NODE_ENV?u(!1,"This JSX uses a plain function. Only React components are valid in React's JSX transform."):null}}function o(e){"production"!==n.env.NODE_ENV?u(!1,"Do not pass React.DOM."+e.type+' to JSX or createFactory. Use the string "'+e.type+'" instead.'):null}function a(e,t){if("function"==typeof t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];if("function"==typeof r){var i=r.bind(t);for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o]);e[n]=i}else e[n]=r}}var s=e("./ReactCurrentOwner"),c=e("./invariant"),l=e("./monitorCodeUse"),u=e("./warning"),h={},p={},d={},f={};f.wrapCreateFactory=function(e){var t=function(t){return"function"!=typeof t?e(t):t.isReactNonLegacyFactory?("production"!==n.env.NODE_ENV&&o(t),e(t.type)):t.isReactLegacyFactory?e(t.type):("production"!==n.env.NODE_ENV&&i(t),t)};return t},f.wrapCreateElement=function(e){var t=function(t){if("function"!=typeof t)return e.apply(this,arguments);var r;return t.isReactNonLegacyFactory?("production"!==n.env.NODE_ENV&&o(t),r=Array.prototype.slice.call(arguments,0),r[0]=t.type,e.apply(this,r)):t.isReactLegacyFactory?(t._isMockFunction&&(t.type._mockedReactClassConstructor=t),r=Array.prototype.slice.call(arguments,0),r[0]=t.type,e.apply(this,r)):("production"!==n.env.NODE_ENV&&i(t),t.apply(null,Array.prototype.slice.call(arguments,1)))};return t},f.wrapFactory=function(e){"production"!==n.env.NODE_ENV?c("function"==typeof e,"This is suppose to accept a element factory"):c("function"==typeof e);var t=function(){return"production"!==n.env.NODE_ENV&&r(),e.apply(this,arguments)};return a(t,e.type),t.isReactLegacyFactory=p,t.type=e.type,t},f.markNonLegacyFactory=function(e){return e.isReactNonLegacyFactory=d,e},f.isValidFactory=function(e){return"function"==typeof e&&e.isReactLegacyFactory===p},f.isValidClass=function(e){return"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?u(!1,"isValidClass is deprecated and will be removed in a future release. Use a more specific validator instead."):null),f.isValidFactory(e)},f._isLegacyCallWarningEnabled=!0,t.exports=f}).call(this,e("_process"))},{"./ReactCurrentOwner":37,"./invariant":127,"./monitorCodeUse":137,"./warning":146,_process:1}],63:[function(e,t){"use strict";var n=e("./adler32"),r={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=n(e);return e.replace(">"," "+r.CHECKSUM_ATTR_NAME+'="'+t+'">')},canReuseMarkup:function(e,t){var i=t.getAttribute(r.CHECKSUM_ATTR_NAME);i=i&&parseInt(i,10);var o=n(e);return o===i}};t.exports=r},{"./adler32":99}],64:[function(e,t){(function(n){"use strict";function r(e){var t=b(e);return t&&k.getID(t)}function i(e){var t=o(e);if(t)if(D.hasOwnProperty(t)){var r=D[t];r!==e&&("production"!==n.env.NODE_ENV?E(!c(r,t),"ReactMount: Two valid but unequal nodes with the same `%s`: %s",R,t):E(!c(r,t)),D[t]=e)}else D[t]=e;return t}function o(e){return e&&e.getAttribute&&e.getAttribute(R)||""}function a(e,t){var n=o(e);n!==t&&delete D[n],e.setAttribute(R,t),D[t]=e}function s(e){return D.hasOwnProperty(e)&&c(D[e],e)||(D[e]=k.findReactNodeByID(e)),D[e]}function c(e,t){if(e){"production"!==n.env.NODE_ENV?E(o(e)===t,"ReactMount: Unexpected modification of `%s`",R):E(o(e)===t);var r=k.findReactContainerForID(t);if(r&&x(r,e))return!0}return!1}function l(e){delete D[e]}function u(e){var t=D[e];return t&&c(t,e)?void(V=t):!1}function h(e){V=null,g.traverseAncestors(e,u);var t=V;return V=null,t}var p=e("./DOMProperty"),d=e("./ReactBrowserEventEmitter"),f=e("./ReactCurrentOwner"),m=e("./ReactElement"),v=e("./ReactLegacyElement"),g=e("./ReactInstanceHandles"),y=e("./ReactPerf"),x=e("./containsNode"),_=e("./deprecated"),b=e("./getReactRootElementInContainer"),w=e("./instantiateReactComponent"),E=e("./invariant"),M=e("./shouldUpdateReactComponent"),C=e("./warning"),S=v.wrapCreateElement(m.createElement),T=g.SEPARATOR,R=p.ID_ATTRIBUTE_NAME,D={},A=1,N=9,P={},O={};if("production"!==n.env.NODE_ENV)var L={};var U=[],V=null,k={_instancesByReactRootID:P,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,i,o){var a=t.props;return k.scrollMonitor(i,function(){e.replaceProps(a,o)}),"production"!==n.env.NODE_ENV&&(L[r(i)]=b(i)),e},_registerComponent:function(e,t){"production"!==n.env.NODE_ENV?E(t&&(t.nodeType===A||t.nodeType===N),"_registerComponent(...): Target container is not a DOM element."):E(t&&(t.nodeType===A||t.nodeType===N)),d.ensureScrollValueMonitoring();var r=k.registerContainer(t);return P[r]=e,r},_renderNewRootComponent:y.measure("ReactMount","_renderNewRootComponent",function(e,t,r){"production"!==n.env.NODE_ENV?C(null==f.current,"_renderNewRootComponent(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate."):null;var i=w(e,null),o=k._registerComponent(i,t);return i.mountComponentIntoNode(o,t,r),"production"!==n.env.NODE_ENV&&(L[o]=b(t)),i}),render:function(e,t,i){"production"!==n.env.NODE_ENV?E(m.isValidElement(e),"renderComponent(): Invalid component element.%s","string"==typeof e?" Instead of passing an element string, make sure to instantiate it by passing it to React.createElement.":v.isValidFactory(e)?" Instead of passing a component class, make sure to instantiate it by passing it to React.createElement.":"undefined"!=typeof e.props?" This may be caused by unintentionally loading two independent copies of React.":""):E(m.isValidElement(e));var o=P[r(t)];if(o){var a=o._currentElement;if(M(a,e))return k._updateRootComponent(o,e,t,i);k.unmountComponentAtNode(t)}var s=b(t),c=s&&k.isRenderedByReact(s),l=c&&!o,u=k._renderNewRootComponent(e,t,l);return i&&i.call(u),u},constructAndRenderComponent:function(e,t,n){var r=S(e,t);return k.render(r,n)},constructAndRenderComponentByID:function(e,t,r){var i=document.getElementById(r);return"production"!==n.env.NODE_ENV?E(i,'Tried to get element with id of "%s" but it is not present on the page.',r):E(i),k.constructAndRenderComponent(e,t,i)},registerContainer:function(e){var t=r(e);return t&&(t=g.getReactRootIDFromNodeID(t)),t||(t=g.createReactRootID()),O[t]=e,t},unmountComponentAtNode:function(e){"production"!==n.env.NODE_ENV?C(null==f.current,"unmountComponentAtNode(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate."):null;var t=r(e),i=P[t];return i?(k.unmountComponentFromNode(i,e),delete P[t],delete O[t],"production"!==n.env.NODE_ENV&&delete L[t],!0):!1},unmountComponentFromNode:function(e,t){for(e.unmountComponent(),t.nodeType===N&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)},findReactContainerForID:function(e){var t=g.getReactRootIDFromNodeID(e),r=O[t];if("production"!==n.env.NODE_ENV){var i=L[t];if(i&&i.parentNode!==r){"production"!==n.env.NODE_ENV?E(o(i)===t,"ReactMount: Root element ID differed from reactRootID."):E(o(i)===t);var a=r.firstChild;a&&t===o(a)?L[t]=a:console.warn("ReactMount: Root element has been removed from its original container. New container:",i.parentNode)}}return r},findReactNodeByID:function(e){var t=k.findReactContainerForID(e);return k.findComponentRoot(t,e)},isRenderedByReact:function(e){if(1!==e.nodeType)return!1;var t=k.getID(e);return t?t.charAt(0)===T:!1},getFirstReactDOM:function(e){for(var t=e;t&&t.parentNode!==t;){if(k.isRenderedByReact(t))return t;t=t.parentNode}return null},findComponentRoot:function(e,t){var r=U,i=0,o=h(t)||e;for(r[0]=o.firstChild,r.length=1;i<r.length;){for(var a,s=r[i++];s;){var c=k.getID(s);c?t===c?a=s:g.isAncestorIDOf(c,t)&&(r.length=i=0,r.push(s.firstChild)):r.push(s.firstChild),s=s.nextSibling}if(a)return r.length=0,a}r.length=0,"production"!==n.env.NODE_ENV?E(!1,"findComponentRoot(..., %s): Unable to find element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting tags like <form>, <p>, or <a>, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",t,k.getID(e)):E(!1)},getReactRootID:r,getID:i,setID:a,getNode:s,purgeID:l};k.renderComponent=_("ReactMount","renderComponent","render",this,k.render),t.exports=k}).call(this,e("_process"))},{"./DOMProperty":11,"./ReactBrowserEventEmitter":31,"./ReactCurrentOwner":37,"./ReactElement":53,"./ReactInstanceHandles":61,"./ReactLegacyElement":62,"./ReactPerf":69,"./containsNode":102,"./deprecated":107,"./getReactRootElementInContainer":121,"./instantiateReactComponent":126,"./invariant":127,"./shouldUpdateReactComponent":143,"./warning":146,_process:1}],65:[function(e,t){"use strict";function n(e,t,n){f.push({parentID:e,parentNode:null,type:l.INSERT_MARKUP,markupIndex:m.push(t)-1,textContent:null,fromIndex:null,toIndex:n})}function r(e,t,n){f.push({parentID:e,parentNode:null,type:l.MOVE_EXISTING,markupIndex:null,textContent:null,fromIndex:t,toIndex:n})}function i(e,t){f.push({parentID:e,parentNode:null,type:l.REMOVE_NODE,markupIndex:null,textContent:null,fromIndex:t,toIndex:null})}function o(e,t){f.push({parentID:e,parentNode:null,type:l.TEXT_CONTENT,markupIndex:null,textContent:t,fromIndex:null,toIndex:null})}function a(){f.length&&(c.BackendIDOperations.dangerouslyProcessChildrenUpdates(f,m),s())}function s(){f.length=0,m.length=0}var c=e("./ReactComponent"),l=e("./ReactMultiChildUpdateTypes"),u=e("./flattenChildren"),h=e("./instantiateReactComponent"),p=e("./shouldUpdateReactComponent"),d=0,f=[],m=[],v={Mixin:{mountChildren:function(e,t){var n=u(e),r=[],i=0;this._renderedChildren=n;for(var o in n){var a=n[o];if(n.hasOwnProperty(o)){var s=h(a,null);n[o]=s;var c=this._rootNodeID+o,l=s.mountComponent(c,t,this._mountDepth+1);s._mountIndex=i,r.push(l),i++}}return r},updateTextContent:function(e){d++;var t=!0;try{var n=this._renderedChildren;for(var r in n)n.hasOwnProperty(r)&&this._unmountChildByName(n[r],r);this.setTextContent(e),t=!1}finally{d--,d||(t?s():a())}},updateChildren:function(e,t){d++;var n=!0;try{this._updateChildren(e,t),n=!1}finally{d--,d||(n?s():a())}},_updateChildren:function(e,t){var n=u(e),r=this._renderedChildren;if(n||r){var i,o=0,a=0;for(i in n)if(n.hasOwnProperty(i)){var s=r&&r[i],c=s&&s._currentElement,l=n[i];if(p(c,l))this.moveChild(s,a,o),o=Math.max(s._mountIndex,o),s.receiveComponent(l,t),s._mountIndex=a;else{s&&(o=Math.max(s._mountIndex,o),this._unmountChildByName(s,i));var d=h(l,null);this._mountChildByNameAtIndex(d,i,a,t)}a++}for(i in r)!r.hasOwnProperty(i)||n&&n[i]||this._unmountChildByName(r[i],i)}},unmountChildren:function(){var e=this._renderedChildren;for(var t in e){var n=e[t];n.unmountComponent&&n.unmountComponent()}this._renderedChildren=null},moveChild:function(e,t,n){e._mountIndex<n&&r(this._rootNodeID,e._mountIndex,t)},createChild:function(e,t){n(this._rootNodeID,t,e._mountIndex)},removeChild:function(e){i(this._rootNodeID,e._mountIndex)},setTextContent:function(e){o(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,t,n,r){var i=this._rootNodeID+t,o=e.mountComponent(i,r,this._mountDepth+1);e._mountIndex=n,this.createChild(e,o),this._renderedChildren=this._renderedChildren||{},this._renderedChildren[t]=e},_unmountChildByName:function(e,t){this.removeChild(e),e._mountIndex=null,e.unmountComponent(),delete this._renderedChildren[t]}}};t.exports=v},{"./ReactComponent":33,"./ReactMultiChildUpdateTypes":66,"./flattenChildren":111,"./instantiateReactComponent":126,"./shouldUpdateReactComponent":143}],66:[function(e,t){"use strict";var n=e("./keyMirror"),r=n({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,TEXT_CONTENT:null});t.exports=r},{"./keyMirror":133}],67:[function(e,t){(function(n){"use strict";function r(e,t,r){var i=s[e];return null==i?("production"!==n.env.NODE_ENV?o(a,"There is no registered component for the tag %s",e):o(a),new a(e,t)):r===e?("production"!==n.env.NODE_ENV?o(a,"There is no registered component for the tag %s",e):o(a),new a(e,t)):new i.type(t)}var i=e("./Object.assign"),o=e("./invariant"),a=null,s={},c={injectGenericComponentClass:function(e){a=e},injectComponentClasses:function(e){i(s,e)}},l={createInstanceForTag:r,injection:c};t.exports=l}).call(this,e("_process"))},{"./Object.assign":27,"./invariant":127,_process:1}],68:[function(e,t){(function(n){"use strict";var r=e("./emptyObject"),i=e("./invariant"),o={isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,t,r){"production"!==n.env.NODE_ENV?i(o.isValidOwner(r),"addComponentAsRefTo(...): Only a ReactOwner can have refs. This usually means that you're trying to add a ref to a component that doesn't have an owner (that is, was not created inside of another component's `render` method). Try rendering this component inside of a new top-level component which will hold the ref."):i(o.isValidOwner(r)),r.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,r){"production"!==n.env.NODE_ENV?i(o.isValidOwner(r),"removeComponentAsRefFrom(...): Only a ReactOwner can have refs. This usually means that you're trying to remove a ref to a component that doesn't have an owner (that is, was not created inside of another component's `render` method). Try rendering this component inside of a new top-level component which will hold the ref."):i(o.isValidOwner(r)),r.refs[t]===e&&r.detachRef(t)},Mixin:{construct:function(){this.refs=r},attachRef:function(e,t){"production"!==n.env.NODE_ENV?i(t.isOwnedBy(this),"attachRef(%s, ...): Only a component's owner can store a ref to it.",e):i(t.isOwnedBy(this));var o=this.refs===r?this.refs={}:this.refs;o[e]=t},detachRef:function(e){delete this.refs[e]}}};t.exports=o}).call(this,e("_process"))},{"./emptyObject":109,"./invariant":127,_process:1}],69:[function(e,t){(function(e){"use strict";function n(e,t,n){return n}var r={enableMeasure:!1,storedMeasure:n,measure:function(t,n,i){if("production"!==e.env.NODE_ENV){var o=null,a=function(){return r.enableMeasure?(o||(o=r.storedMeasure(t,n,i)),o.apply(this,arguments)):i.apply(this,arguments)};return a.displayName=t+"_"+n,a}return i},injection:{injectMeasure:function(e){r.storedMeasure=e}}};t.exports=r}).call(this,e("_process"))},{_process:1}],70:[function(e,t){(function(n){"use strict";function r(e){return function(t,n,r){t[n]=t.hasOwnProperty(n)?e(t[n],r):r}}function i(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=p[n];r&&p.hasOwnProperty(n)?r(e,n,t[n]):e.hasOwnProperty(n)||(e[n]=t[n])}return e}var o=e("./Object.assign"),a=e("./emptyFunction"),s=e("./invariant"),c=e("./joinClasses"),l=e("./warning"),u=!1,h=r(function(e,t){return o({},t,e)}),p={children:a,className:r(c),style:h},d={TransferStrategies:p,mergeProps:function(e,t){return i(o({},e),t)},Mixin:{transferPropsTo:function(e){return"production"!==n.env.NODE_ENV?s(e._owner===this,"%s: You can't call transferPropsTo() on a component that you don't own, %s. This usually means you are calling transferPropsTo() on a component passed in as props or children.",this.constructor.displayName,"string"==typeof e.type?e.type:e.type.displayName):s(e._owner===this),"production"!==n.env.NODE_ENV&&(u||(u=!0,"production"!==n.env.NODE_ENV?l(!1,"transferPropsTo is deprecated. See http://fb.me/react-transferpropsto for more information."):null)),i(e.props,this.props),e}}};t.exports=d}).call(this,e("_process"))},{"./Object.assign":27,"./emptyFunction":108,"./invariant":127,"./joinClasses":132,"./warning":146,_process:1}],71:[function(e,t){(function(e){"use strict";var n={};"production"!==e.env.NODE_ENV&&(n={prop:"prop",context:"context",childContext:"child context"}),t.exports=n}).call(this,e("_process"))},{_process:1}],72:[function(e,t){"use strict";var n=e("./keyMirror"),r=n({prop:null,context:null,childContext:null});t.exports=r},{"./keyMirror":133}],73:[function(e,t){"use strict";function n(e){function t(t,n,r,i,o){if(i=i||_,null!=n[r])return e(n,r,i,o);var a=g[o];return t?new Error("Required "+a+" `"+r+"` was not specified in "+("`"+i+"`.")):void 0}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function r(e){function t(t,n,r,i){var o=t[n],a=f(o);if(a!==e){var s=g[i],c=m(o);return new Error("Invalid "+s+" `"+n+"` of type `"+c+"` "+("supplied to `"+r+"`, expected `"+e+"`."))}}return n(t)}function i(){return n(x.thatReturns())}function o(e){function t(t,n,r,i){var o=t[n];if(!Array.isArray(o)){var a=g[i],s=f(o);return new Error("Invalid "+a+" `"+n+"` of type "+("`"+s+"` supplied to `"+r+"`, expected an array."))}for(var c=0;c<o.length;c++){var l=e(o,c,r,i);if(l instanceof Error)return l}}return n(t)}function a(){function e(e,t,n,r){if(!v.isValidElement(e[t])){var i=g[r];return new Error("Invalid "+i+" `"+t+"` supplied to "+("`"+n+"`, expected a ReactElement."))}}return n(e)}function s(e){function t(t,n,r,i){if(!(t[n]instanceof e)){var o=g[i],a=e.name||_;return new Error("Invalid "+o+" `"+n+"` supplied to "+("`"+r+"`, expected instance of `"+a+"`."))}}return n(t)}function c(e){function t(t,n,r,i){for(var o=t[n],a=0;a<e.length;a++)if(o===e[a])return;var s=g[i],c=JSON.stringify(e);return new Error("Invalid "+s+" `"+n+"` of value `"+o+"` "+("supplied to `"+r+"`, expected one of "+c+"."))}return n(t)}function l(e){function t(t,n,r,i){var o=t[n],a=f(o);if("object"!==a){var s=g[i];return new Error("Invalid "+s+" `"+n+"` of type "+("`"+a+"` supplied to `"+r+"`, expected an object."))}for(var c in o)if(o.hasOwnProperty(c)){var l=e(o,c,r,i);if(l instanceof Error)return l}}return n(t)}function u(e){function t(t,n,r,i){for(var o=0;o<e.length;o++){var a=e[o];if(null==a(t,n,r,i))return}var s=g[i];return new Error("Invalid "+s+" `"+n+"` supplied to "+("`"+r+"`."))}return n(t)}function h(){function e(e,t,n,r){if(!d(e[t])){var i=g[r];return new Error("Invalid "+i+" `"+t+"` supplied to "+("`"+n+"`, expected a ReactNode."))}}return n(e)}function p(e){function t(t,n,r,i){var o=t[n],a=f(o);if("object"!==a){var s=g[i];return new Error("Invalid "+s+" `"+n+"` of type `"+a+"` "+("supplied to `"+r+"`, expected `object`."))}for(var c in e){var l=e[c];if(l){var u=l(o,c,r,i);if(u)return u}}}return n(t,"expected `object`")}function d(e){switch(typeof e){case"number":case"string":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(d);if(v.isValidElement(e))return!0;for(var t in e)if(!d(e[t]))return!1;return!0;default:return!1}}function f(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":t}function m(e){var t=f(e);if("object"===t){if(e instanceof Date)return"date";
if(e instanceof RegExp)return"regexp"}return t}var v=e("./ReactElement"),g=e("./ReactPropTypeLocationNames"),y=e("./deprecated"),x=e("./emptyFunction"),_="<<anonymous>>",b=a(),w=h(),E={array:r("array"),bool:r("boolean"),func:r("function"),number:r("number"),object:r("object"),string:r("string"),any:i(),arrayOf:o,element:b,instanceOf:s,node:w,objectOf:l,oneOf:c,oneOfType:u,shape:p,component:y("React.PropTypes","component","element",this,b),renderable:y("React.PropTypes","renderable","node",this,w)};t.exports=E},{"./ReactElement":53,"./ReactPropTypeLocationNames":71,"./deprecated":107,"./emptyFunction":108}],74:[function(e,t){"use strict";function n(){this.listenersToPut=[]}var r=e("./PooledClass"),i=e("./ReactBrowserEventEmitter"),o=e("./Object.assign");o(n.prototype,{enqueuePutListener:function(e,t,n){this.listenersToPut.push({rootNodeID:e,propKey:t,propValue:n})},putListeners:function(){for(var e=0;e<this.listenersToPut.length;e++){var t=this.listenersToPut[e];i.putListener(t.rootNodeID,t.propKey,t.propValue)}},reset:function(){this.listenersToPut.length=0},destructor:function(){this.reset()}}),r.addPoolingTo(n),t.exports=n},{"./Object.assign":27,"./PooledClass":28,"./ReactBrowserEventEmitter":31}],75:[function(e,t){"use strict";function n(){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=r.getPooled(null),this.putListenerQueue=s.getPooled()}var r=e("./CallbackQueue"),i=e("./PooledClass"),o=e("./ReactBrowserEventEmitter"),a=e("./ReactInputSelection"),s=e("./ReactPutListenerQueue"),c=e("./Transaction"),l=e("./Object.assign"),u={initialize:a.getSelectionInformation,close:a.restoreSelection},h={initialize:function(){var e=o.isEnabled();return o.setEnabled(!1),e},close:function(e){o.setEnabled(e)}},p={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},d={initialize:function(){this.putListenerQueue.reset()},close:function(){this.putListenerQueue.putListeners()}},f=[d,u,h,p],m={getTransactionWrappers:function(){return f},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){r.release(this.reactMountReady),this.reactMountReady=null,s.release(this.putListenerQueue),this.putListenerQueue=null}};l(n.prototype,c.Mixin,m),i.addPoolingTo(n),t.exports=n},{"./CallbackQueue":6,"./Object.assign":27,"./PooledClass":28,"./ReactBrowserEventEmitter":31,"./ReactInputSelection":60,"./ReactPutListenerQueue":74,"./Transaction":96}],76:[function(e,t){"use strict";var n={injectCreateReactRootIndex:function(e){r.createReactRootIndex=e}},r={createReactRootIndex:null,injection:n};t.exports=r},{}],77:[function(e,t){(function(n){"use strict";function r(e){"production"!==n.env.NODE_ENV?u(o.isValidElement(e),"renderToString(): You must pass a valid ReactElement."):u(o.isValidElement(e));var t;try{var r=a.createReactRootID();return t=c.getPooled(!1),t.perform(function(){var n=l(e,null),i=n.mountComponent(r,t,0);return s.addChecksumToMarkup(i)},null)}finally{c.release(t)}}function i(e){"production"!==n.env.NODE_ENV?u(o.isValidElement(e),"renderToStaticMarkup(): You must pass a valid ReactElement."):u(o.isValidElement(e));var t;try{var r=a.createReactRootID();return t=c.getPooled(!0),t.perform(function(){var n=l(e,null);return n.mountComponent(r,t,0)},null)}finally{c.release(t)}}var o=e("./ReactElement"),a=e("./ReactInstanceHandles"),s=e("./ReactMarkupChecksum"),c=e("./ReactServerRenderingTransaction"),l=e("./instantiateReactComponent"),u=e("./invariant");t.exports={renderToString:r,renderToStaticMarkup:i}}).call(this,e("_process"))},{"./ReactElement":53,"./ReactInstanceHandles":61,"./ReactMarkupChecksum":63,"./ReactServerRenderingTransaction":78,"./instantiateReactComponent":126,"./invariant":127,_process:1}],78:[function(e,t){"use strict";function n(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.reactMountReady=i.getPooled(null),this.putListenerQueue=o.getPooled()}var r=e("./PooledClass"),i=e("./CallbackQueue"),o=e("./ReactPutListenerQueue"),a=e("./Transaction"),s=e("./Object.assign"),c=e("./emptyFunction"),l={initialize:function(){this.reactMountReady.reset()},close:c},u={initialize:function(){this.putListenerQueue.reset()},close:c},h=[u,l],p={getTransactionWrappers:function(){return h},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){i.release(this.reactMountReady),this.reactMountReady=null,o.release(this.putListenerQueue),this.putListenerQueue=null}};s(n.prototype,a.Mixin,p),r.addPoolingTo(n),t.exports=n},{"./CallbackQueue":6,"./Object.assign":27,"./PooledClass":28,"./ReactPutListenerQueue":74,"./Transaction":96,"./emptyFunction":108}],79:[function(e,t){"use strict";var n=e("./DOMPropertyOperations"),r=e("./ReactComponent"),i=e("./ReactElement"),o=e("./Object.assign"),a=e("./escapeTextForBrowser"),s=function(){};o(s.prototype,r.Mixin,{mountComponent:function(e,t,i){r.Mixin.mountComponent.call(this,e,t,i);var o=a(this.props);return t.renderToStaticMarkup?o:"<span "+n.createMarkupForID(e)+">"+o+"</span>"},receiveComponent:function(e){var t=e.props;t!==this.props&&(this.props=t,r.BackendIDOperations.updateTextContentByID(this._rootNodeID,t))}});var c=function(e){return new i(s,null,null,null,null,e)};c.type=s,t.exports=c},{"./DOMPropertyOperations":12,"./Object.assign":27,"./ReactComponent":33,"./ReactElement":53,"./escapeTextForBrowser":110}],80:[function(e,t){(function(n){"use strict";function r(){"production"!==n.env.NODE_ENV?v(T.ReactReconcileTransaction&&b,"ReactUpdates: must inject a reconcile transaction class and batching strategy"):v(T.ReactReconcileTransaction&&b)}function i(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=u.getPooled(),this.reconcileTransaction=T.ReactReconcileTransaction.getPooled()}function o(e,t,n){r(),b.batchedUpdates(e,t,n)}function a(e,t){return e._mountDepth-t._mountDepth}function s(e){var t=e.dirtyComponentsLength;"production"!==n.env.NODE_ENV?v(t===y.length,"Expected flush transaction's stored dirty-components length (%s) to match dirty-components array length (%s).",t,y.length):v(t===y.length),y.sort(a);for(var r=0;t>r;r++){var i=y[r];if(i.isMounted()){var o=i._pendingCallbacks;if(i._pendingCallbacks=null,i.performUpdateIfNecessary(e.reconcileTransaction),o)for(var s=0;s<o.length;s++)e.callbackQueue.enqueue(o[s],i)}}}function c(e,t){return"production"!==n.env.NODE_ENV?v(!t||"function"==typeof t,"enqueueUpdate(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable."):v(!t||"function"==typeof t),r(),"production"!==n.env.NODE_ENV?g(null==p.current,"enqueueUpdate(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate."):null,b.isBatchingUpdates?(y.push(e),void(t&&(e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t]))):void b.batchedUpdates(c,e,t)}function l(e,t){"production"!==n.env.NODE_ENV?v(b.isBatchingUpdates,"ReactUpdates.asap: Can't enqueue an asap callback in a context whereupdates are not being batched."):v(b.isBatchingUpdates),x.enqueue(e,t),_=!0}var u=e("./CallbackQueue"),h=e("./PooledClass"),p=e("./ReactCurrentOwner"),d=e("./ReactPerf"),f=e("./Transaction"),m=e("./Object.assign"),v=e("./invariant"),g=e("./warning"),y=[],x=u.getPooled(),_=!1,b=null,w={initialize:function(){this.dirtyComponentsLength=y.length},close:function(){this.dirtyComponentsLength!==y.length?(y.splice(0,this.dirtyComponentsLength),C()):y.length=0}},E={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},M=[w,E];m(i.prototype,f.Mixin,{getTransactionWrappers:function(){return M},destructor:function(){this.dirtyComponentsLength=null,u.release(this.callbackQueue),this.callbackQueue=null,T.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return f.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),h.addPoolingTo(i);var C=d.measure("ReactUpdates","flushBatchedUpdates",function(){for(;y.length||_;){if(y.length){var e=i.getPooled();e.perform(s,null,e),i.release(e)}if(_){_=!1;var t=x;x=u.getPooled(),t.notifyAll(),u.release(t)}}}),S={injectReconcileTransaction:function(e){"production"!==n.env.NODE_ENV?v(e,"ReactUpdates: must provide a reconcile transaction class"):v(e),T.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){"production"!==n.env.NODE_ENV?v(e,"ReactUpdates: must provide a batching strategy"):v(e),"production"!==n.env.NODE_ENV?v("function"==typeof e.batchedUpdates,"ReactUpdates: must provide a batchedUpdates() function"):v("function"==typeof e.batchedUpdates),"production"!==n.env.NODE_ENV?v("boolean"==typeof e.isBatchingUpdates,"ReactUpdates: must provide an isBatchingUpdates boolean attribute"):v("boolean"==typeof e.isBatchingUpdates),b=e}},T={ReactReconcileTransaction:null,batchedUpdates:o,enqueueUpdate:c,flushBatchedUpdates:C,injection:S,asap:l};t.exports=T}).call(this,e("_process"))},{"./CallbackQueue":6,"./Object.assign":27,"./PooledClass":28,"./ReactCurrentOwner":37,"./ReactPerf":69,"./Transaction":96,"./invariant":127,"./warning":146,_process:1}],81:[function(e,t){"use strict";var n=e("./DOMProperty"),r=n.injection.MUST_USE_ATTRIBUTE,i={Properties:{cx:r,cy:r,d:r,dx:r,dy:r,fill:r,fillOpacity:r,fontFamily:r,fontSize:r,fx:r,fy:r,gradientTransform:r,gradientUnits:r,markerEnd:r,markerMid:r,markerStart:r,offset:r,opacity:r,patternContentUnits:r,patternUnits:r,points:r,preserveAspectRatio:r,r:r,rx:r,ry:r,spreadMethod:r,stopColor:r,stopOpacity:r,stroke:r,strokeDasharray:r,strokeLinecap:r,strokeOpacity:r,strokeWidth:r,textAnchor:r,transform:r,version:r,viewBox:r,x1:r,x2:r,x:r,y1:r,y2:r,y:r},DOMAttributeNames:{fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox"}};t.exports=i},{"./DOMProperty":11}],82:[function(e,t){"use strict";function n(e){if("selectionStart"in e&&a.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function r(e){if(!g&&null!=f&&f==c()){var t=n(f);if(!v||!h(v,t)){v=t;var r=s.getPooled(d.select,m,e);return r.type="select",r.target=f,o.accumulateTwoPhaseDispatches(r),r}}}var i=e("./EventConstants"),o=e("./EventPropagators"),a=e("./ReactInputSelection"),s=e("./SyntheticEvent"),c=e("./getActiveElement"),l=e("./isTextInputElement"),u=e("./keyOf"),h=e("./shallowEqual"),p=i.topLevelTypes,d={select:{phasedRegistrationNames:{bubbled:u({onSelect:null}),captured:u({onSelectCapture:null})},dependencies:[p.topBlur,p.topContextMenu,p.topFocus,p.topKeyDown,p.topMouseDown,p.topMouseUp,p.topSelectionChange]}},f=null,m=null,v=null,g=!1,y={eventTypes:d,extractEvents:function(e,t,n,i){switch(e){case p.topFocus:(l(t)||"true"===t.contentEditable)&&(f=t,m=n,v=null);break;case p.topBlur:f=null,m=null,v=null;break;case p.topMouseDown:g=!0;break;case p.topContextMenu:case p.topMouseUp:return g=!1,r(i);case p.topSelectionChange:case p.topKeyDown:case p.topKeyUp:return r(i)}}};t.exports=y},{"./EventConstants":16,"./EventPropagators":21,"./ReactInputSelection":60,"./SyntheticEvent":88,"./getActiveElement":114,"./isTextInputElement":130,"./keyOf":134,"./shallowEqual":142}],83:[function(e,t){"use strict";var n=Math.pow(2,53),r={createReactRootIndex:function(){return Math.ceil(Math.random()*n)}};t.exports=r},{}],84:[function(e,t){(function(n){"use strict";var r=e("./EventConstants"),i=e("./EventPluginUtils"),o=e("./EventPropagators"),a=e("./SyntheticClipboardEvent"),s=e("./SyntheticEvent"),c=e("./SyntheticFocusEvent"),l=e("./SyntheticKeyboardEvent"),u=e("./SyntheticMouseEvent"),h=e("./SyntheticDragEvent"),p=e("./SyntheticTouchEvent"),d=e("./SyntheticUIEvent"),f=e("./SyntheticWheelEvent"),m=e("./getEventCharCode"),v=e("./invariant"),g=e("./keyOf"),y=e("./warning"),x=r.topLevelTypes,_={blur:{phasedRegistrationNames:{bubbled:g({onBlur:!0}),captured:g({onBlurCapture:!0})}},click:{phasedRegistrationNames:{bubbled:g({onClick:!0}),captured:g({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:g({onContextMenu:!0}),captured:g({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:g({onCopy:!0}),captured:g({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:g({onCut:!0}),captured:g({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:g({onDoubleClick:!0}),captured:g({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:g({onDrag:!0}),captured:g({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:g({onDragEnd:!0}),captured:g({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:g({onDragEnter:!0}),captured:g({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:g({onDragExit:!0}),captured:g({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:g({onDragLeave:!0}),captured:g({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:g({onDragOver:!0}),captured:g({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:g({onDragStart:!0}),captured:g({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:g({onDrop:!0}),captured:g({onDropCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:g({onFocus:!0}),captured:g({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:g({onInput:!0}),captured:g({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:g({onKeyDown:!0}),captured:g({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:g({onKeyPress:!0}),captured:g({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:g({onKeyUp:!0}),captured:g({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:g({onLoad:!0}),captured:g({onLoadCapture:!0})}},error:{phasedRegistrationNames:{bubbled:g({onError:!0}),captured:g({onErrorCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:g({onMouseDown:!0}),captured:g({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:g({onMouseMove:!0}),captured:g({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:g({onMouseOut:!0}),captured:g({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:g({onMouseOver:!0}),captured:g({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:g({onMouseUp:!0}),captured:g({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:g({onPaste:!0}),captured:g({onPasteCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:g({onReset:!0}),captured:g({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:g({onScroll:!0}),captured:g({onScrollCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:g({onSubmit:!0}),captured:g({onSubmitCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:g({onTouchCancel:!0}),captured:g({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:g({onTouchEnd:!0}),captured:g({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:g({onTouchMove:!0}),captured:g({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:g({onTouchStart:!0}),captured:g({onTouchStartCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:g({onWheel:!0}),captured:g({onWheelCapture:!0})}}},b={topBlur:_.blur,topClick:_.click,topContextMenu:_.contextMenu,topCopy:_.copy,topCut:_.cut,topDoubleClick:_.doubleClick,topDrag:_.drag,topDragEnd:_.dragEnd,topDragEnter:_.dragEnter,topDragExit:_.dragExit,topDragLeave:_.dragLeave,topDragOver:_.dragOver,topDragStart:_.dragStart,topDrop:_.drop,topError:_.error,topFocus:_.focus,topInput:_.input,topKeyDown:_.keyDown,topKeyPress:_.keyPress,topKeyUp:_.keyUp,topLoad:_.load,topMouseDown:_.mouseDown,topMouseMove:_.mouseMove,topMouseOut:_.mouseOut,topMouseOver:_.mouseOver,topMouseUp:_.mouseUp,topPaste:_.paste,topReset:_.reset,topScroll:_.scroll,topSubmit:_.submit,topTouchCancel:_.touchCancel,topTouchEnd:_.touchEnd,topTouchMove:_.touchMove,topTouchStart:_.touchStart,topWheel:_.wheel};for(var w in b)b[w].dependencies=[w];var E={eventTypes:_,executeDispatch:function(e,t,r){var o=i.executeDispatch(e,t,r);"production"!==n.env.NODE_ENV?y("boolean"!=typeof o,"Returning `false` from an event handler is deprecated and will be ignored in a future release. Instead, manually call e.stopPropagation() or e.preventDefault(), as appropriate."):null,o===!1&&(e.stopPropagation(),e.preventDefault())},extractEvents:function(e,t,r,i){var g=b[e];if(!g)return null;var y;switch(e){case x.topInput:case x.topLoad:case x.topError:case x.topReset:case x.topSubmit:y=s;break;case x.topKeyPress:if(0===m(i))return null;case x.topKeyDown:case x.topKeyUp:y=l;break;case x.topBlur:case x.topFocus:y=c;break;case x.topClick:if(2===i.button)return null;case x.topContextMenu:case x.topDoubleClick:case x.topMouseDown:case x.topMouseMove:case x.topMouseOut:case x.topMouseOver:case x.topMouseUp:y=u;break;case x.topDrag:case x.topDragEnd:case x.topDragEnter:case x.topDragExit:case x.topDragLeave:case x.topDragOver:case x.topDragStart:case x.topDrop:y=h;break;case x.topTouchCancel:case x.topTouchEnd:case x.topTouchMove:case x.topTouchStart:y=p;break;case x.topScroll:y=d;break;case x.topWheel:y=f;break;case x.topCopy:case x.topCut:case x.topPaste:y=a}"production"!==n.env.NODE_ENV?v(y,"SimpleEventPlugin: Unhandled event type, `%s`.",e):v(y);var _=y.getPooled(g,r,i);return o.accumulateTwoPhaseDispatches(_),_}};t.exports=E}).call(this,e("_process"))},{"./EventConstants":16,"./EventPluginUtils":20,"./EventPropagators":21,"./SyntheticClipboardEvent":85,"./SyntheticDragEvent":87,"./SyntheticEvent":88,"./SyntheticFocusEvent":89,"./SyntheticKeyboardEvent":91,"./SyntheticMouseEvent":92,"./SyntheticTouchEvent":93,"./SyntheticUIEvent":94,"./SyntheticWheelEvent":95,"./getEventCharCode":115,"./invariant":127,"./keyOf":134,"./warning":146,_process:1}],85:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),i={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};r.augmentClass(n,i),t.exports=n},{"./SyntheticEvent":88}],86:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),i={data:null};r.augmentClass(n,i),t.exports=n},{"./SyntheticEvent":88}],87:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticMouseEvent"),i={dataTransfer:null};r.augmentClass(n,i),t.exports=n},{"./SyntheticMouseEvent":92}],88:[function(e,t){"use strict";function n(e,t,n){this.dispatchConfig=e,this.dispatchMarker=t,this.nativeEvent=n;var r=this.constructor.Interface;for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];this[i]=a?a(n):n[i]}var s=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;this.isDefaultPrevented=s?o.thatReturnsTrue:o.thatReturnsFalse,this.isPropagationStopped=o.thatReturnsFalse}var r=e("./PooledClass"),i=e("./Object.assign"),o=e("./emptyFunction"),a=e("./getEventTarget"),s={type:null,target:a,currentTarget:o.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};i(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=!1,this.isDefaultPrevented=o.thatReturnsTrue},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.isPropagationStopped=o.thatReturnsTrue},persist:function(){this.isPersistent=o.thatReturnsTrue},isPersistent:o.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),n.Interface=s,n.augmentClass=function(e,t){var n=this,o=Object.create(n.prototype);i(o,e.prototype),e.prototype=o,e.prototype.constructor=e,e.Interface=i({},n.Interface,t),e.augmentClass=n.augmentClass,r.addPoolingTo(e,r.threeArgumentPooler)},r.addPoolingTo(n,r.threeArgumentPooler),t.exports=n},{"./Object.assign":27,"./PooledClass":28,"./emptyFunction":108,"./getEventTarget":118}],89:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),i={relatedTarget:null};r.augmentClass(n,i),t.exports=n},{"./SyntheticUIEvent":94}],90:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),i={data:null};r.augmentClass(n,i),t.exports=n},{"./SyntheticEvent":88}],91:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),i=e("./getEventCharCode"),o=e("./getEventKey"),a=e("./getEventModifierState"),s={key:o,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:a,charCode:function(e){return"keypress"===e.type?i(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?i(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};r.augmentClass(n,s),t.exports=n},{"./SyntheticUIEvent":94,"./getEventCharCode":115,"./getEventKey":116,"./getEventModifierState":117}],92:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),i=e("./ViewportMetrics"),o=e("./getEventModifierState"),a={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:o,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+i.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+i.currentScrollTop}};r.augmentClass(n,a),t.exports=n},{"./SyntheticUIEvent":94,"./ViewportMetrics":97,"./getEventModifierState":117}],93:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),i=e("./getEventModifierState"),o={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:i};r.augmentClass(n,o),t.exports=n},{"./SyntheticUIEvent":94,"./getEventModifierState":117}],94:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),i=e("./getEventTarget"),o={view:function(e){if(e.view)return e.view;var t=i(e);if(null!=t&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};r.augmentClass(n,o),t.exports=n},{"./SyntheticEvent":88,"./getEventTarget":118}],95:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticMouseEvent"),i={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};r.augmentClass(n,i),t.exports=n},{"./SyntheticMouseEvent":92}],96:[function(e,t){(function(n){"use strict";var r=e("./invariant"),i={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,i,o,a,s,c,l){"production"!==n.env.NODE_ENV?r(!this.isInTransaction(),"Transaction.perform(...): Cannot initialize a transaction when there is already an outstanding transaction."):r(!this.isInTransaction());var u,h;try{this._isInTransaction=!0,u=!0,this.initializeAll(0),h=e.call(t,i,o,a,s,c,l),u=!1}finally{try{if(u)try{this.closeAll(0)}catch(p){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return h},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=o.OBSERVED_ERROR,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===o.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(i){}}}},closeAll:function(e){"production"!==n.env.NODE_ENV?r(this.isInTransaction(),"Transaction.closeAll(): Cannot close transaction when none are open."):r(this.isInTransaction());for(var t=this.transactionWrappers,i=e;i<t.length;i++){var a,s=t[i],c=this.wrapperInitData[i];try{a=!0,c!==o.OBSERVED_ERROR&&s.close&&s.close.call(this,c),a=!1}finally{if(a)try{this.closeAll(i+1)}catch(l){}}}this.wrapperInitData.length=0}},o={Mixin:i,OBSERVED_ERROR:{}};t.exports=o}).call(this,e("_process"))},{"./invariant":127,_process:1}],97:[function(e,t){"use strict";var n=e("./getUnboundedScrollPosition"),r={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(){var e=n(window);r.currentScrollLeft=e.x,r.currentScrollTop=e.y}};t.exports=r},{"./getUnboundedScrollPosition":123}],98:[function(e,t){(function(n){"use strict";function r(e,t){if("production"!==n.env.NODE_ENV?i(null!=t,"accumulateInto(...): Accumulated items must not be null or undefined."):i(null!=t),null==e)return t;var r=Array.isArray(e),o=Array.isArray(t);return r&&o?(e.push.apply(e,t),e):r?(e.push(t),e):o?[e].concat(t):[e,t]}var i=e("./invariant");t.exports=r}).call(this,e("_process"))},{"./invariant":127,_process:1}],99:[function(e,t){"use strict";function n(e){for(var t=1,n=0,i=0;i<e.length;i++)t=(t+e.charCodeAt(i))%r,n=(n+t)%r;return t|n<<16}var r=65521;t.exports=n},{}],100:[function(e,t){function n(e){return e.replace(r,function(e,t){return t.toUpperCase()})}var r=/-(.)/g;t.exports=n},{}],101:[function(e,t){"use strict";function n(e){return r(e.replace(i,"ms-"))}var r=e("./camelize"),i=/^-ms-/;t.exports=n},{"./camelize":100}],102:[function(e,t){function n(e,t){return e&&t?e===t?!0:r(e)?!1:r(t)?n(e,t.parentNode):e.contains?e.contains(t):e.compareDocumentPosition?!!(16&e.compareDocumentPosition(t)):!1:!1}var r=e("./isTextNode");t.exports=n},{"./isTextNode":131}],103:[function(e,t){function n(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function r(e){return n(e)?Array.isArray(e)?e.slice():i(e):[e]}var i=e("./toArray");t.exports=r},{"./toArray":144}],104:[function(e,t){(function(n){"use strict";function r(e){var t=o.createFactory(e),r=i.createClass({displayName:"ReactFullPageComponent"+e,componentWillUnmount:function(){"production"!==n.env.NODE_ENV?a(!1,"%s tried to unmount. Because of cross-browser quirks it is impossible to unmount some top-level components (eg <html>, <head>, and <body>) reliably and efficiently. To fix this, have a single top-level component that never unmounts render these elements.",this.constructor.displayName):a(!1)},render:function(){return t(this.props)}});return r}var i=e("./ReactCompositeComponent"),o=e("./ReactElement"),a=e("./invariant");t.exports=r}).call(this,e("_process"))},{"./ReactCompositeComponent":35,"./ReactElement":53,"./invariant":127,_process:1}],105:[function(e,t){(function(n){function r(e){var t=e.match(u);return t&&t[1].toLowerCase()}function i(e,t){var i=l;"production"!==n.env.NODE_ENV?c(!!l,"createNodesFromMarkup dummy not initialized"):c(!!l);var o=r(e),u=o&&s(o);if(u){i.innerHTML=u[1]+e+u[2];for(var h=u[0];h--;)i=i.lastChild}else i.innerHTML=e;var p=i.getElementsByTagName("script");p.length&&("production"!==n.env.NODE_ENV?c(t,"createNodesFromMarkup(...): Unexpected <script> element rendered."):c(t),a(p).forEach(t));for(var d=a(i.childNodes);i.lastChild;)i.removeChild(i.lastChild);return d}var o=e("./ExecutionEnvironment"),a=e("./createArrayFrom"),s=e("./getMarkupWrap"),c=e("./invariant"),l=o.canUseDOM?document.createElement("div"):null,u=/^\s*<(\w+)/;t.exports=i}).call(this,e("_process"))},{"./ExecutionEnvironment":22,"./createArrayFrom":103,"./getMarkupWrap":119,"./invariant":127,_process:1}],106:[function(e,t){"use strict";function n(e,t){var n=null==t||"boolean"==typeof t||""===t;if(n)return"";var r=isNaN(t);return r||0===t||i.hasOwnProperty(e)&&i[e]?""+t:("string"==typeof t&&(t=t.trim()),t+"px")}var r=e("./CSSProperty"),i=r.isUnitlessNumber;t.exports=n},{"./CSSProperty":4}],107:[function(e,t){(function(n){function r(e,t,r,a,s){var c=!1;if("production"!==n.env.NODE_ENV){var l=function(){return"production"!==n.env.NODE_ENV?o(c,e+"."+t+" will be deprecated in a future version. "+("Use "+e+"."+r+" instead.")):null,c=!0,s.apply(a,arguments)};return l.displayName=e+"_"+t,i(l,s)}return s}var i=e("./Object.assign"),o=e("./warning");t.exports=r}).call(this,e("_process"))},{"./Object.assign":27,"./warning":146,_process:1}],108:[function(e,t){function n(e){return function(){return e}}function r(){}r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},t.exports=r},{}],109:[function(e,t){(function(e){"use strict";var n={};"production"!==e.env.NODE_ENV&&Object.freeze(n),t.exports=n}).call(this,e("_process"))},{_process:1}],110:[function(e,t){"use strict";function n(e){return i[e]}function r(e){return(""+e).replace(o,n)}var i={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},o=/[&><"']/g;t.exports=r},{}],111:[function(e,t){(function(n){"use strict";function r(e,t,r){var i=e,a=!i.hasOwnProperty(r);if("production"!==n.env.NODE_ENV?s(a,"flattenChildren(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",r):null,a&&null!=t){var c,l=typeof t;c="string"===l?o(t):"number"===l?o(""+t):t,i[r]=c}}function i(e){if(null==e)return e;var t={};return a(e,r,t),t}var o=e("./ReactTextComponent"),a=e("./traverseAllChildren"),s=e("./warning");t.exports=i}).call(this,e("_process"))},{"./ReactTextComponent":79,"./traverseAllChildren":145,"./warning":146,_process:1}],112:[function(e,t){"use strict";function n(e){try{e.focus()}catch(t){}}t.exports=n},{}],113:[function(e,t){"use strict";var n=function(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)};t.exports=n},{}],114:[function(e,t){function n(){try{return document.activeElement||document.body}catch(e){return document.body}}t.exports=n},{}],115:[function(e,t){"use strict";function n(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,0===t&&13===n&&(t=13)):t=n,t>=32||13===t?t:0}t.exports=n},{}],116:[function(e,t){"use strict";function n(e){if(e.key){var t=i[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=r(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?o[e.keyCode]||"Unidentified":""}var r=e("./getEventCharCode"),i={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};
t.exports=n},{"./getEventCharCode":115}],117:[function(e,t){"use strict";function n(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var r=i[e];return r?!!n[r]:!1}function r(){return n}var i={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=r},{}],118:[function(e,t){"use strict";function n(e){var t=e.target||e.srcElement||window;return 3===t.nodeType?t.parentNode:t}t.exports=n},{}],119:[function(e,t){(function(n){function r(e){return"production"!==n.env.NODE_ENV?o(!!a,"Markup wrapping node not initialized"):o(!!a),p.hasOwnProperty(e)||(e="*"),s.hasOwnProperty(e)||(a.innerHTML="*"===e?"<link />":"<"+e+"></"+e+">",s[e]=!a.firstChild),s[e]?p[e]:null}var i=e("./ExecutionEnvironment"),o=e("./invariant"),a=i.canUseDOM?document.createElement("div"):null,s={circle:!0,defs:!0,ellipse:!0,g:!0,line:!0,linearGradient:!0,path:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,text:!0},c=[1,'<select multiple="true">',"</select>"],l=[1,"<table>","</table>"],u=[3,"<table><tbody><tr>","</tr></tbody></table>"],h=[1,"<svg>","</svg>"],p={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:c,option:c,caption:l,colgroup:l,tbody:l,tfoot:l,thead:l,td:u,th:u,circle:h,defs:h,ellipse:h,g:h,line:h,linearGradient:h,path:h,polygon:h,polyline:h,radialGradient:h,rect:h,stop:h,text:h};t.exports=r}).call(this,e("_process"))},{"./ExecutionEnvironment":22,"./invariant":127,_process:1}],120:[function(e,t){"use strict";function n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function r(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function i(e,t){for(var i=n(e),o=0,a=0;i;){if(3==i.nodeType){if(a=o+i.textContent.length,t>=o&&a>=t)return{node:i,offset:t-o};o=a}i=n(r(i))}}t.exports=i},{}],121:[function(e,t){"use strict";function n(e){return e?e.nodeType===r?e.documentElement:e.firstChild:null}var r=9;t.exports=n},{}],122:[function(e,t){"use strict";function n(){return!i&&r.canUseDOM&&(i="textContent"in document.documentElement?"textContent":"innerText"),i}var r=e("./ExecutionEnvironment"),i=null;t.exports=n},{"./ExecutionEnvironment":22}],123:[function(e,t){"use strict";function n(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}t.exports=n},{}],124:[function(e,t){function n(e){return e.replace(r,"-$1").toLowerCase()}var r=/([A-Z])/g;t.exports=n},{}],125:[function(e,t){"use strict";function n(e){return r(e).replace(i,"-ms-")}var r=e("./hyphenate"),i=/^ms-/;t.exports=n},{"./hyphenate":124}],126:[function(e,t){(function(n){"use strict";function r(e,t){var r;if("production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?i(e&&("function"==typeof e.type||"string"==typeof e.type),"Only functions or strings can be mounted as React components."):null,e.type._mockedReactClassConstructor)){a._isLegacyCallWarningEnabled=!1;try{r=new e.type._mockedReactClassConstructor(e.props)}finally{a._isLegacyCallWarningEnabled=!0}o.isValidElement(r)&&(r=new r.type(r.props));var l=r.render;if(l)return l._isMockFunction&&!l._getMockImplementation()&&l.mockImplementation(c.getEmptyComponent),r.construct(e),r;e=c.getEmptyComponent()}return r="string"==typeof e.type?s.createInstanceForTag(e.type,e.props,t):new e.type(e.props),"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?i("function"==typeof r.construct&&"function"==typeof r.mountComponent&&"function"==typeof r.receiveComponent,"Only React Components can be mounted."):null),r.construct(e),r}var i=e("./warning"),o=e("./ReactElement"),a=e("./ReactLegacyElement"),s=e("./ReactNativeComponent"),c=e("./ReactEmptyComponent");t.exports=r}).call(this,e("_process"))},{"./ReactElement":53,"./ReactEmptyComponent":55,"./ReactLegacyElement":62,"./ReactNativeComponent":67,"./warning":146,_process:1}],127:[function(e,t){(function(e){"use strict";var n=function(t,n,r,i,o,a,s,c){if("production"!==e.env.NODE_ENV&&void 0===n)throw new Error("invariant requires an error message argument");if(!t){var l;if(void 0===n)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,i,o,a,s,c],h=0;l=new Error("Invariant Violation: "+n.replace(/%s/g,function(){return u[h++]}))}throw l.framesToPop=1,l}};t.exports=n}).call(this,e("_process"))},{_process:1}],128:[function(e,t){"use strict";/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */
function n(e,t){if(!i.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,o=n in document;if(!o){var a=document.createElement("div");a.setAttribute(n,"return;"),o="function"==typeof a[n]}return!o&&r&&"wheel"===e&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o}var r,i=e("./ExecutionEnvironment");i.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=n},{"./ExecutionEnvironment":22}],129:[function(e,t){function n(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}t.exports=n},{}],130:[function(e,t){"use strict";function n(e){return e&&("INPUT"===e.nodeName&&r[e.type]||"TEXTAREA"===e.nodeName)}var r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=n},{}],131:[function(e,t){function n(e){return r(e)&&3==e.nodeType}var r=e("./isNode");t.exports=n},{"./isNode":129}],132:[function(e,t){"use strict";function n(e){e||(e="");var t,n=arguments.length;if(n>1)for(var r=1;n>r;r++)t=arguments[r],t&&(e=(e?e+" ":"")+t);return e}t.exports=n},{}],133:[function(e,t){(function(n){"use strict";var r=e("./invariant"),i=function(e){var t,i={};"production"!==n.env.NODE_ENV?r(e instanceof Object&&!Array.isArray(e),"keyMirror(...): Argument must be an object."):r(e instanceof Object&&!Array.isArray(e));for(t in e)e.hasOwnProperty(t)&&(i[t]=t);return i};t.exports=i}).call(this,e("_process"))},{"./invariant":127,_process:1}],134:[function(e,t){var n=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};t.exports=n},{}],135:[function(e,t){"use strict";function n(e,t,n){if(!e)return null;var i={};for(var o in e)r.call(e,o)&&(i[o]=t.call(n,e[o],o,e));return i}var r=Object.prototype.hasOwnProperty;t.exports=n},{}],136:[function(e,t){"use strict";function n(e){var t={};return function(n){return t.hasOwnProperty(n)?t[n]:t[n]=e.call(this,n)}}t.exports=n},{}],137:[function(e,t){(function(n){"use strict";function r(e){"production"!==n.env.NODE_ENV?i(e&&!/[^a-z0-9_]/.test(e),"You must provide an eventName using only the characters [a-z0-9_]"):i(e&&!/[^a-z0-9_]/.test(e))}var i=e("./invariant");t.exports=r}).call(this,e("_process"))},{"./invariant":127,_process:1}],138:[function(e,t){(function(n){"use strict";function r(e){return"production"!==n.env.NODE_ENV?o(i.isValidElement(e),"onlyChild must be passed a children with exactly one child."):o(i.isValidElement(e)),e}var i=e("./ReactElement"),o=e("./invariant");t.exports=r}).call(this,e("_process"))},{"./ReactElement":53,"./invariant":127,_process:1}],139:[function(e,t){"use strict";var n,r=e("./ExecutionEnvironment");r.canUseDOM&&(n=window.performance||window.msPerformance||window.webkitPerformance),t.exports=n||{}},{"./ExecutionEnvironment":22}],140:[function(e,t){var n=e("./performance");n&&n.now||(n=Date);var r=n.now.bind(n);t.exports=r},{"./performance":139}],141:[function(e,t){"use strict";var n=e("./ExecutionEnvironment"),r=/^[ \r\n\t\f]/,i=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,o=function(e,t){e.innerHTML=t};if(n.canUseDOM){var a=document.createElement("div");a.innerHTML=" ",""===a.innerHTML&&(o=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),r.test(t)||"<"===t[0]&&i.test(t)){e.innerHTML="﻿"+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t})}t.exports=o},{"./ExecutionEnvironment":22}],142:[function(e,t){"use strict";function n(e,t){if(e===t)return!0;var n;for(n in e)if(e.hasOwnProperty(n)&&(!t.hasOwnProperty(n)||e[n]!==t[n]))return!1;for(n in t)if(t.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!0}t.exports=n},{}],143:[function(e,t){"use strict";function n(e,t){return e&&t&&e.type===t.type&&e.key===t.key&&e._owner===t._owner?!0:!1}t.exports=n},{}],144:[function(e,t){(function(n){function r(e){var t=e.length;if("production"!==n.env.NODE_ENV?i(!Array.isArray(e)&&("object"==typeof e||"function"==typeof e),"toArray: Array-like object expected"):i(!Array.isArray(e)&&("object"==typeof e||"function"==typeof e)),"production"!==n.env.NODE_ENV?i("number"==typeof t,"toArray: Object needs a length property"):i("number"==typeof t),"production"!==n.env.NODE_ENV?i(0===t||t-1 in e,"toArray: Object should have keys for indices"):i(0===t||t-1 in e),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(r){}for(var o=Array(t),a=0;t>a;a++)o[a]=e[a];return o}var i=e("./invariant");t.exports=r}).call(this,e("_process"))},{"./invariant":127,_process:1}],145:[function(e,t){(function(n){"use strict";function r(e){return d[e]}function i(e,t){return e&&null!=e.key?a(e.key):t.toString(36)}function o(e){return(""+e).replace(f,r)}function a(e){return"$"+o(e)}function s(e,t,n){return null==e?0:m(e,"",0,t,n)}var c=e("./ReactElement"),l=e("./ReactInstanceHandles"),u=e("./invariant"),h=l.SEPARATOR,p=":",d={"=":"=0",".":"=1",":":"=2"},f=/[=.:]/g,m=function(e,t,r,o,s){var l,d,f=0;if(Array.isArray(e))for(var v=0;v<e.length;v++){var g=e[v];l=t+(t?p:h)+i(g,v),d=r+f,f+=m(g,l,d,o,s)}else{var y=typeof e,x=""===t,_=x?h+i(e,0):t;if(null==e||"boolean"===y)o(s,null,_,r),f=1;else if("string"===y||"number"===y||c.isValidElement(e))o(s,e,_,r),f=1;else if("object"===y){"production"!==n.env.NODE_ENV?u(!e||1!==e.nodeType,"traverseAllChildren(...): Encountered an invalid child; DOM elements are not valid children of React components."):u(!e||1!==e.nodeType);for(var b in e)e.hasOwnProperty(b)&&(l=t+(t?p:h)+a(b)+p+i(e[b],0),d=r+f,f+=m(e[b],l,d,o,s))}}return f};t.exports=s}).call(this,e("_process"))},{"./ReactElement":53,"./ReactInstanceHandles":61,"./invariant":127,_process:1}],146:[function(e,t){(function(n){"use strict";var r=e("./emptyFunction"),i=r;"production"!==n.env.NODE_ENV&&(i=function(e,t){for(var n=[],r=2,i=arguments.length;i>r;r++)n.push(arguments[r]);if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(!e){var o=0;console.warn("Warning: "+t.replace(/%s/g,function(){return n[o++]}))}}),t.exports=i}).call(this,e("_process"))},{"./emptyFunction":108,_process:1}],147:[function(e,t){var n={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var e=document.createElement("div");return e.id="webgl-error-message",e.style.fontFamily="monospace",e.style.fontSize="13px",e.style.fontWeight="normal",e.style.textAlign="center",e.style.background="#fff",e.style.color="#000",e.style.padding="1.5em",e.style.width="400px",e.style.margin="5em auto 0",this.webgl||(e.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),e},addGetWebGLMessage:function(e){var t,r,i;e=e||{},t=void 0!==e.parent?e.parent:document.body,r=void 0!==e.id?e.id:"oldie",i=n.getWebGLErrorMessage(),i.id=r,t.appendChild(i)}};"object"==typeof t&&(t.exports=n)},{}],"react-three":[function(e,t){"use strict";function n(e){var t=function(){this.node=null,this._mountImage=null,this._renderedChildren=null,this.displayObject=null};t.displayName=e;for(var n=1;n<arguments.length;n++)y(t.prototype,arguments[n]);return p.wrapFactory(h.createFactory(t))}var r=e("react"),i=e("three"),o=e("react/lib/ReactMount"),a=e("react/lib/ReactComponent"),s=a.Mixin,c=e("react/lib/ReactUpdates"),l=e("react/lib/ReactMultiChild"),u=e("react/lib/ReactBrowserComponentMixin"),h=e("react/lib/ReactElement"),p=e("react/lib/ReactLegacyElement"),d=e("react/lib/ReactDOMComponent"),f=1,m=e("react/lib/ReactBrowserEventEmitter"),v=m.putListener,g=m.listenTo,y=e("react/lib/Object.assign"),x=e("react/lib/warning"),_=e("../vendor/Detector.js"),b=y({},l.Mixin,{applyTHREEObject3DProps:function(e,t){this.applyTHREEObject3DPropsToObject(this._THREEObject3D,e,t)},applyTHREEObject3DPropsToObject:function(e,t,n){"undefined"!=typeof n.position?e.position.copy(n.position):e.position.set(0,0,0),"undefined"!=typeof n.quaternion?e.quaternion.copy(n.quaternion):e.quaternion.set(0,0,0,1),e.visible="undefined"!=typeof n.visible?n.visible:!0,"number"==typeof n.scale?e.scale.set(n.scale,n.scale,n.scale):n.scale instanceof i.Vector3?e.scale.copy(n.scale):e.scale.set(1,1,1),"undefined"!=typeof n.lookat&&this._THREEObject3D.lookAt(n.lookat),"undefined"!=typeof n.name&&(e.name=n.name)},transferTHREEObject3DPropsByName:function(e,t,n){var r=this._THREEObject3D;n.forEach(function(e){"undefined"!=typeof t[e]&&(r[e]=t[e])})},mountComponentIntoNode:function(){throw new Error("You cannot render a three.js component standalone. You need to wrap it in a THREEScene component.")},createTHREEObject:function(){return new i.Object3D},applySpecificTHREEProps:function(){},mountComponent:function(e,t){return s.mountComponent.apply(this,arguments),this._THREEObject3D=this.createTHREEObject(arguments),this._THREEObject3D.userData=this,this.applyTHREEObject3DProps({},this.props),this.applySpecificTHREEProps({},this.props),this.mountAndAddChildren(this.props.children,t),this._THREEObject3D},receiveComponent:function(e,t){var n=e.props;this.applyTHREEObject3DProps(this.props,n),this.applySpecificTHREEProps(this.props,n),this.updateChildren(n.children,t),this.props=n},unmountComponent:function(){this.unmountChildren()},moveChild:function(e,t){var n=e._mountImage,r=this._THREEObject3D,i=r.children.indexOf(n);if(-1===i)throw new Error("The object to move needs to already be a child");r.children.splice(i,1),r.children.splice(t,0,n)},createChild:function(e,t){e._mountImage=t,this._THREEObject3D.add(t)},removeChild:function(e){var t=e._mountImage;this._THREEObject3D.remove(t),e._mountImage=null},updateChildren:function(e,t){this._updateChildren(e,t)},mountAndAddChildren:function(e,t){var n=this.mountChildren(e,t),r=0;for(var i in this._renderedChildren)if(this._renderedChildren.hasOwnProperty(i)){var o=this._renderedChildren[i];o._mountImage=n[r],this._THREEObject3D.add(o._mountImage),r++}}}),w=y({},b,{mountComponentIntoNode:a.Mixin.mountComponentIntoNode}),E=function(){return!1},M=n("THREEScene",u,d.Mixin,s,w,{_tag:"canvas",_tagClose:"</canvas>",mountComponent:function(e,t){return s.mountComponent.apply(this,arguments),t.getReactMountReady().enqueue(this.componentDidMount,this),this._createOpenTagMarkupAndPutListeners(t)+this._tagClose},setApprovedDOMProperties:function(e){var t=this.props,n={accesskey:t.accesskey,className:t.className,draggable:t.draggable,role:t.role,style:t.style,tabindex:t.tabindex,title:t.title},r={accesskey:e.accesskey,className:e.className,draggable:e.draggable,role:e.role,style:e.style,tabindex:e.tabindex,title:e.title};this.props=r,this._updateDOMProperties(n),this.props=t},componentDidMount:function(){function e(t){s._timestamp=t,s._rAFID=window.requestAnimationFrame(e),s.renderScene()}var t=this._currentElement.props,n=this.getDOMNode();this._THREEObject3D=new i.Scene,this._THREErenderer=_.webgl?new i.WebGLRenderer({canvas:n,antialias:void 0===t.antialias?!0:t.antialias}):new i.CanvasRenderer({canvas:n}),this._THREErenderer.setSize(+t.width,+t.height),this._THREEprojector=new i.Projector,this._THREEraycaster=new i.Raycaster,this.setApprovedDOMProperties(t),this.applyTHREEObject3DProps({},this.props);var r=c.ReactReconcileTransaction.getPooled();r.perform(this.mountAndAddChildren,this,t.children,r),c.ReactReconcileTransaction.release(r);var a=t.camera;"string"==typeof a?a=this._THREEObject3D.getObjectByName(a,!0):null===a||"undefined"==typeof a?(x(!1,"No camera prop specified for react-three scene, using 'maincamera'"),a=this._THREEObject3D.getObjectByName("maincamera",!0),"undefined"==typeof a&&(x(!1,"No camera named 'maincamera' found, creating a default camera"),a=new i.PerspectiveCamera(75,t.width/t.height,1,5e3),a.aspect=t.width/t.height,a.updateProjectionMatrix(),a.position.z=600)):"object"==typeof a&&(x(!1,"As of 0.2.0 the 'camera' prop in a react-three scene should be a string specifying the name of a camera component."),a instanceof i.Camera||(a=new i.PerspectiveCamera(75,t.width/t.height,1,5e3),a.aspect=t.width/t.height,a.updateProjectionMatrix(),a.position.z=600,this.applyTHREEObject3DPropsToObject(a,{},t.camera))),"undefined"!=typeof t.background&&this._THREErenderer.setClearColor(t.background),this._THREEcamera=a,this.renderScene();var s=this;s._rAFID=window.requestAnimationFrame(e);var l=o.findReactContainerForID(this._rootNodeID);if(l){var u=l.nodeType===f?l.ownerDocument:l;g("onClick",u)}v(this._rootNodeID,"onClick",function(e){s.projectClick(e)}),n.onselectstart=E,this.props=t},receiveComponent:function(e,t){if(e!==this._descriptor||null===e._owner){a.Mixin.receiveComponent.call(this,e,t);var n=e.props;(this.props.width!=n.width||this.props.width!=n.height)&&this._THREErenderer.setSize(+n.width,+n.height),"undefined"!==n.background&&this._THREErenderer.setClearColor(n.background),this.setApprovedDOMProperties(n),this.applyTHREEObject3DProps(this.props,n),this.updateChildren(n.children,t),"string"==typeof n.camera?this._THREEcamera=this._THREEObject3D.getObjectByName(n.camera):this.applyTHREEObject3DPropsToObject(this._THREEcamera,this.props.camera||{},n.camera||{}),this.props=n,this.renderScene()}},unmountComponent:function(){this.unmountChildren(),m.deleteAllListeners(this._rootNodeID),a.Mixin.unmountComponent.call(this),"undefined"!=typeof this._rAFID&&window.cancelAnimationFrame(this._rAFID)},renderScene:function(){this._THREErenderer.render(this._THREEObject3D,this._THREEcamera)},projectClick:function(e){e.preventDefault();var t=this.getDOMNode().getBoundingClientRect(),n=(e.clientX-t.left)/this.props.width*2-1,r=2*-((e.clientY-t.top)/this.props.height)+1,o=new i.Vector3(n,r,.5),a=this._THREEprojector,s=this._THREEraycaster,c=this._THREEcamera;a.unprojectVector(o,c),s.ray.set(c.position,o.sub(c.position).normalize());var l=s.intersectObjects(this._THREEObject3D.children,!0),u=l.length>0?l[0]:null;if(null!==u){var h=u.object;"undefined"!=typeof h.userData&&"function"==typeof h.userData.props.onPick&&h.userData.props.onPick(e,u)}}}),C=n("Object3D",s,b),S=n("Mesh",s,b,{createTHREEObject:function(){return new i.Mesh(new i.Geometry,new i.Material)},applySpecificTHREEProps:function(e,t){var n=this._THREEObject3D;"undefined"!=typeof t.geometry&&t.geometry!==e.geometry&&(n.geometry=t.geometry),"undefined"!=typeof t.material&&t.material!==e.material&&(n.material=t.material)}}),T={applySpecificTHREEProps:function(e,t){var n=this._THREEObject3D;"undefined"!=typeof t.color&&t.color!==e.color&&(n.color=t.color)}},R=n("AmbientLight",s,b,{createTHREEObject:function(){return new i.AmbientLight(0)},applySpecificTHREEProps:function(e,t){T.applySpecificTHREEProps.call(this,e,t)}}),D=n("PointLight",s,b,{createTHREEObject:function(){return new i.PointLight(16777215,1,100)},applySpecificTHREEProps:function(e,t){T.applySpecificTHREEProps.call(this,e,t),this.transferTHREEObject3DPropsByName(e,t,["intensity","distance"])}}),A=n("AreaLight",s,b,{createTHREEObject:function(){return new i.AreaLight(16777215,1)},applySpecificTHREEProps:function(e,t){T.applySpecificTHREEProps.call(this,e,t),this.transferTHREEObject3DPropsByName(e,t,["right","normal","height","width","intensity","constantAttenuation","linearAttenuation","quadraticAttenuation"])}}),N=["shadowCameraNear","shadowCameraFar","shadowCameraVisible","shadowBias","shadowDarkness","shadowMapWidth","shadowMapHeight","shadowMap","shadowMapSize","shadowCamera","shadowMatrix"],P=n("DirectionalLight",s,b,{createTHREEObject:function(){return new i.DirectionalLight(16777215,1)},applySpecificTHREEProps:function(e,t){T.applySpecificTHREEProps.call(this,e,t),this.transferTHREEObject3DPropsByName(e,t,N),this.transferTHREEObject3DPropsByName(e,t,["target","intensity","onlyShadow","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCascade","shadowCascadeOffset","shadowCascadeCount","shadowCascadeBias","shadowCascadeWidth","shadowCascadeHeight","shadowCascadeNearZ","shadowCascadeFarZ","shadowCascadeArray"])}}),O=n("HemisphereLight",s,b,{createTHREEObject:function(){return new i.HemisphereLight(8947967,0,1)},applySpecificTHREEProps:function(e,t){T.applySpecificTHREEProps.call(this,e,t),"undefined"!=typeof t.skyColor&&(this._THREEObject3D.color=t.skyColor),this.transferTHREEObject3DPropsByName(e,t,["groundColor","intensity"])}}),L=n("SpotLight",s,b,{createTHREEObject:function(){return new i.SpotLight(16777215,1)},applySpecificTHREEProps:function(e,t){T.applySpecificTHREEProps.call(this,e,t),this.transferTHREEObject3DPropsByName(e,t,N),this.transferTHREEObject3DPropsByName(e,t,["target","intensity","distance","angle","exponent","castShadow","onlyShadow","shadowCameraFov"])}}),U=n("Line",s,b,{createTHREEObject:function(){return new i.Line(new i.Geometry)},applySpecificTHREEProps:function(e,t){this.transferTHREEObject3DPropsByName(e,t,["geometry","material","type"])}}),V=n("PointCloud",s,b,{createTHREEObject:function(){return new i.PointCloud(new i.Geometry)},applySpecificTHREEProps:function(e,t){this.transferTHREEObject3DPropsByName(e,t,["geometry","material","frustumCulled","sortParticles"])}}),k=n("SkinnedMesh",s,b,{mountComponent:function(e,t){return s.mountComponent.apply(this,arguments),this._THREEObject3D=new i.SkinnedMesh(this.props.geometry,this.props.material),this.applyTHREEObject3DProps({},this.props),this.applySpecificTHREEProps({},this.props),this.mountAndAddChildren(this.props.children,t),this._THREEObject3D},applySpecificTHREEProps:function(){}}),F=n("Sprite",s,b,{createTHREEObject:function(){return new i.Sprite},applySpecificTHREEProps:function(e,t){this.transferTHREEObject3DPropsByName(e,t,["material"])}}),I=n("PerspectiveCamera",s,b,{createTHREEObject:function(){return new i.PerspectiveCamera},applySpecificTHREEProps:function(e,t){this.transferTHREEObject3DPropsByName(e,t,["fov","aspect","near","far"]),this._THREEObject3D.updateProjectionMatrix()}}),B=n("OrthographicCamera",s,b,{createTHREEObject:function(){return new i.OrthographicCamera},applySpecificTHREEProps:function(e,t){this.transferTHREEObject3DPropsByName(e,t,["left","right","up","bottom","near","far"]),this._THREEObject3D.updateProjectionMatrix()}});t.exports={Scene:M,PerspectiveCamera:I,OrthographicCamera:B,Object3D:C,Line:U,PointCloud:V,Mesh:S,SkinnedMesh:k,Sprite:F,AmbientLight:R,PointLight:D,AreaLight:A,DirectionalLight:P,HemisphereLight:O,SpotLight:L,createClass:r.createClass}},{"../vendor/Detector.js":147,react:"react","react/lib/Object.assign":27,"react/lib/ReactBrowserComponentMixin":30,"react/lib/ReactBrowserEventEmitter":31,"react/lib/ReactComponent":33,"react/lib/ReactDOMComponent":40,"react/lib/ReactElement":53,"react/lib/ReactLegacyElement":62,"react/lib/ReactMount":64,"react/lib/ReactMultiChild":65,"react/lib/ReactUpdates":80,"react/lib/warning":146,three:"three"}],react:[function(e,t){t.exports=e("./lib/React")},{"./lib/React":29}],three:[function(e,t,n){var r=r||{},i={REVISION:"68"};"object"==typeof t&&(t.exports=i),i.CullFaceNone=0,i.CullFaceBack=1,i.CullFaceFront=2,i.CullFaceFrontBack=3,i.FrontFaceDirectionCW=0,i.FrontFaceDirectionCCW=1,i.BasicShadowMap=0,i.PCFShadowMap=1,i.PCFSoftShadowMap=2,i.FrontSide=0,i.BackSide=1,i.DoubleSide=2,i.NoShading=0,i.FlatShading=1,i.SmoothShading=2,i.NoColors=0,i.FaceColors=1,i.VertexColors=2,i.NoBlending=0,i.NormalBlending=1,i.AdditiveBlending=2,i.SubtractiveBlending=3,i.MultiplyBlending=4,i.CustomBlending=5,i.AddEquation=100,i.SubtractEquation=101,i.ReverseSubtractEquation=102,i.ZeroFactor=200,i.OneFactor=201,i.SrcColorFactor=202,i.OneMinusSrcColorFactor=203,i.SrcAlphaFactor=204,i.OneMinusSrcAlphaFactor=205,i.DstAlphaFactor=206,i.OneMinusDstAlphaFactor=207,i.DstColorFactor=208,i.OneMinusDstColorFactor=209,i.SrcAlphaSaturateFactor=210,i.MultiplyOperation=0,i.MixOperation=1,i.AddOperation=2,i.UVMapping=function(){},i.CubeReflectionMapping=function(){},i.CubeRefractionMapping=function(){},i.SphericalReflectionMapping=function(){},i.SphericalRefractionMapping=function(){},i.RepeatWrapping=1e3,i.ClampToEdgeWrapping=1001,i.MirroredRepeatWrapping=1002,i.NearestFilter=1003,i.NearestMipMapNearestFilter=1004,i.NearestMipMapLinearFilter=1005,i.LinearFilter=1006,i.LinearMipMapNearestFilter=1007,i.LinearMipMapLinearFilter=1008,i.UnsignedByteType=1009,i.ByteType=1010,i.ShortType=1011,i.UnsignedShortType=1012,i.IntType=1013,i.UnsignedIntType=1014,i.FloatType=1015,i.UnsignedShort4444Type=1016,i.UnsignedShort5551Type=1017,i.UnsignedShort565Type=1018,i.AlphaFormat=1019,i.RGBFormat=1020,i.RGBAFormat=1021,i.LuminanceFormat=1022,i.LuminanceAlphaFormat=1023,i.RGB_S3TC_DXT1_Format=2001,i.RGBA_S3TC_DXT1_Format=2002,i.RGBA_S3TC_DXT3_Format=2003,i.RGBA_S3TC_DXT5_Format=2004,i.Color=function(e){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(e)},i.Color.prototype={constructor:i.Color,r:1,g:1,b:1,set:function(e){return e instanceof i.Color?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){if(0===t)this.r=this.g=this.b=n;else{var r=function(e,t,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?e+6*(t-e)*n:.5>n?t:2/3>n?e+6*(t-e)*(2/3-n):e},i=.5>=n?n*(1+t):n+t-n*t,o=2*n-i;this.r=r(o,i,e+1/3),this.g=r(o,i,e),this.b=r(o,i,e-1/3)}return this},setStyle:function(e){if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(e)){var t=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(e);return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,this}if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(e)){var t=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(e);return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,this}if(/^\#([0-9a-f]{6})$/i.test(e)){var t=/^\#([0-9a-f]{6})$/i.exec(e);return this.setHex(parseInt(t[1],16)),this}if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(e)){var t=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e);return this.setHex(parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3],16)),this}return/^(\w+)$/i.test(e)?(this.setHex(i.ColorKeywords[e]),this):void 0},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e){return this.r=e.r*e.r,this.g=e.g*e.g,this.b=e.b*e.b,this},copyLinearToGamma:function(e){return this.r=Math.sqrt(e.r),this.g=Math.sqrt(e.g),this.b=Math.sqrt(e.b),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,n,r=e||{h:0,s:0,l:0},i=this.r,o=this.g,a=this.b,s=Math.max(i,o,a),c=Math.min(i,o,a),l=(c+s)/2;if(c===s)t=0,n=0;else{var u=s-c;switch(n=.5>=l?u/(s+c):u/(2-s-c),s){case i:t=(o-a)/u+(a>o?6:0);break;case o:t=(a-i)/u+2;break;case a:t=(i-o)/u+4}t/=6}return r.h=t,r.s=n,r.l=l,r},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){var r=this.getHSL();return r.h+=e,r.s+=t,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e){return this.r=e[0],this.g=e[1],this.b=e[2],this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return(new i.Color).setRGB(this.r,this.g,this.b)}},i.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},i.Quaternion=function(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1},i.Quaternion.prototype={constructor:i.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(e instanceof i.Euler==!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=Math.cos(e._x/2),r=Math.cos(e._y/2),o=Math.cos(e._z/2),a=Math.sin(e._x/2),s=Math.sin(e._y/2),c=Math.sin(e._z/2);return"XYZ"===e.order?(this._x=a*r*o+n*s*c,this._y=n*s*o-a*r*c,this._z=n*r*c+a*s*o,this._w=n*r*o-a*s*c):"YXZ"===e.order?(this._x=a*r*o+n*s*c,this._y=n*s*o-a*r*c,this._z=n*r*c-a*s*o,this._w=n*r*o+a*s*c):"ZXY"===e.order?(this._x=a*r*o-n*s*c,this._y=n*s*o+a*r*c,this._z=n*r*c+a*s*o,this._w=n*r*o-a*s*c):"ZYX"===e.order?(this._x=a*r*o-n*s*c,this._y=n*s*o+a*r*c,this._z=n*r*c-a*s*o,this._w=n*r*o+a*s*c):"YZX"===e.order?(this._x=a*r*o+n*s*c,this._y=n*s*o+a*r*c,this._z=n*r*c-a*s*o,this._w=n*r*o-a*s*c):"XZY"===e.order&&(this._x=a*r*o-n*s*c,this._y=n*s*o-a*r*c,this._z=n*r*c+a*s*o,this._w=n*r*o+a*s*c),t!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],c=n[9],l=n[2],u=n[6],h=n[10],p=r+s+h;return p>0?(t=.5/Math.sqrt(p+1),this._w=.25/t,this._x=(u-c)*t,this._y=(o-l)*t,this._z=(a-i)*t):r>s&&r>h?(t=2*Math.sqrt(1+r-s-h),this._w=(u-c)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+l)/t):s>h?(t=2*Math.sqrt(1+s-r-h),this._w=(o-l)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(c+u)/t):(t=2*Math.sqrt(1+h-r-s),this._w=(a-i)/t,this._x=(o+l)/t,this._y=(c+u)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t,n=1e-6;return function(r,o){return void 0===e&&(e=new i.Vector3),t=r.dot(o)+1,n>t?(t=0,Math.abs(r.x)>Math.abs(r.z)?e.set(-r.y,r.x,0):e.set(0,-r.z,r.y)):e.crossVectors(r,o),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,c=t._z,l=t._w;return this._x=n*l+o*a+r*c-i*s,this._y=r*l+o*s+i*a-n*c,this._z=i*l+o*c+n*s-r*a,this._w=o*l-n*a-r*s-i*c,this.onChangeCallback(),this},multiplyVector3:function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},slerp:function(e,t){var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(0>a?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=Math.acos(a),c=Math.sqrt(1-a*a);if(Math.abs(c)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this;var l=Math.sin((1-t)*s)/c,u=Math.sin(t*s)/c;return this._w=o*l+this._w*u,this._x=n*l+this._x*u,this._y=r*l+this._y*u,this._z=i*l+this._z*u,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],this._w=e[3],this.onChangeCallback(),this
},toArray:function(){return[this._x,this._y,this._z,this._w]},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){},clone:function(){return new i.Quaternion(this._x,this._y,this._z,this._w)}},i.Quaternion.slerp=function(e,t,n,r){return n.copy(e).slerp(t,r)},i.Vector2=function(e,t){this.x=e||0,this.y=t||0},i.Vector2.prototype={constructor:i.Vector2,set:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScalar:function(e){return this.x+=e,this.y+=e,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t}else this.x=0,this.y=0;return this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new i.Vector2,t=new i.Vector2),e.set(n,n),t.set(r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e){return this.x=e[0],this.y=e[1],this},toArray:function(){return[this.x,this.y]},clone:function(){return new i.Vector2(this.x,this.y)}},i.Vector3=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0},i.Vector3.prototype={constructor:i.Vector3,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e;return function(t){return t instanceof i.Euler==!1&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),void 0===e&&(e=new i.Quaternion),this.applyQuaternion(e.setFromEuler(t)),this}}(),applyAxisAngle:function(){var e;return function(t,n){return void 0===e&&(e=new i.Quaternion),this.applyQuaternion(e.setFromAxisAngle(t,n)),this}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r+i[12],this.y=i[1]*t+i[5]*n+i[9]*r+i[13],this.z=i[2]*t+i[6]*n+i[10]*r+i[14],this},applyProjection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,c=s*t+o*r-a*n,l=s*n+a*t-i*r,u=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=c*s+h*-i+l*-a-u*-o,this.y=l*s+h*-o+u*-i-c*-a,this.z=u*s+h*-a+c*-o-l*-i,this},transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize(),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t,this.z*=t}else this.x=0,this.y=0,this.z=0;return this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new i.Vector3,t=new i.Vector3),e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var n=this.x,r=this.y,i=this.z;return this.x=r*e.z-i*e.y,this.y=i*e.x-n*e.z,this.z=n*e.y-r*e.x,this},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(){var e,t;return function(n){return void 0===e&&(e=new i.Vector3),e.copy(n).normalize(),t=this.dot(e),this.copy(e).multiplyScalar(t)}}(),projectOnPlane:function(){var e;return function(t){return void 0===e&&(e=new i.Vector3),e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e;return function(t){return void 0===e&&(e=new i.Vector3),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/(this.length()*e.length());return Math.acos(i.Math.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},setFromMatrixPosition:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this},setFromMatrixScale:function(e){var t=this.set(e.elements[0],e.elements[1],e.elements[2]).length(),n=this.set(e.elements[4],e.elements[5],e.elements[6]).length(),r=this.set(e.elements[8],e.elements[9],e.elements[10]).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){var n=4*e,r=t.elements;return this.x=r[n],this.y=r[n+1],this.z=r[n+2],this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e){return this.x=e[0],this.y=e[1],this.z=e[2],this},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new i.Vector3(this.x,this.y,this.z)}},i.Vector4=function(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1},i.Vector4.prototype={constructor:i.Vector4,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t,this.z*=t,this.w*=t}else this.x=0,this.y=0,this.z=0,this.w=1;return this},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return 1e-4>t?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,o=.01,a=.1,s=e.elements,c=s[0],l=s[4],u=s[8],h=s[1],p=s[5],d=s[9],f=s[2],m=s[6],v=s[10];if(Math.abs(l-h)<o&&Math.abs(u-f)<o&&Math.abs(d-m)<o){if(Math.abs(l+h)<a&&Math.abs(u+f)<a&&Math.abs(d+m)<a&&Math.abs(c+p+v-3)<a)return this.set(1,0,0,0),this;t=Math.PI;var g=(c+1)/2,y=(p+1)/2,x=(v+1)/2,_=(l+h)/4,b=(u+f)/4,w=(d+m)/4;return g>y&&g>x?o>g?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(g),r=_/n,i=b/n):y>x?o>y?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(y),n=_/r,i=w/r):o>x?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(x),n=b/i,r=w/i),this.set(n,r,i,t),this}var E=Math.sqrt((m-d)*(m-d)+(u-f)*(u-f)+(h-l)*(h-l));return Math.abs(E)<.001&&(E=1),this.x=(m-d)/E,this.y=(u-f)/E,this.z=(h-l)/E,this.w=Math.acos((c+p+v-1)/2),this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this.w>e.w&&(this.w=e.w),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this.w<e.w&&(this.w=e.w),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this.w<e.w?this.w=e.w:this.w>t.w&&(this.w=t.w),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new i.Vector4,t=new i.Vector4),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e){return this.x=e[0],this.y=e[1],this.z=e[2],this.w=e[3],this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new i.Vector4(this.x,this.y,this.z,this.w)}},i.Euler=function(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||i.Euler.DefaultOrder},i.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],i.Euler.DefaultOrder="XYZ",i.Euler.prototype={constructor:i.Euler,_x:0,_y:0,_z:0,_order:i.Euler.DefaultOrder,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t){var n=i.Math.clamp,r=e.elements,o=r[0],a=r[4],s=r[8],c=r[1],l=r[5],u=r[9],h=r[2],p=r[6],d=r[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(p,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-n(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(n(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(c,o))):"ZYX"===t?(this._y=Math.asin(-n(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(p,d),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,l))):"YZX"===t?(this._z=Math.asin(n(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===t?(this._z=Math.asin(-n(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(p,l),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-u,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,this.onChangeCallback(),this},setFromQuaternion:function(e,t,n){var r=i.Math.clamp,o=e.x*e.x,a=e.y*e.y,s=e.z*e.z,c=e.w*e.w;return t=t||this._order,"XYZ"===t?(this._x=Math.atan2(2*(e.x*e.w-e.y*e.z),c-o-a+s),this._y=Math.asin(r(2*(e.x*e.z+e.y*e.w),-1,1)),this._z=Math.atan2(2*(e.z*e.w-e.x*e.y),c+o-a-s)):"YXZ"===t?(this._x=Math.asin(r(2*(e.x*e.w-e.y*e.z),-1,1)),this._y=Math.atan2(2*(e.x*e.z+e.y*e.w),c-o-a+s),this._z=Math.atan2(2*(e.x*e.y+e.z*e.w),c-o+a-s)):"ZXY"===t?(this._x=Math.asin(r(2*(e.x*e.w+e.y*e.z),-1,1)),this._y=Math.atan2(2*(e.y*e.w-e.z*e.x),c-o-a+s),this._z=Math.atan2(2*(e.z*e.w-e.x*e.y),c-o+a-s)):"ZYX"===t?(this._x=Math.atan2(2*(e.x*e.w+e.z*e.y),c-o-a+s),this._y=Math.asin(r(2*(e.y*e.w-e.x*e.z),-1,1)),this._z=Math.atan2(2*(e.x*e.y+e.z*e.w),c+o-a-s)):"YZX"===t?(this._x=Math.atan2(2*(e.x*e.w-e.z*e.y),c-o+a-s),this._y=Math.atan2(2*(e.y*e.w-e.x*e.z),c+o-a-s),this._z=Math.asin(r(2*(e.x*e.y+e.z*e.w),-1,1))):"XZY"===t?(this._x=Math.atan2(2*(e.x*e.w+e.y*e.z),c-o+a-s),this._y=Math.atan2(2*(e.x*e.z+e.y*e.w),c+o-a-s),this._z=Math.asin(r(2*(e.z*e.w-e.x*e.y),-1,1))):console.warn("THREE.Euler: .setFromQuaternion() given unsupported order: "+t),this._order=t,n!==!1&&this.onChangeCallback(),this},reorder:function(){var e=new i.Quaternion;return function(t){e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){},clone:function(){return new i.Euler(this._x,this._y,this._z,this._order)}},i.Line3=function(e,t){this.start=void 0!==e?e:new i.Vector3,this.end=void 0!==t?t:new i.Vector3},i.Line3.prototype={constructor:i.Line3,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},center:function(e){var t=e||new i.Vector3;return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new i.Vector3;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var n=t||new i.Vector3;return this.delta(n).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new i.Vector3,t=new i.Vector3;return function(n,r){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var o=t.dot(t),a=t.dot(e),s=a/o;return r&&(s=i.Math.clamp(s,0,1)),s}}(),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t),o=n||new i.Vector3;return this.delta(o).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)},clone:function(){return(new i.Line3).copy(this)}},i.Box2=function(e,t){this.min=void 0!==e?e:new i.Vector2(1/0,1/0),this.max=void 0!==t?t:new i.Vector2(-1/0,-1/0)},i.Box2.prototype={constructor:i.Box2,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;n>t;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new i.Vector2;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(e){var t=e||new i.Vector2;return t.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){var t=e||new i.Vector2;return t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y?!0:!1},getParameter:function(e,t){var n=t||new i.Vector2;return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y?!1:!0},clampPoint:function(e,t){var n=t||new i.Vector2;return n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new i.Vector2;return function(t){var n=e.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new i.Box2).copy(this)}},i.Box3=function(e,t){this.min=void 0!==e?e:new i.Vector3(1/0,1/0,1/0),this.max=void 0!==t?t:new i.Vector3(-1/0,-1/0,-1/0)},i.Box3.prototype={constructor:i.Box3,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;n>t;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new i.Vector3;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(){var e=new i.Vector3;return function(t){var n=this;return t.updateMatrixWorld(!0),this.makeEmpty(),t.traverse(function(t){if(void 0!==t.geometry&&void 0!==t.geometry.vertices)for(var r=t.geometry.vertices,i=0,o=r.length;o>i;i++)e.copy(r[i]),e.applyMatrix4(t.matrixWorld),n.expandByPoint(e)}),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(e){var t=e||new i.Vector3;return t.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){var t=e||new i.Vector3;return t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z?!0:!1},getParameter:function(e,t){var n=t||new i.Vector3;return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z?!1:!0},clampPoint:function(e,t){var n=t||new i.Vector3;return n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new i.Vector3;return function(t){var n=e.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),getBoundingSphere:function(){var e=new i.Vector3;return function(t){var n=t||new i.Sphere;return n.center=this.center(),n.radius=.5*this.size(e).length(),n}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3];return function(t){return e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.makeEmpty(),this.setFromPoints(e),this}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new i.Box3).copy(this)}},i.Matrix3=function(e,t,n,r,i,o,a,s,c){this.elements=new Float32Array(9);var l=this.elements;l[0]=void 0!==e?e:1,l[3]=t||0,l[6]=n||0,l[1]=r||0,l[4]=void 0!==i?i:1,l[7]=o||0,l[2]=a||0,l[5]=s||0,l[8]=void 0!==c?c:1},i.Matrix3.prototype={constructor:i.Matrix3,set:function(e,t,n,r,i,o,a,s,c){var l=this.elements;return l[0]=e,l[3]=t,l[6]=n,l[1]=r,l[4]=i,l[7]=o,l[2]=a,l[5]=s,l[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToVector3Array:function(){var e=new i.Vector3;return function(t,n,r){void 0===n&&(n=0),void 0===r&&(r=t.length);for(var i=0,o=n;r>i;i+=3,o+=3)e.x=t[o],e.y=t[o+1],e.z=t[o+2],e.applyMatrix3(this),t[o]=e.x,t[o+1]=e.y,t[o+2]=e.z;return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],c=e[7],l=e[8];return t*o*l-t*a*c-n*i*l+n*a*s+r*i*c-r*o*s},getInverse:function(e,t){var n=e.elements,r=this.elements;r[0]=n[10]*n[5]-n[6]*n[9],r[1]=-n[10]*n[1]+n[2]*n[9],r[2]=n[6]*n[1]-n[2]*n[5],r[3]=-n[10]*n[4]+n[6]*n[8],r[4]=n[10]*n[0]-n[2]*n[8],r[5]=-n[6]*n[0]+n[2]*n[4],r[6]=n[9]*n[4]-n[5]*n[8],r[7]=-n[9]*n[0]+n[1]*n[8],r[8]=n[5]*n[0]-n[1]*n[4];var i=n[0]*r[0]+n[1]*r[3]+n[2]*r[6];if(0===i){var o="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(o);return console.warn(o),this.identity(),this}return this.multiplyScalar(1/i),this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},flattenToArrayOffset:function(e,t){var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e},getNormalMatrix:function(e){return this.getInverse(e).transpose(),this},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},clone:function(){var e=this.elements;return new i.Matrix3(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])}},i.Matrix4=function(e,t,n,r,i,o,a,s,c,l,u,h,p,d,f,m){this.elements=new Float32Array(16);var v=this.elements;v[0]=void 0!==e?e:1,v[4]=t||0,v[8]=n||0,v[12]=r||0,v[1]=i||0,v[5]=void 0!==o?o:1,v[9]=a||0,v[13]=s||0,v[2]=c||0,v[6]=l||0,v[10]=void 0!==u?u:1,v[14]=h||0,v[3]=p||0,v[7]=d||0,v[11]=f||0,v[15]=void 0!==m?m:1},i.Matrix4.prototype={constructor:i.Matrix4,set:function(e,t,n,r,i,o,a,s,c,l,u,h,p,d,f,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=c,v[6]=l,v[10]=u,v[14]=h,v[3]=p,v[7]=d,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(e){return this.elements.set(e.elements),this},extractPosition:function(e){return console.warn("THREEMatrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractRotation:function(){var e=new i.Vector3;return function(t){var n=this.elements,r=t.elements,i=1/e.set(r[0],r[1],r[2]).length(),o=1/e.set(r[4],r[5],r[6]).length(),a=1/e.set(r[8],r[9],r[10]).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,this}}(),makeRotationFromEuler:function(e){e instanceof i.Euler==!1&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,o=e.z,a=Math.cos(n),s=Math.sin(n),c=Math.cos(r),l=Math.sin(r),u=Math.cos(o),h=Math.sin(o);if("XYZ"===e.order){var p=a*u,d=a*h,f=s*u,m=s*h;t[0]=c*u,t[4]=-c*h,t[8]=l,t[1]=d+f*l,t[5]=p-m*l,t[9]=-s*c,t[2]=m-p*l,t[6]=f+d*l,t[10]=a*c}else if("YXZ"===e.order){var v=c*u,g=c*h,y=l*u,x=l*h;t[0]=v+x*s,t[4]=y*s-g,t[8]=a*l,t[1]=a*h,t[5]=a*u,t[9]=-s,t[2]=g*s-y,t[6]=x+v*s,t[10]=a*c}else if("ZXY"===e.order){var v=c*u,g=c*h,y=l*u,x=l*h;t[0]=v-x*s,t[4]=-a*h,t[8]=y+g*s,t[1]=g+y*s,t[5]=a*u,t[9]=x-v*s,t[2]=-a*l,t[6]=s,t[10]=a*c}else if("ZYX"===e.order){var p=a*u,d=a*h,f=s*u,m=s*h;t[0]=c*u,t[4]=f*l-d,t[8]=p*l+m,t[1]=c*h,t[5]=m*l+p,t[9]=d*l-f,t[2]=-l,t[6]=s*c,t[10]=a*c}else if("YZX"===e.order){var _=a*c,b=a*l,w=s*c,E=s*l;t[0]=c*u,t[4]=E-_*h,t[8]=w*h+b,t[1]=h,t[5]=a*u,t[9]=-s*u,t[2]=-l*u,t[6]=b*h+w,t[10]=_-E*h}else if("XZY"===e.order){var _=a*c,b=a*l,w=s*c,E=s*l;t[0]=c*u,t[4]=-h,t[8]=l*u,t[1]=_*h+E,t[5]=a*u,t[9]=b*h-w,t[2]=w*h-b,t[6]=s*u,t[10]=E*h+_
}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},makeRotationFromQuaternion:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,o=e.w,a=n+n,s=r+r,c=i+i,l=n*a,u=n*s,h=n*c,p=r*s,d=r*c,f=i*c,m=o*a,v=o*s,g=o*c;return t[0]=1-(p+f),t[4]=u-g,t[8]=h+v,t[1]=u+g,t[5]=1-(l+f),t[9]=d-m,t[2]=h-v,t[6]=d+m,t[10]=1-(l+p),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new i.Vector3,t=new i.Vector3,n=new i.Vector3;return function(r,i,o){var a=this.elements;return n.subVectors(r,i).normalize(),0===n.length()&&(n.z=1),e.crossVectors(o,n).normalize(),0===e.length()&&(n.x+=1e-4,e.crossVectors(o,n).normalize()),t.crossVectors(n,e),a[0]=e.x,a[4]=t.x,a[8]=n.x,a[1]=e.y,a[5]=t.y,a[9]=n.y,a[2]=e.z,a[6]=t.z,a[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],c=n[12],l=n[1],u=n[5],h=n[9],p=n[13],d=n[2],f=n[6],m=n[10],v=n[14],g=n[3],y=n[7],x=n[11],_=n[15],b=r[0],w=r[4],E=r[8],M=r[12],C=r[1],S=r[5],T=r[9],R=r[13],D=r[2],A=r[6],N=r[10],P=r[14],O=r[3],L=r[7],U=r[11],V=r[15];return i[0]=o*b+a*C+s*D+c*O,i[4]=o*w+a*S+s*A+c*L,i[8]=o*E+a*T+s*N+c*U,i[12]=o*M+a*R+s*P+c*V,i[1]=l*b+u*C+h*D+p*O,i[5]=l*w+u*S+h*A+p*L,i[9]=l*E+u*T+h*N+p*U,i[13]=l*M+u*R+h*P+p*V,i[2]=d*b+f*C+m*D+v*O,i[6]=d*w+f*S+m*A+v*L,i[10]=d*E+f*T+m*N+v*U,i[14]=d*M+f*R+m*P+v*V,i[3]=g*b+y*C+x*D+_*O,i[7]=g*w+y*S+x*A+_*L,i[11]=g*E+y*T+x*N+_*U,i[15]=g*M+y*R+x*P+_*V,this},multiplyToArray:function(e,t,n){var r=this.elements;return this.multiplyMatrices(e,t),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),e.applyProjection(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToVector3Array:function(){var e=new i.Vector3;return function(t,n,r){void 0===n&&(n=0),void 0===r&&(r=t.length);for(var i=0,o=n;r>i;i+=3,o+=3)e.x=t[o],e.y=t[o+1],e.z=t[o+2],e.applyMatrix4(this),t[o]=e.x,t[o+1]=e.y,t[o+2]=e.z;return t}}(),rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],c=e[13],l=e[2],u=e[6],h=e[10],p=e[14],d=e[3],f=e[7],m=e[11],v=e[15];return d*(+i*s*u-r*c*u-i*a*h+n*c*h+r*a*p-n*s*p)+f*(+t*s*p-t*c*h+i*o*h-r*o*p+r*c*l-i*s*l)+m*(+t*c*u-t*a*p-i*o*u+n*o*p+i*a*l-n*c*l)+v*(-r*a*l-t*s*u+t*a*h+r*o*u-n*o*h+n*s*l)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},flattenToArrayOffset:function(e,t){var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e},getPosition:function(){var e=new i.Vector3;return function(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var t=this.elements;return e.set(t[12],t[13],t[14])}}(),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],o=r[4],a=r[8],s=r[12],c=r[1],l=r[5],u=r[9],h=r[13],p=r[2],d=r[6],f=r[10],m=r[14],v=r[3],g=r[7],y=r[11],x=r[15];n[0]=u*m*g-h*f*g+h*d*y-l*m*y-u*d*x+l*f*x,n[4]=s*f*g-a*m*g-s*d*y+o*m*y+a*d*x-o*f*x,n[8]=a*h*g-s*u*g+s*l*y-o*h*y-a*l*x+o*u*x,n[12]=s*u*d-a*h*d-s*l*f+o*h*f+a*l*m-o*u*m,n[1]=h*f*v-u*m*v-h*p*y+c*m*y+u*p*x-c*f*x,n[5]=a*m*v-s*f*v+s*p*y-i*m*y-a*p*x+i*f*x,n[9]=s*u*v-a*h*v-s*c*y+i*h*y+a*c*x-i*u*x,n[13]=a*h*p-s*u*p+s*c*f-i*h*f-a*c*m+i*u*m,n[2]=l*m*v-h*d*v+h*p*g-c*m*g-l*p*x+c*d*x,n[6]=s*d*v-o*m*v-s*p*g+i*m*g+o*p*x-i*d*x,n[10]=o*h*v-s*l*v+s*c*g-i*h*g-o*c*x+i*l*x,n[14]=s*l*p-o*h*p-s*c*d+i*h*d+o*c*m-i*l*m,n[3]=u*d*v-l*f*v-u*p*g+c*f*g+l*p*y-c*d*y,n[7]=o*f*v-a*d*v+a*p*g-i*f*g-o*p*y+i*d*y,n[11]=a*l*v-o*u*v-a*c*g+i*u*g+o*c*y-i*l*y,n[15]=o*u*p-a*l*p+a*c*d-i*u*d-o*c*f+i*l*f;var _=i*n[0]+c*n[4]+p*n[8]+v*n[12];if(0==_){var b="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(b);return console.warn(b),this.identity(),this}return this.multiplyScalar(1/_),this},translate:function(){console.warn("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.warn("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.warn("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.warn("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.warn("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,Math.max(n,r)))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,c=i*o,l=i*a;return this.set(c*o+n,c*a-r*s,c*s+r*a,0,c*a+r*s,l*a+n,l*s-r*o,0,c*s-r*a,l*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(){var e=new i.Vector3,t=new i.Matrix4;return function(n,r,i){var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),c=e.set(o[8],o[9],o[10]).length(),l=this.determinant();0>l&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],t.elements.set(this.elements);var u=1/a,h=1/s,p=1/c;return t.elements[0]*=u,t.elements[1]*=u,t.elements[2]*=u,t.elements[4]*=h,t.elements[5]*=h,t.elements[6]*=h,t.elements[8]*=p,t.elements[9]*=p,t.elements[10]*=p,r.setFromRotationMatrix(t),i.x=a,i.y=s,i.z=c,this}}(),makeFrustum:function(e,t,n,r,i,o){var a=this.elements,s=2*i/(t-e),c=2*i/(r-n),l=(t+e)/(t-e),u=(r+n)/(r-n),h=-(o+i)/(o-i),p=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=c,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(e,t,n,r){var o=n*Math.tan(i.Math.degToRad(.5*e)),a=-o,s=a*t,c=o*t;return this.makeFrustum(s,c,a,o,n,r)},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=t-e,c=n-r,l=o-i,u=(t+e)/s,h=(n+r)/c,p=(o+i)/l;return a[0]=2/s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2/c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2/l,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},clone:function(){var e=this.elements;return new i.Matrix4(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])}},i.Ray=function(e,t){this.origin=void 0!==e?e:new i.Vector3,this.direction=void 0!==t?t:new i.Vector3},i.Ray.prototype={constructor:i.Ray,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){var n=t||new i.Vector3;return n.copy(this.direction).multiplyScalar(e).add(this.origin)},recast:function(){var e=new i.Vector3;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var n=t||new i.Vector3;n.subVectors(e,this.origin);var r=n.dot(this.direction);return 0>r?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(){var e=new i.Vector3;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return 0>n?this.origin.distanceTo(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceTo(t))}}(),distanceSqToSegment:function(e,t,n,r){var i,o,a,s,c=e.clone().add(t).multiplyScalar(.5),l=t.clone().sub(e).normalize(),u=.5*e.distanceTo(t),h=this.origin.clone().sub(c),p=-this.direction.dot(l),d=h.dot(this.direction),f=-h.dot(l),m=h.lengthSq(),v=Math.abs(1-p*p);if(v>=0)if(i=p*f-d,o=p*d-f,s=u*v,i>=0)if(o>=-s)if(s>=o){var g=1/v;i*=g,o*=g,a=i*(i+p*o+2*d)+o*(p*i+o+2*f)+m}else o=u,i=Math.max(0,-(p*o+d)),a=-i*i+o*(o+2*f)+m;else o=-u,i=Math.max(0,-(p*o+d)),a=-i*i+o*(o+2*f)+m;else-s>=o?(i=Math.max(0,-(-p*u+d)),o=i>0?-u:Math.min(Math.max(-u,-f),u),a=-i*i+o*(o+2*f)+m):s>=o?(i=0,o=Math.min(Math.max(-u,-f),u),a=o*(o+2*f)+m):(i=Math.max(0,-(p*u+d)),o=i>0?u:Math.min(Math.max(-u,-f),u),a=-i*i+o*(o+2*f)+m);else o=p>0?-u:u,i=Math.max(0,-(p*o+d)),a=-i*i+o*(o+2*f)+m;return n&&n.copy(this.direction.clone().multiplyScalar(i).add(this.origin)),r&&r.copy(l.clone().multiplyScalar(o).add(c)),a},isIntersectionSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},intersectSphere:function(){var e=new i.Vector3;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,o=t.radius*t.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,c=r+a;return 0>s&&0>c?null:0>s?this.at(c,n):this.at(s,n)}}(),isIntersectionPlane:function(e){var t=e.distanceToPoint(this.origin);if(0===t)return!0;var n=e.normal.dot(this.direction);return 0>n*t?!0:!1},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0==t)return 0==e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},isIntersectionBox:function(){var e=new i.Vector3;return function(t){return null!==this.intersectBox(t,e)}}(),intersectBox:function(e,t){var n,r,i,o,a,s,c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(n=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(n=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),l>=0?(i=(e.min.y-h.y)*l,o=(e.max.y-h.y)*l):(i=(e.max.y-h.y)*l,o=(e.min.y-h.y)*l),n>o||i>r?null:((i>n||n!==n)&&(n=i),(r>o||r!==r)&&(r=o),u>=0?(a=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),n>s||a>r?null:((a>n||n!==n)&&(n=a),(r>s||r!==r)&&(r=s),0>r?null:this.at(n>=0?n:r,t)))},intersectTriangle:function(){var e=new i.Vector3,t=new i.Vector3,n=new i.Vector3,r=new i.Vector3;return function(i,o,a,s,c){t.subVectors(o,i),n.subVectors(a,i),r.crossVectors(t,n);var l,u=this.direction.dot(r);if(u>0){if(s)return null;l=1}else{if(!(0>u))return null;l=-1,u=-u}e.subVectors(this.origin,i);var h=l*this.direction.dot(n.crossVectors(e,n));if(0>h)return null;var p=l*this.direction.dot(t.cross(e));if(0>p)return null;if(h+p>u)return null;var d=-l*e.dot(r);return 0>d?null:this.at(d/u,c)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)},clone:function(){return(new i.Ray).copy(this)}},i.Sphere=function(e,t){this.center=void 0!==e?e:new i.Vector3,this.radius=void 0!==t?t:0},i.Sphere.prototype={constructor:i.Sphere,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new i.Box3;return function(t,n){var r=this.center;void 0!==n?r.copy(n):e.setFromPoints(t).center(r);for(var i=0,o=0,a=t.length;a>o;o++)i=Math.max(i,r.distanceToSquared(t[o]));return this.radius=Math.sqrt(i),this}}(),copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},clampPoint:function(e,t){var n=this.center.distanceToSquared(e),r=t||new i.Vector3;return r.copy(e),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(e){var t=e||new i.Box3;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return(new i.Sphere).copy(this)}},i.Frustum=function(e,t,n,r,o,a){this.planes=[void 0!==e?e:new i.Plane,void 0!==t?t:new i.Plane,void 0!==n?n:new i.Plane,void 0!==r?r:new i.Plane,void 0!==o?o:new i.Plane,void 0!==a?a:new i.Plane]},i.Frustum.prototype={constructor:i.Frustum,set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},copy:function(e){for(var t=this.planes,n=0;6>n;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5],l=n[6],u=n[7],h=n[8],p=n[9],d=n[10],f=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(a-r,u-s,f-h,y-m).normalize(),t[1].setComponents(a+r,u+s,f+h,y+m).normalize(),t[2].setComponents(a+i,u+c,f+p,y+v).normalize(),t[3].setComponents(a-i,u-c,f-p,y-v).normalize(),t[4].setComponents(a-o,u-l,f-d,y-g).normalize(),t[5].setComponents(a+o,u+l,f+d,y+g).normalize(),this},intersectsObject:function(){var e=new i.Sphere;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere),e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;6>i;i++){var o=t[i].distanceToPoint(n);if(r>o)return!1}return!0},intersectsBox:function(){var e=new i.Vector3,t=new i.Vector3;return function(n){for(var r=this.planes,i=0;6>i;i++){var o=r[i];e.x=o.normal.x>0?n.min.x:n.max.x,t.x=o.normal.x>0?n.max.x:n.min.x,e.y=o.normal.y>0?n.min.y:n.max.y,t.y=o.normal.y>0?n.max.y:n.min.y,e.z=o.normal.z>0?n.min.z:n.max.z,t.z=o.normal.z>0?n.max.z:n.min.z;var a=o.distanceToPoint(e),s=o.distanceToPoint(t);if(0>a&&0>s)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;6>n;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0},clone:function(){return(new i.Frustum).copy(this)}},i.Plane=function(e,t){this.normal=void 0!==e?e:new i.Vector3(1,0,0),this.constant=void 0!==t?t:0},i.Plane.prototype={constructor:i.Plane,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new i.Vector3,t=new i.Vector3;return function(n,r,i){var o=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var n=this.distanceToPoint(e),r=t||new i.Vector3;return r.copy(this.normal).multiplyScalar(n)},isIntersectionLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return 0>t&&n>0||0>n&&t>0},intersectLine:function(){var e=new i.Vector3;return function(t,n){var r=n||new i.Vector3,o=t.delta(e),a=this.normal.dot(o);if(0==a)return 0==this.distanceToPoint(t.start)?r.copy(t.start):void 0;var s=-(t.start.dot(this.normal)+this.constant)/a;return 0>s||s>1?void 0:r.copy(o).multiplyScalar(s).add(t.start)}}(),coplanarPoint:function(e){var t=e||new i.Vector3;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new i.Vector3,t=new i.Vector3,n=new i.Matrix3;return function(r,i){var o=i||n.getNormalMatrix(r),a=e.copy(this.normal).applyMatrix3(o),s=this.coplanarPoint(t);return s.applyMatrix4(r),this.setFromNormalAndCoplanarPoint(a,s),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant==this.constant},clone:function(){return(new i.Plane).copy(this)}},i.Math={generateUUID:function(){var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=new Array(36),r=0;return function(){for(var i=0;36>i;i++)8==i||13==i||18==i||23==i?n[i]="-":14==i?n[i]="4":(2>=r&&(r=33554432+16777216*Math.random()|0),e=15&r,r>>=4,n[i]=t[19==i?3&e|8:e]);return n.join("")}}(),clamp:function(e,t,n){return t>e?t:e>n?n:e},clampBottom:function(e,t){return t>e?t:e},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},smoothstep:function(e,t,n){return t>=e?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return t>=e?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(6*e-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},sign:function(e){return 0>e?-1:e>0?1:0},degToRad:function(){var e=Math.PI/180;return function(t){return t*e}}(),radToDeg:function(){var e=180/Math.PI;return function(t){return t*e}}(),isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e}},i.Spline=function(e){function t(e,t,n,r,i,o,a){var s=.5*(n-e),c=.5*(r-t);return(2*(t-n)+s+c)*a+(-3*(t-n)-2*s-c)*o+s*i+t}this.points=e;var n,r,o,a,s,c,l,u,h,p=[],d={x:0,y:0,z:0};this.initFromArray=function(e){this.points=[];for(var t=0;t<e.length;t++)this.points[t]={x:e[t][0],y:e[t][1],z:e[t][2]}},this.getPoint=function(e){return n=(this.points.length-1)*e,r=Math.floor(n),o=n-r,p[0]=0===r?r:r-1,p[1]=r,p[2]=r>this.points.length-2?this.points.length-1:r+1,p[3]=r>this.points.length-3?this.points.length-1:r+2,c=this.points[p[0]],l=this.points[p[1]],u=this.points[p[2]],h=this.points[p[3]],a=o*o,s=o*a,d.x=t(c.x,l.x,u.x,h.x,o,a,s),d.y=t(c.y,l.y,u.y,h.y,o,a,s),d.z=t(c.z,l.z,u.z,h.z,o,a,s),d},this.getControlPointsArray=function(){var e,t,n=this.points.length,r=[];for(e=0;n>e;e++)t=this.points[e],r[e]=[t.x,t.y,t.z];return r},this.getLength=function(e){var t,n,r,o,a=0,s=0,c=0,l=new i.Vector3,u=new i.Vector3,h=[],p=0;for(h[0]=0,e||(e=100),r=this.points.length*e,l.copy(this.points[0]),t=1;r>t;t++)n=t/r,o=this.getPoint(n),u.copy(o),p+=u.distanceTo(l),l.copy(o),a=(this.points.length-1)*n,s=Math.floor(a),s!=c&&(h[s]=p,c=s);return h[h.length]=p,{chunks:h,total:p}},this.reparametrizeByArcLength=function(e){var t,n,r,o,a,s,c,l,u=[],h=new i.Vector3,p=this.getLength();for(u.push(h.copy(this.points[0]).clone()),t=1;t<this.points.length;t++){for(s=p.chunks[t]-p.chunks[t-1],c=Math.ceil(e*s/p.total),o=(t-1)/(this.points.length-1),a=t/(this.points.length-1),n=1;c-1>n;n++)r=o+n*(1/c)*(a-o),l=this.getPoint(r),u.push(h.copy(l).clone());u.push(h.copy(this.points[t]).clone())}this.points=u}},i.Triangle=function(e,t,n){this.a=void 0!==e?e:new i.Vector3,this.b=void 0!==t?t:new i.Vector3,this.c=void 0!==n?n:new i.Vector3},i.Triangle.normal=function(){var e=new i.Vector3;return function(t,n,r,o){var a=o||new i.Vector3;a.subVectors(r,n),e.subVectors(t,n),a.cross(e);var s=a.lengthSq();return s>0?a.multiplyScalar(1/Math.sqrt(s)):a.set(0,0,0)}}(),i.Triangle.barycoordFromPoint=function(){var e=new i.Vector3,t=new i.Vector3,n=new i.Vector3;return function(r,o,a,s,c){e.subVectors(s,o),t.subVectors(a,o),n.subVectors(r,o);var l=e.dot(e),u=e.dot(t),h=e.dot(n),p=t.dot(t),d=t.dot(n),f=l*p-u*u,m=c||new i.Vector3;if(0==f)return m.set(-2,-1,-1);var v=1/f,g=(p*h-u*d)*v,y=(l*d-u*h)*v;return m.set(1-g-y,y,g)}}(),i.Triangle.containsPoint=function(){var e=new i.Vector3;return function(t,n,r,o){var a=i.Triangle.barycoordFromPoint(t,n,r,o,e);return a.x>=0&&a.y>=0&&a.x+a.y<=1}}(),i.Triangle.prototype={constructor:i.Triangle,set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new i.Vector3,t=new i.Vector3;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){var t=e||new i.Vector3;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return i.Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new i.Plane;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return i.Triangle.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return i.Triangle.containsPoint(e,this.a,this.b,this.c)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)},clone:function(){return(new i.Triangle).copy(this)}},i.Clock=function(e){this.autoStart=void 0!==e?e:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},i.Clock.prototype={constructor:i.Clock,start:function(){this.startTime=void 0!==r.performance&&void 0!==r.performance.now?r.performance.now():Date.now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=void 0!==r.performance&&void 0!==r.performance.now?r.performance.now():Date.now();e=.001*(t-this.oldTime),this.oldTime=t,this.elapsedTime+=e}return e}},i.EventDispatcher=function(){},i.EventDispatcher.prototype={constructor:i.EventDispatcher,apply:function(e){e.addEventListener=i.EventDispatcher.prototype.addEventListener,e.hasEventListener=i.EventDispatcher.prototype.hasEventListener,e.removeEventListener=i.EventDispatcher.prototype.removeEventListener,e.dispatchEvent=i.EventDispatcher.prototype.dispatchEvent},addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)?!0:!1},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners,r=n[e];if(void 0!==r){var i=r.indexOf(t);-1!==i&&r.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;for(var r=[],i=n.length,o=0;i>o;o++)r[o]=n[o];for(var o=0;i>o;o++)r[o].call(this,e)}}}},function(e){e.Raycaster=function(t,n,r,i){this.ray=new e.Ray(t,n),this.near=r||0,this.far=i||1/0,this.params={Sprite:{},Mesh:{},PointCloud:{threshold:1},LOD:{},Line:{}}};var t=function(e,t){return e.distance-t.distance},n=function(e,t,r,i){if(e.raycast(t,r),i===!0)for(var o=e.children,a=0,s=o.length;s>a;a++)n(o[a],t,r,!0)};e.Raycaster.prototype={constructor:e.Raycaster,precision:1e-4,linePrecision:1,set:function(e,t){this.ray.set(e,t)},intersectObject:function(e,r){var i=[];return n(e,this,i,r),i.sort(t),i},intersectObjects:function(e,r){for(var i=[],o=0,a=e.length;a>o;o++)n(e[o],this,i,r);return i.sort(t),i}}}(i),i.Object3D=function(){this.id=i.Object3DIdCount++,this.uuid=i.Math.generateUUID(),this.name="",this.parent=void 0,this.children=[],this.up=i.Object3D.DefaultUp.clone();var e=new i.Vector3,t=new i.Euler,n=new i.Quaternion,r=new i.Vector3(1,1,1);t.onChange(function(){n.setFromEuler(t,!1)}),n.onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:r}}),this.renderDepth=null,this.rotationAutoUpdate=!0,this.matrix=new i.Matrix4,this.matrixWorld=new i.Matrix4,this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.userData={}},i.Object3D.DefaultUp=new i.Vector3(0,1,0),i.Object3D.prototype={constructor:i.Object3D,get eulerOrder(){return console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order},set eulerOrder(e){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order=e},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(e){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new i.Quaternion;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new i.Vector3(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new i.Vector3(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new i.Vector3(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new i.Vector3;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},translateX:function(){var e=new i.Vector3(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new i.Vector3(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new i.Vector3(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new i.Matrix4;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new i.Matrix4;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}if(e===this)return console.error("THREE.Object3D.add:",e,"can't be added as a child of itself."),this;if(e instanceof i.Object3D){void 0!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e);for(var n=this;void 0!==n.parent;)n=n.parent;void 0!==n&&n instanceof i.Scene&&n.__addObject(e)}else console.error("THREE.Object3D.add:",e,"is not an instance of THREE.Object3D.");return this},remove:function(e){if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);var n=this.children.indexOf(e);if(-1!==n){e.parent=void 0,e.dispatchEvent({type:"removed"}),this.children.splice(n,1);for(var r=this;void 0!==r.parent;)r=r.parent;void 0!==r&&r instanceof i.Scene&&r.__removeObject(e)}},raycast:function(){},traverse:function(e){e(this);for(var t=0,n=this.children.length;n>t;t++)this.children[t].traverse(e)},traverseVisible:function(e){if(this.visible!==!1){e(this);for(var t=0,n=this.children.length;n>t;t++)this.children[t].traverseVisible(e)}},getObjectById:function(e,t){for(var n=0,r=this.children.length;r>n;n++){var i=this.children[n];if(i.id===e)return i;if(t===!0&&(i=i.getObjectById(e,t),void 0!==i))return i}return void 0},getObjectByName:function(e,t){for(var n=0,r=this.children.length;r>n;n++){var i=this.children[n];if(i.name===e)return i;if(t===!0&&(i=i.getObjectByName(e,t),void 0!==i))return i}return void 0},getChildByName:function(e,t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e,t)},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate===!0&&this.updateMatrix(),(this.matrixWorldNeedsUpdate===!0||e===!0)&&(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=0,n=this.children.length;n>t;t++)this.children[t].updateMatrixWorld(e)},clone:function(e,t){if(void 0===e&&(e=new i.Object3D),void 0===t&&(t=!0),e.name=this.name,e.up.copy(this.up),e.position.copy(this.position),e.quaternion.copy(this.quaternion),e.scale.copy(this.scale),e.renderDepth=this.renderDepth,e.rotationAutoUpdate=this.rotationAutoUpdate,e.matrix.copy(this.matrix),e.matrixWorld.copy(this.matrixWorld),e.matrixAutoUpdate=this.matrixAutoUpdate,e.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,e.visible=this.visible,e.castShadow=this.castShadow,e.receiveShadow=this.receiveShadow,e.frustumCulled=this.frustumCulled,e.userData=JSON.parse(JSON.stringify(this.userData)),t===!0)for(var n=0;n<this.children.length;n++){var r=this.children[n];e.add(r.clone())}return e}},i.EventDispatcher.prototype.apply(i.Object3D.prototype),i.Object3DIdCount=0,i.Projector=function(){function e(){if(l===_){var e=new i.RenderableObject;return x.push(e),_++,l++,e}return x[l++]}function t(){if(h===w){var e=new i.RenderableVertex;return b.push(e),w++,h++,e}return b[h++]}function n(){if(d===M){var e=new i.RenderableFace;return E.push(e),M++,d++,e}return E[d++]}function r(){if(m===S){var e=new i.RenderableLine;return C.push(e),S++,m++,e}return C[m++]}function o(){if(g===R){var e=new i.RenderableSprite;return T.push(e),R++,g++,e}return T[g++]}function a(e,t){return e.z!==t.z?t.z-e.z:e.id!==t.id?e.id-t.id:0}function s(e,t){var n=0,r=1,i=e.z+e.w,o=t.z+t.w,a=-e.z+e.w,s=-t.z+t.w;
return i>=0&&o>=0&&a>=0&&s>=0?!0:0>i&&0>o||0>a&&0>s?!1:(0>i?n=Math.max(n,i/(i-o)):0>o&&(r=Math.min(r,i/(i-o))),0>a?n=Math.max(n,a/(a-s)):0>s&&(r=Math.min(r,a/(a-s))),n>r?!1:(e.lerp(t,n),t.lerp(e,1-r),!0))}var c,l,u,h,p,d,f,m,v,g,y,x=[],_=0,b=[],w=0,E=[],M=0,C=[],S=0,T=[],R=0,D={objects:[],lights:[],elements:[]},A=new i.Vector3,N=new i.Vector3,P=new i.Vector3,O=new i.Vector3,L=new i.Vector4,U=new i.Box3(new i.Vector3(-1,-1,-1),new i.Vector3(1,1,1)),V=new i.Box3,k=new Array(3),F=(new Array(4),new i.Matrix4),I=new i.Matrix4,B=new i.Matrix4,z=new i.Matrix3,H=new i.Frustum,j=new i.Vector4,G=new i.Vector4;this.projectVector=function(e,t){return t.matrixWorldInverse.getInverse(t.matrixWorld),I.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),e.applyProjection(I)},this.unprojectVector=function(){var e=new i.Matrix4;return function(t,n){return e.getInverse(n.projectionMatrix),I.multiplyMatrices(n.matrixWorld,e),t.applyProjection(I)}}(),this.pickingRay=function(e,t){e.z=-1;var n=new i.Vector3(e.x,e.y,1);return this.unprojectVector(e,t),this.unprojectVector(n,t),n.sub(e).normalize(),new i.Raycaster(e,n)};var W=function(){var e=[],o=[],a=null,s=null,c=new i.Matrix3,l=function(t){a=t,s=a.material,c.getNormalMatrix(a.matrixWorld),e.length=0,o.length=0},h=function(e){var t=e.position,n=e.positionWorld,r=e.positionScreen;n.copy(t).applyMatrix4(y),r.copy(n).applyMatrix4(I);var i=1/r.w;r.x*=i,r.y*=i,r.z*=i,e.visible=r.x>=-1&&r.x<=1&&r.y>=-1&&r.y<=1&&r.z>=-1&&r.z<=1},d=function(e,n,r){u=t(),u.position.set(e,n,r),h(u)},m=function(t,n,r){e.push(t,n,r)},v=function(e,t){o.push(e,t)},g=function(e,t,n){return e.visible===!0||t.visible===!0||n.visible===!0?!0:(k[0]=e.positionScreen,k[1]=t.positionScreen,k[2]=n.positionScreen,U.isIntersectionBox(V.setFromPoints(k)))},x=function(e,t,n){return(n.positionScreen.x-e.positionScreen.x)*(t.positionScreen.y-e.positionScreen.y)-(n.positionScreen.y-e.positionScreen.y)*(t.positionScreen.x-e.positionScreen.x)<0},_=function(e,t){var n=b[e],i=b[t];f=r(),f.id=a.id,f.v1.copy(n),f.v2.copy(i),f.z=(n.positionScreen.z+i.positionScreen.z)/2,f.material=a.material,D.elements.push(f)},w=function(t,r,l){var u=b[t],h=b[r],d=b[l];if(g(u,h,d)!==!1&&(s.side===i.DoubleSide||x(u,h,d)===!0)){p=n(),p.id=a.id,p.v1.copy(u),p.v2.copy(h),p.v3.copy(d),p.z=(u.positionScreen.z+h.positionScreen.z+d.positionScreen.z)/3;for(var f=0;3>f;f++){var m=3*arguments[f],v=p.vertexNormalsModel[f];v.set(e[m],e[m+1],e[m+2]),v.applyMatrix3(c).normalize();var y=2*arguments[f],_=p.uvs[f];_.set(o[y],o[y+1])}p.vertexNormalsLength=3,p.material=a.material,D.elements.push(p)}};return{setObject:l,projectVertex:h,checkTriangleVisibility:g,checkBackfaceCulling:x,pushVertex:d,pushNormal:m,pushUv:v,pushLine:_,pushTriangle:w}},X=new W;this.projectScene=function(u,x,_,w){d=0,m=0,g=0,D.elements.length=0,u.autoUpdate===!0&&u.updateMatrixWorld(),void 0===x.parent&&x.updateMatrixWorld(),F.copy(x.matrixWorldInverse.getInverse(x.matrixWorld)),I.multiplyMatrices(x.projectionMatrix,F),H.setFromMatrix(I),l=0,D.objects.length=0,D.lights.length=0,u.traverseVisible(function(t){t instanceof i.Light?D.lights.push(t):(t instanceof i.Mesh||t instanceof i.Line||t instanceof i.Sprite)&&(t.frustumCulled===!1||H.intersectsObject(t)===!0)&&(c=e(),c.id=t.id,c.object=t,null!==t.renderDepth?c.z=t.renderDepth:(O.setFromMatrixPosition(t.matrixWorld),O.applyProjection(I),c.z=O.z),D.objects.push(c))}),_===!0&&D.objects.sort(a);for(var E=0,M=D.objects.length;M>E;E++){var C=D.objects[E].object,S=C.geometry;if(X.setObject(C),y=C.matrixWorld,h=0,C instanceof i.Mesh){if(S instanceof i.BufferGeometry){var T=S.attributes,R=S.offsets;if(void 0===T.position)continue;for(var U=T.position.array,V=0,k=U.length;k>V;V+=3)X.pushVertex(U[V],U[V+1],U[V+2]);if(void 0!==T.normal)for(var W=T.normal.array,V=0,k=W.length;k>V;V+=3)X.pushNormal(W[V],W[V+1],W[V+2]);if(void 0!==T.uv)for(var Y=T.uv.array,V=0,k=Y.length;k>V;V+=2)X.pushUv(Y[V],Y[V+1]);if(void 0!==T.index){var q=T.index.array;if(R.length>0)for(var E=0;E<R.length;E++)for(var K=R[E],Q=K.index,V=K.start,k=K.start+K.count;k>V;V+=3)X.pushTriangle(q[V]+Q,q[V+1]+Q,q[V+2]+Q);else for(var V=0,k=q.length;k>V;V+=3)X.pushTriangle(q[V],q[V+1],q[V+2])}else for(var V=0,k=U.length/3;k>V;V+=3)X.pushTriangle(V,V+1,V+2)}else if(S instanceof i.Geometry){var Z=S.vertices,J=S.faces,$=S.faceVertexUvs[0];z.getNormalMatrix(y);for(var et=C.material instanceof i.MeshFaceMaterial,tt=et===!0?C.material:null,nt=0,rt=Z.length;rt>nt;nt++){var it=Z[nt];X.pushVertex(it.x,it.y,it.z)}for(var ot=0,at=J.length;at>ot;ot++){var st=J[ot],ct=et===!0?tt.materials[st.materialIndex]:C.material;if(void 0!==ct){var lt=ct.side,ut=b[st.a],ht=b[st.b],pt=b[st.c];if(ct.morphTargets===!0){var dt=S.morphTargets,ft=C.morphTargetInfluences,mt=ut.position,vt=ht.position,gt=pt.position;A.set(0,0,0),N.set(0,0,0),P.set(0,0,0);for(var yt=0,xt=dt.length;xt>yt;yt++){var _t=ft[yt];if(0!==_t){var bt=dt[yt].vertices;A.x+=(bt[st.a].x-mt.x)*_t,A.y+=(bt[st.a].y-mt.y)*_t,A.z+=(bt[st.a].z-mt.z)*_t,N.x+=(bt[st.b].x-vt.x)*_t,N.y+=(bt[st.b].y-vt.y)*_t,N.z+=(bt[st.b].z-vt.z)*_t,P.x+=(bt[st.c].x-gt.x)*_t,P.y+=(bt[st.c].y-gt.y)*_t,P.z+=(bt[st.c].z-gt.z)*_t}}ut.position.add(A),ht.position.add(N),pt.position.add(P),X.projectVertex(ut),X.projectVertex(ht),X.projectVertex(pt)}if(X.checkTriangleVisibility(ut,ht,pt)!==!1){var wt=X.checkBackfaceCulling(ut,ht,pt);if(lt!==i.DoubleSide){if(lt===i.FrontSide&&wt===!1)continue;if(lt===i.BackSide&&wt===!0)continue}p=n(),p.id=C.id,p.v1.copy(ut),p.v2.copy(ht),p.v3.copy(pt),p.normalModel.copy(st.normal),wt!==!1||lt!==i.BackSide&&lt!==i.DoubleSide||p.normalModel.negate(),p.normalModel.applyMatrix3(z).normalize();for(var Et=st.vertexNormals,Mt=0,Ct=Math.min(Et.length,3);Ct>Mt;Mt++){var St=p.vertexNormalsModel[Mt];St.copy(Et[Mt]),wt!==!1||lt!==i.BackSide&&lt!==i.DoubleSide||St.negate(),St.applyMatrix3(z).normalize()}p.vertexNormalsLength=Et.length;var Tt=$[ot];if(void 0!==Tt)for(var Rt=0;3>Rt;Rt++)p.uvs[Rt].copy(Tt[Rt]);p.color=st.color,p.material=ct,p.z=(ut.positionScreen.z+ht.positionScreen.z+pt.positionScreen.z)/3,D.elements.push(p)}}}}}else if(C instanceof i.Line){if(S instanceof i.BufferGeometry){var T=S.attributes;if(void 0!==T.position){for(var U=T.position.array,V=0,k=U.length;k>V;V+=3)X.pushVertex(U[V],U[V+1],U[V+2]);if(void 0!==T.index)for(var q=T.index.array,V=0,k=q.length;k>V;V+=2)X.pushLine(q[V],q[V+1]);else for(var Dt=C.type===i.LinePieces?2:1,V=0,k=U.length/3-1;k>V;V+=Dt)X.pushLine(V,V+1)}}else if(S instanceof i.Geometry){B.multiplyMatrices(I,y);var Z=C.geometry.vertices;if(0===Z.length)continue;ut=t(),ut.positionScreen.copy(Z[0]).applyMatrix4(B);for(var Dt=C.type===i.LinePieces?2:1,nt=1,rt=Z.length;rt>nt;nt++)ut=t(),ut.positionScreen.copy(Z[nt]).applyMatrix4(B),(nt+1)%Dt>0||(ht=b[h-2],j.copy(ut.positionScreen),G.copy(ht.positionScreen),s(j,G)===!0&&(j.multiplyScalar(1/j.w),G.multiplyScalar(1/G.w),f=r(),f.id=C.id,f.v1.positionScreen.copy(j),f.v2.positionScreen.copy(G),f.z=Math.max(j.z,G.z),f.material=C.material,C.material.vertexColors===i.VertexColors&&(f.vertexColors[0].copy(C.geometry.colors[nt]),f.vertexColors[1].copy(C.geometry.colors[nt-1])),D.elements.push(f)))}}else if(C instanceof i.Sprite){L.set(y.elements[12],y.elements[13],y.elements[14],1),L.applyMatrix4(I);var At=1/L.w;L.z*=At,L.z>=-1&&L.z<=1&&(v=o(),v.id=C.id,v.x=L.x*At,v.y=L.y*At,v.z=L.z,v.object=C,v.rotation=C.rotation,v.scale.x=C.scale.x*Math.abs(v.x-(L.x+x.projectionMatrix.elements[0])/(L.w+x.projectionMatrix.elements[12])),v.scale.y=C.scale.y*Math.abs(v.y-(L.y+x.projectionMatrix.elements[5])/(L.w+x.projectionMatrix.elements[13])),v.material=C.material,D.elements.push(v))}}return w===!0&&D.elements.sort(a),D}},i.Face3=function(e,t,n,r,o,a){this.a=e,this.b=t,this.c=n,this.normal=r instanceof i.Vector3?r:new i.Vector3,this.vertexNormals=r instanceof Array?r:[],this.color=o instanceof i.Color?o:new i.Color,this.vertexColors=o instanceof Array?o:[],this.vertexTangents=[],this.materialIndex=void 0!==a?a:0},i.Face3.prototype={constructor:i.Face3,clone:function(){var e=new i.Face3(this.a,this.b,this.c);e.normal.copy(this.normal),e.color.copy(this.color),e.materialIndex=this.materialIndex;for(var t=0,n=this.vertexNormals.length;n>t;t++)e.vertexNormals[t]=this.vertexNormals[t].clone();for(var t=0,n=this.vertexColors.length;n>t;t++)e.vertexColors[t]=this.vertexColors[t].clone();for(var t=0,n=this.vertexTangents.length;n>t;t++)e.vertexTangents[t]=this.vertexTangents[t].clone();return e}},i.Face4=function(e,t,n,r,o,a,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new i.Face3(e,t,n,o,a,s)},i.BufferAttribute=function(e,t){this.array=e,this.itemSize=t},i.BufferAttribute.prototype={constructor:i.BufferAttribute,get length(){return this.array.length},set:function(e){return this.array.set(e),this},setX:function(e,t){return this.array[e*this.itemSize]=t,this},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}},i.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new i.BufferAttribute(e,t)},i.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new i.BufferAttribute(e,t)},i.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new i.BufferAttribute(e,t)},i.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new i.BufferAttribute(e,t)},i.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new i.BufferAttribute(e,t)},i.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new i.BufferAttribute(e,t)},i.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new i.BufferAttribute(e,t)},i.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new i.BufferAttribute(e,t)},i.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new i.BufferAttribute(e,t)},i.BufferGeometry=function(){this.id=i.GeometryIdCount++,this.uuid=i.Math.generateUUID(),this.name="",this.attributes={},this.drawcalls=[],this.offsets=this.drawcalls,this.boundingBox=null,this.boundingSphere=null},i.BufferGeometry.prototype={constructor:i.BufferGeometry,addAttribute:function(e,t){return t instanceof i.BufferAttribute==!1?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void(this.attributes[e]={array:arguments[1],itemSize:arguments[2]})):void(this.attributes[e]=t)},getAttribute:function(e){return this.attributes[e]},addDrawCall:function(e,t,n){this.drawcalls.push({start:e,count:t,index:void 0!==n?n:0})},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToVector3Array(t.array),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new i.Matrix3).getNormalMatrix(e);r.applyToVector3Array(n.array),n.needsUpdate=!0}},fromGeometry:function(e,t){t=t||{vertexColors:i.NoColors};var n=e.vertices,r=e.faces,o=e.faceVertexUvs,a=t.vertexColors,s=o[0].length>0,c=3==r[0].vertexNormals.length,l=new Float32Array(3*r.length*3);this.addAttribute("position",new i.BufferAttribute(l,3));var u=new Float32Array(3*r.length*3);if(this.addAttribute("normal",new i.BufferAttribute(u,3)),a!==i.NoColors){var h=new Float32Array(3*r.length*3);this.addAttribute("color",new i.BufferAttribute(h,3))}if(s===!0){var p=new Float32Array(3*r.length*2);this.addAttribute("uvs",new i.BufferAttribute(p,2))}for(var d=0,f=0,m=0;d<r.length;d++,f+=6,m+=9){var v=r[d],g=n[v.a],y=n[v.b],x=n[v.c];if(l[m]=g.x,l[m+1]=g.y,l[m+2]=g.z,l[m+3]=y.x,l[m+4]=y.y,l[m+5]=y.z,l[m+6]=x.x,l[m+7]=x.y,l[m+8]=x.z,c===!0){var _=v.vertexNormals[0],b=v.vertexNormals[1],w=v.vertexNormals[2];u[m]=_.x,u[m+1]=_.y,u[m+2]=_.z,u[m+3]=b.x,u[m+4]=b.y,u[m+5]=b.z,u[m+6]=w.x,u[m+7]=w.y,u[m+8]=w.z}else{var E=v.normal;u[m]=E.x,u[m+1]=E.y,u[m+2]=E.z,u[m+3]=E.x,u[m+4]=E.y,u[m+5]=E.z,u[m+6]=E.x,u[m+7]=E.y,u[m+8]=E.z}if(a===i.FaceColors){var M=v.color;h[m]=M.r,h[m+1]=M.g,h[m+2]=M.b,h[m+3]=M.r,h[m+4]=M.g,h[m+5]=M.b,h[m+6]=M.r,h[m+7]=M.g,h[m+8]=M.b}else if(a===i.VertexColors){var C=v.vertexColors[0],S=v.vertexColors[1],T=v.vertexColors[2];h[m]=C.r,h[m+1]=C.g,h[m+2]=C.b,h[m+3]=S.r,h[m+4]=S.g,h[m+5]=S.b,h[m+6]=T.r,h[m+7]=T.g,h[m+8]=T.b}if(s===!0){var R=o[0][d][0],D=o[0][d][1],A=o[0][d][2];p[f]=R.x,p[f+1]=R.y,p[f+2]=D.x,p[f+3]=D.y,p[f+4]=A.x,p[f+5]=A.y}}return this.computeBoundingSphere(),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new i.Box3);var e=this.attributes.position.array;if(e){var t=this.boundingBox;e.length>=3&&(t.min.x=t.max.x=e[0],t.min.y=t.max.y=e[1],t.min.z=t.max.z=e[2]);for(var n=3,r=e.length;r>n;n+=3){var o=e[n],a=e[n+1],s=e[n+2];o<t.min.x?t.min.x=o:o>t.max.x&&(t.max.x=o),a<t.min.y?t.min.y=a:a>t.max.y&&(t.max.y=a),s<t.min.z?t.min.z=s:s>t.max.z&&(t.max.z=s)}}(void 0===e||0===e.length)&&(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')},computeBoundingSphere:function(){var e=new i.Box3,t=new i.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new i.Sphere);var n=this.attributes.position.array;if(n){e.makeEmpty();for(var r=this.boundingSphere.center,o=0,a=n.length;a>o;o+=3)t.set(n[o],n[o+1],n[o+2]),e.expandByPoint(t);e.center(r);for(var s=0,o=0,a=n.length;a>o;o+=3)t.set(n[o],n[o+1],n[o+2]),s=Math.max(s,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){if(this.attributes.position){var e,t,n,r,o=this.attributes.position.array.length;if(void 0===this.attributes.normal)this.attributes.normal={itemSize:3,array:new Float32Array(o)};else for(e=0,t=this.attributes.normal.array.length;t>e;e++)this.attributes.normal.array[e]=0;var a,s,c,l,u,h,p=this.attributes.position.array,d=this.attributes.normal.array,f=new i.Vector3,m=new i.Vector3,v=new i.Vector3,g=new i.Vector3,y=new i.Vector3;if(this.attributes.index){var x=this.attributes.index.array,_=this.offsets.length>0?this.offsets:[{start:0,count:x.length,index:0}];for(n=0,r=_.length;r>n;++n){var b=_[n].start,w=_[n].count,E=_[n].index;for(e=b,t=b+w;t>e;e+=3)a=E+x[e],s=E+x[e+1],c=E+x[e+2],l=p[3*a],u=p[3*a+1],h=p[3*a+2],f.set(l,u,h),l=p[3*s],u=p[3*s+1],h=p[3*s+2],m.set(l,u,h),l=p[3*c],u=p[3*c+1],h=p[3*c+2],v.set(l,u,h),g.subVectors(v,m),y.subVectors(f,m),g.cross(y),d[3*a]+=g.x,d[3*a+1]+=g.y,d[3*a+2]+=g.z,d[3*s]+=g.x,d[3*s+1]+=g.y,d[3*s+2]+=g.z,d[3*c]+=g.x,d[3*c+1]+=g.y,d[3*c+2]+=g.z}}else for(e=0,t=p.length;t>e;e+=9)l=p[e],u=p[e+1],h=p[e+2],f.set(l,u,h),l=p[e+3],u=p[e+4],h=p[e+5],m.set(l,u,h),l=p[e+6],u=p[e+7],h=p[e+8],v.set(l,u,h),g.subVectors(v,m),y.subVectors(f,m),g.cross(y),d[e]=g.x,d[e+1]=g.y,d[e+2]=g.z,d[e+3]=g.x,d[e+4]=g.y,d[e+5]=g.z,d[e+6]=g.x,d[e+7]=g.y,d[e+8]=g.z;this.normalizeNormals(),this.normalsNeedUpdate=!0}},computeTangents:function(){function e(e,t,n){d=r[3*e],f=r[3*e+1],m=r[3*e+2],v=r[3*t],g=r[3*t+1],y=r[3*t+2],x=r[3*n],_=r[3*n+1],b=r[3*n+2],w=a[2*e],E=a[2*e+1],M=a[2*t],C=a[2*t+1],S=a[2*n],T=a[2*n+1],R=v-d,D=x-d,A=g-f,N=_-f,P=y-m,O=b-m,L=M-w,U=S-w,V=C-E,k=T-E,F=1/(L*k-U*V),X.set((k*R-V*D)*F,(k*A-V*N)*F,(k*P-V*O)*F),Y.set((L*D-U*R)*F,(L*N-U*A)*F,(L*O-U*P)*F),u[e].add(X),u[t].add(X),u[n].add(X),h[e].add(Y),h[t].add(Y),h[n].add(Y)}function t(e){rt.x=o[3*e],rt.y=o[3*e+1],rt.z=o[3*e+2],it.copy(rt),$=u[e],tt.copy($),tt.sub(rt.multiplyScalar(rt.dot($))).normalize(),nt.crossVectors(it,$),et=nt.dot(h[e]),J=0>et?-1:1,l[4*e]=tt.x,l[4*e+1]=tt.y,l[4*e+2]=tt.z,l[4*e+3]=J}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)return void console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");var n=this.attributes.index.array,r=this.attributes.position.array,o=this.attributes.normal.array,a=this.attributes.uv.array,s=r.length/3;if(void 0===this.attributes.tangent){var c=4*s;this.attributes.tangent={itemSize:4,array:new Float32Array(c)}}for(var l=this.attributes.tangent.array,u=[],h=[],p=0;s>p;p++)u[p]=new i.Vector3,h[p]=new i.Vector3;var d,f,m,v,g,y,x,_,b,w,E,M,C,S,T,R,D,A,N,P,O,L,U,V,k,F,I,B,z,H,j,G,W,X=new i.Vector3,Y=new i.Vector3,q=this.offsets;for(z=0,H=q.length;H>z;++z){var K=q[z].start,Q=q[z].count,Z=q[z].index;for(I=K,B=K+Q;B>I;I+=3)j=Z+n[I],G=Z+n[I+1],W=Z+n[I+2],e(j,G,W)}var J,$,et,tt=new i.Vector3,nt=new i.Vector3,rt=new i.Vector3,it=new i.Vector3;for(z=0,H=q.length;H>z;++z){var K=q[z].start,Q=q[z].count,Z=q[z].index;for(I=K,B=K+Q;B>I;I+=3)j=Z+n[I],G=Z+n[I+1],W=Z+n[I+2],t(j),t(G),t(W)}},computeOffsets:function(e){var t=e;void 0===e&&(t=65535);for(var n=(Date.now(),this.attributes.index.array),r=this.attributes.position.array,i=(r.length/3,n.length/3),o=new Uint16Array(n.length),a=0,s=0,c=[{start:0,count:0,index:0}],l=c[0],u=0,h=0,p=new Int32Array(6),d=new Int32Array(r.length),f=new Int32Array(r.length),m=0;m<r.length;m++)d[m]=-1,f[m]=-1;for(var v=0;i>v;v++){h=0;for(var g=0;3>g;g++){var y=n[3*v+g];-1==d[y]?(p[2*g]=y,p[2*g+1]=-1,h++):d[y]<l.index?(p[2*g]=y,p[2*g+1]=-1,u++):(p[2*g]=y,p[2*g+1]=d[y])}var x=s+h;if(x>l.index+t){var _={start:a,count:0,index:s};c.push(_),l=_;for(var b=0;6>b;b+=2){var w=p[b+1];w>-1&&w<l.index&&(p[b+1]=-1)}}for(var b=0;6>b;b+=2){var y=p[b],w=p[b+1];-1===w&&(w=s++),d[y]=w,f[w]=y,o[a++]=w-l.index,l.count++}}return this.reorderBuffers(o,f,s),this.offsets=c,c},merge:function(){console.log("BufferGeometry.merge(): TODO")},normalizeNormals:function(){for(var e,t,n,r,i=this.attributes.normal.array,o=0,a=i.length;a>o;o+=3)e=i[o],t=i[o+1],n=i[o+2],r=1/Math.sqrt(e*e+t*t+n*n),i[o]*=r,i[o+1]*=r,i[o+2]*=r},reorderBuffers:function(e,t,n){var r={},i=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];for(var o in this.attributes)if("index"!=o)for(var a=this.attributes[o].array,s=0,c=i.length;c>s;s++){var l=i[s];if(a instanceof l){r[o]=new l(this.attributes[o].itemSize*n);break}}for(var u=0;n>u;u++){var h=t[u];for(var o in this.attributes)if("index"!=o)for(var p=this.attributes[o].array,d=this.attributes[o].itemSize,f=r[o],m=0;d>m;m++)f[u*d+m]=p[h*d+m]}this.attributes.index.array=e;for(var o in this.attributes)"index"!=o&&(this.attributes[o].array=r[o],this.attributes[o].numItems=this.attributes[o].itemSize*n)},clone:function(){var e=new i.BufferGeometry,t=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];for(var n in this.attributes){for(var r=this.attributes[n],o=r.array,a={itemSize:r.itemSize,array:null},s=0,c=t.length;c>s;s++){var l=t[s];if(o instanceof l){a.array=new l(o);break}}e.attributes[n]=a}for(var s=0,c=this.offsets.length;c>s;s++){var u=this.offsets[s];e.offsets.push({start:u.start,index:u.index,count:u.count})}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},i.EventDispatcher.prototype.apply(i.BufferGeometry.prototype),i.Geometry=function(){this.id=i.GeometryIdCount++,this.uuid=i.Math.generateUUID(),this.name="",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.tangentsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.buffersNeedUpdate=!1,this.groupsNeedUpdate=!1},i.Geometry.prototype={constructor:i.Geometry,applyMatrix:function(e){for(var t=(new i.Matrix3).getNormalMatrix(e),n=0,r=this.vertices.length;r>n;n++){var o=this.vertices[n];o.applyMatrix4(e)}for(var n=0,r=this.faces.length;r>n;n++){var a=this.faces[n];a.normal.applyMatrix3(t).normalize();for(var s=0,c=a.vertexNormals.length;c>s;s++)a.vertexNormals[s].applyMatrix3(t).normalize()}this.boundingBox instanceof i.Box3&&this.computeBoundingBox(),this.boundingSphere instanceof i.Sphere&&this.computeBoundingSphere()},center:function(){this.computeBoundingBox();var e=new i.Vector3;return e.addVectors(this.boundingBox.min,this.boundingBox.max),e.multiplyScalar(-.5),this.applyMatrix((new i.Matrix4).makeTranslation(e.x,e.y,e.z)),this.computeBoundingBox(),e},computeFaceNormals:function(){for(var e=new i.Vector3,t=new i.Vector3,n=0,r=this.faces.length;r>n;n++){var o=this.faces[n],a=this.vertices[o.a],s=this.vertices[o.b],c=this.vertices[o.c];e.subVectors(c,s),t.subVectors(a,s),e.cross(t),e.normalize(),o.normal.copy(e)}},computeVertexNormals:function(e){var t,n,r,o,a,s;for(s=new Array(this.vertices.length),t=0,n=this.vertices.length;n>t;t++)s[t]=new i.Vector3;if(e){{var c,l,u,h=new i.Vector3,p=new i.Vector3;new i.Vector3,new i.Vector3,new i.Vector3}for(r=0,o=this.faces.length;o>r;r++)a=this.faces[r],c=this.vertices[a.a],l=this.vertices[a.b],u=this.vertices[a.c],h.subVectors(u,l),p.subVectors(c,l),h.cross(p),s[a.a].add(h),s[a.b].add(h),s[a.c].add(h)}else for(r=0,o=this.faces.length;o>r;r++)a=this.faces[r],s[a.a].add(a.normal),s[a.b].add(a.normal),s[a.c].add(a.normal);for(t=0,n=this.vertices.length;n>t;t++)s[t].normalize();for(r=0,o=this.faces.length;o>r;r++)a=this.faces[r],a.vertexNormals[0]=s[a.a].clone(),a.vertexNormals[1]=s[a.b].clone(),a.vertexNormals[2]=s[a.c].clone()},computeMorphNormals:function(){var e,t,n,r,o;for(n=0,r=this.faces.length;r>n;n++)for(o=this.faces[n],o.__originalFaceNormal?o.__originalFaceNormal.copy(o.normal):o.__originalFaceNormal=o.normal.clone(),o.__originalVertexNormals||(o.__originalVertexNormals=[]),e=0,t=o.vertexNormals.length;t>e;e++)o.__originalVertexNormals[e]?o.__originalVertexNormals[e].copy(o.vertexNormals[e]):o.__originalVertexNormals[e]=o.vertexNormals[e].clone();var a=new i.Geometry;for(a.faces=this.faces,e=0,t=this.morphTargets.length;t>e;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var s,c,l=this.morphNormals[e].faceNormals,u=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;r>n;n++)s=new i.Vector3,c={a:new i.Vector3,b:new i.Vector3,c:new i.Vector3},l.push(s),u.push(c)}var h=this.morphNormals[e];a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals();var s,c;for(n=0,r=this.faces.length;r>n;n++)o=this.faces[n],s=h.faceNormals[n],c=h.vertexNormals[n],s.copy(o.normal),c.a.copy(o.vertexNormals[0]),c.b.copy(o.vertexNormals[1]),c.c.copy(o.vertexNormals[2])}for(n=0,r=this.faces.length;r>n;n++)o=this.faces[n],o.normal=o.__originalFaceNormal,o.vertexNormals=o.__originalVertexNormals},computeTangents:function(){function e(e,t,n,r,i,o,a){u=e.vertices[t],h=e.vertices[n],p=e.vertices[r],d=l[i],f=l[o],m=l[a],v=h.x-u.x,g=p.x-u.x,y=h.y-u.y,x=p.y-u.y,_=h.z-u.z,b=p.z-u.z,w=f.x-d.x,E=m.x-d.x,M=f.y-d.y,C=m.y-d.y,S=1/(w*C-E*M),P.set((C*v-M*g)*S,(C*y-M*x)*S,(C*_-M*b)*S),O.set((w*g-E*v)*S,(w*x-E*y)*S,(w*b-E*_)*S),A[t].add(P),A[n].add(P),A[r].add(P),N[t].add(O),N[n].add(O),N[r].add(O)}var t,n,r,o,a,s,c,l,u,h,p,d,f,m,v,g,y,x,_,b,w,E,M,C,S,T,R,D,A=[],N=[],P=new i.Vector3,O=new i.Vector3,L=new i.Vector3,U=new i.Vector3,V=new i.Vector3;for(r=0,o=this.vertices.length;o>r;r++)A[r]=new i.Vector3,N[r]=new i.Vector3;for(t=0,n=this.faces.length;n>t;t++)c=this.faces[t],l=this.faceVertexUvs[0][t],e(this,c.a,c.b,c.c,0,1,2);var k=["a","b","c","d"];for(t=0,n=this.faces.length;n>t;t++)for(c=this.faces[t],a=0;a<Math.min(c.vertexNormals.length,3);a++)V.copy(c.vertexNormals[a]),s=c[k[a]],T=A[s],L.copy(T),L.sub(V.multiplyScalar(V.dot(T))).normalize(),U.crossVectors(c.vertexNormals[a],T),R=U.dot(N[s]),D=0>R?-1:1,c.vertexTangents[a]=new i.Vector4(L.x,L.y,L.z,D);this.hasTangents=!0},computeLineDistances:function(){for(var e=0,t=this.vertices,n=0,r=t.length;r>n;n++)n>0&&(e+=t[n].distanceTo(t[n-1])),this.lineDistances[n]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new i.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new i.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e instanceof i.Geometry==!1)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);var r,o=this.vertices.length,a=(this.faceVertexUvs[0].length,this.vertices),s=e.vertices,c=this.faces,l=e.faces,u=this.faceVertexUvs[0],h=e.faceVertexUvs[0];void 0===n&&(n=0),void 0!==t&&(r=(new i.Matrix3).getNormalMatrix(t));for(var p=0,d=s.length;d>p;p++){var f=s[p],m=f.clone();void 0!==t&&m.applyMatrix4(t),a.push(m)}for(p=0,d=l.length;d>p;p++){var v,g,y,x=l[p],_=x.vertexNormals,b=x.vertexColors;v=new i.Face3(x.a+o,x.b+o,x.c+o),v.normal.copy(x.normal),void 0!==r&&v.normal.applyMatrix3(r).normalize();for(var w=0,E=_.length;E>w;w++)g=_[w].clone(),void 0!==r&&g.applyMatrix3(r).normalize(),v.vertexNormals.push(g);v.color.copy(x.color);for(var w=0,E=b.length;E>w;w++)y=b[w],v.vertexColors.push(y.clone());v.materialIndex=x.materialIndex+n,c.push(v)}for(p=0,d=h.length;d>p;p++){var M=h[p],C=[];if(void 0!==M){for(var w=0,E=M.length;E>w;w++)C.push(new i.Vector2(M[w].x,M[w].y));u.push(C)}}},mergeVertices:function(){var e,t,n,r,i,o,a,s,c={},l=[],u=[],h=4,p=Math.pow(10,h);for(n=0,r=this.vertices.length;r>n;n++)e=this.vertices[n],t=Math.round(e.x*p)+"_"+Math.round(e.y*p)+"_"+Math.round(e.z*p),void 0===c[t]?(c[t]=n,l.push(this.vertices[n]),u[n]=l.length-1):u[n]=u[c[t]];var d=[];for(n=0,r=this.faces.length;r>n;n++){i=this.faces[n],i.a=u[i.a],i.b=u[i.b],i.c=u[i.c],o=[i.a,i.b,i.c];for(var f=-1,m=0;3>m;m++)if(o[m]==o[(m+1)%3]){f=m,d.push(n);break}}for(n=d.length-1;n>=0;n--){var v=d[n];for(this.faces.splice(v,1),a=0,s=this.faceVertexUvs.length;s>a;a++)this.faceVertexUvs[a].splice(v,1)}var g=this.vertices.length-l.length;return this.vertices=l,g},makeGroups:function(){var e=0;return function(t,n){var r,i,o,a,s,c,l={},u=this.morphTargets.length,h=this.morphNormals.length;for(this.geometryGroups={},this.geometryGroupsList=[],r=0,i=this.faces.length;i>r;r++)o=this.faces[r],a=t?o.materialIndex:0,a in l||(l[a]={hash:a,counter:0}),s=l[a].hash+"_"+l[a].counter,s in this.geometryGroups||(c={id:e++,faces3:[],materialIndex:a,vertices:0,numMorphTargets:u,numMorphNormals:h},this.geometryGroups[s]=c,this.geometryGroupsList.push(c)),this.geometryGroups[s].vertices+3>n&&(l[a].counter+=1,s=l[a].hash+"_"+l[a].counter,s in this.geometryGroups||(c={id:e++,faces3:[],materialIndex:a,vertices:0,numMorphTargets:u,numMorphNormals:h},this.geometryGroups[s]=c,this.geometryGroupsList.push(c))),this.geometryGroups[s].faces3.push(r),this.geometryGroups[s].vertices+=3}}(),clone:function(){for(var e=new i.Geometry,t=this.vertices,n=0,r=t.length;r>n;n++)e.vertices.push(t[n].clone());for(var o=this.faces,n=0,r=o.length;r>n;n++)e.faces.push(o[n].clone());for(var a=this.faceVertexUvs[0],n=0,r=a.length;r>n;n++){for(var s=a[n],c=[],l=0,u=s.length;u>l;l++)c.push(new i.Vector2(s[l].x,s[l].y));e.faceVertexUvs[0].push(c)}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},i.EventDispatcher.prototype.apply(i.Geometry.prototype),i.GeometryIdCount=0,i.Camera=function(){i.Object3D.call(this),this.matrixWorldInverse=new i.Matrix4,this.projectionMatrix=new i.Matrix4},i.Camera.prototype=Object.create(i.Object3D.prototype),i.Camera.prototype.lookAt=function(){var e=new i.Matrix4;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),i.Camera.prototype.clone=function(e){return void 0===e&&(e=new i.Camera),i.Object3D.prototype.clone.call(this,e),e.matrixWorldInverse.copy(this.matrixWorldInverse),e.projectionMatrix.copy(this.projectionMatrix),e},i.CubeCamera=function(e,t,n){i.Object3D.call(this);var r=90,o=1,a=new i.PerspectiveCamera(r,o,e,t);a.up.set(0,-1,0),a.lookAt(new i.Vector3(1,0,0)),this.add(a);var s=new i.PerspectiveCamera(r,o,e,t);s.up.set(0,-1,0),s.lookAt(new i.Vector3(-1,0,0)),this.add(s);var c=new i.PerspectiveCamera(r,o,e,t);c.up.set(0,0,1),c.lookAt(new i.Vector3(0,1,0)),this.add(c);var l=new i.PerspectiveCamera(r,o,e,t);l.up.set(0,0,-1),l.lookAt(new i.Vector3(0,-1,0)),this.add(l);var u=new i.PerspectiveCamera(r,o,e,t);u.up.set(0,-1,0),u.lookAt(new i.Vector3(0,0,1)),this.add(u);var h=new i.PerspectiveCamera(r,o,e,t);h.up.set(0,-1,0),h.lookAt(new i.Vector3(0,0,-1)),this.add(h),this.renderTarget=new i.WebGLRenderTargetCube(n,n,{format:i.RGBFormat,magFilter:i.LinearFilter,minFilter:i.LinearFilter}),this.updateCubeMap=function(e,t){var n=this.renderTarget,r=n.generateMipmaps;n.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,a,n),n.activeCubeFace=1,e.render(t,s,n),n.activeCubeFace=2,e.render(t,c,n),n.activeCubeFace=3,e.render(t,l,n),n.activeCubeFace=4,e.render(t,u,n),n.generateMipmaps=r,n.activeCubeFace=5,e.render(t,h,n)}},i.CubeCamera.prototype=Object.create(i.Object3D.prototype),i.OrthographicCamera=function(e,t,n,r,o,a){i.Camera.call(this),this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0!==o?o:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()},i.OrthographicCamera.prototype=Object.create(i.Camera.prototype),i.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far)},i.OrthographicCamera.prototype.clone=function(){var e=new i.OrthographicCamera;return i.Camera.prototype.clone.call(this,e),e.left=this.left,e.right=this.right,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e},i.PerspectiveCamera=function(e,t,n,r){i.Camera.call(this),this.fov=void 0!==e?e:50,this.aspect=void 0!==t?t:1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.updateProjectionMatrix()},i.PerspectiveCamera.prototype=Object.create(i.Camera.prototype),i.PerspectiveCamera.prototype.setLens=function(e,t){void 0===t&&(t=24),this.fov=2*i.Math.radToDeg(Math.atan(t/(2*e))),this.updateProjectionMatrix()},i.PerspectiveCamera.prototype.setViewOffset=function(e,t,n,r,i,o){this.fullWidth=e,this.fullHeight=t,this.x=n,this.y=r,this.width=i,this.height=o,this.updateProjectionMatrix()},i.PerspectiveCamera.prototype.updateProjectionMatrix=function(){if(this.fullWidth){var e=this.fullWidth/this.fullHeight,t=Math.tan(i.Math.degToRad(.5*this.fov))*this.near,n=-t,r=e*n,o=e*t,a=Math.abs(o-r),s=Math.abs(t-n);this.projectionMatrix.makeFrustum(r+this.x*a/this.fullWidth,r+(this.x+this.width)*a/this.fullWidth,t-(this.y+this.height)*s/this.fullHeight,t-this.y*s/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far)},i.PerspectiveCamera.prototype.clone=function(){var e=new i.PerspectiveCamera;return i.Camera.prototype.clone.call(this,e),e.fov=this.fov,e.aspect=this.aspect,e.near=this.near,e.far=this.far,e
},i.Light=function(e){i.Object3D.call(this),this.color=new i.Color(e)},i.Light.prototype=Object.create(i.Object3D.prototype),i.Light.prototype.clone=function(e){return void 0===e&&(e=new i.Light),i.Object3D.prototype.clone.call(this,e),e.color.copy(this.color),e},i.AmbientLight=function(e){i.Light.call(this,e)},i.AmbientLight.prototype=Object.create(i.Light.prototype),i.AmbientLight.prototype.clone=function(){var e=new i.AmbientLight;return i.Light.prototype.clone.call(this,e),e},i.AreaLight=function(e,t){i.Light.call(this,e),this.normal=new i.Vector3(0,-1,0),this.right=new i.Vector3(1,0,0),this.intensity=void 0!==t?t:1,this.width=1,this.height=1,this.constantAttenuation=1.5,this.linearAttenuation=.5,this.quadraticAttenuation=.1},i.AreaLight.prototype=Object.create(i.Light.prototype),i.DirectionalLight=function(e,t){i.Light.call(this,e),this.position.set(0,1,0),this.target=new i.Object3D,this.intensity=void 0!==t?t:1,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraRight=500,this.shadowCameraTop=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowCascade=!1,this.shadowCascadeOffset=new i.Vector3(0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,.99,.998],this.shadowCascadeFarZ=[.99,.998,1],this.shadowCascadeArray=[],this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},i.DirectionalLight.prototype=Object.create(i.Light.prototype),i.DirectionalLight.prototype.clone=function(){var e=new i.DirectionalLight;return i.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e.shadowCameraNear=this.shadowCameraNear,e.shadowCameraFar=this.shadowCameraFar,e.shadowCameraLeft=this.shadowCameraLeft,e.shadowCameraRight=this.shadowCameraRight,e.shadowCameraTop=this.shadowCameraTop,e.shadowCameraBottom=this.shadowCameraBottom,e.shadowCameraVisible=this.shadowCameraVisible,e.shadowBias=this.shadowBias,e.shadowDarkness=this.shadowDarkness,e.shadowMapWidth=this.shadowMapWidth,e.shadowMapHeight=this.shadowMapHeight,e.shadowCascade=this.shadowCascade,e.shadowCascadeOffset.copy(this.shadowCascadeOffset),e.shadowCascadeCount=this.shadowCascadeCount,e.shadowCascadeBias=this.shadowCascadeBias.slice(0),e.shadowCascadeWidth=this.shadowCascadeWidth.slice(0),e.shadowCascadeHeight=this.shadowCascadeHeight.slice(0),e.shadowCascadeNearZ=this.shadowCascadeNearZ.slice(0),e.shadowCascadeFarZ=this.shadowCascadeFarZ.slice(0),e},i.HemisphereLight=function(e,t,n){i.Light.call(this,e),this.position.set(0,100,0),this.groundColor=new i.Color(t),this.intensity=void 0!==n?n:1},i.HemisphereLight.prototype=Object.create(i.Light.prototype),i.HemisphereLight.prototype.clone=function(){var e=new i.HemisphereLight;return i.Light.prototype.clone.call(this,e),e.groundColor.copy(this.groundColor),e.intensity=this.intensity,e},i.PointLight=function(e,t,n){i.Light.call(this,e),this.intensity=void 0!==t?t:1,this.distance=void 0!==n?n:0},i.PointLight.prototype=Object.create(i.Light.prototype),i.PointLight.prototype.clone=function(){var e=new i.PointLight;return i.Light.prototype.clone.call(this,e),e.intensity=this.intensity,e.distance=this.distance,e},i.SpotLight=function(e,t,n,r,o){i.Light.call(this,e),this.position.set(0,1,0),this.target=new i.Object3D,this.intensity=void 0!==t?t:1,this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.exponent=void 0!==o?o:10,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraFov=50,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},i.SpotLight.prototype=Object.create(i.Light.prototype),i.SpotLight.prototype.clone=function(){var e=new i.SpotLight;return i.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.distance=this.distance,e.angle=this.angle,e.exponent=this.exponent,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e.shadowCameraNear=this.shadowCameraNear,e.shadowCameraFar=this.shadowCameraFar,e.shadowCameraFov=this.shadowCameraFov,e.shadowCameraVisible=this.shadowCameraVisible,e.shadowBias=this.shadowBias,e.shadowDarkness=this.shadowDarkness,e.shadowMapWidth=this.shadowMapWidth,e.shadowMapHeight=this.shadowMapHeight,e},i.Cache=function(){this.files={}},i.Cache.prototype={constructor:i.Cache,add:function(e,t){this.files[e]=t},get:function(e){return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},i.Loader=function(e){this.showStatus=e,this.statusDomElement=e?i.Loader.prototype.addStatusElement():null,this.imageLoader=new i.ImageLoader,this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},i.Loader.prototype={constructor:i.Loader,crossOrigin:void 0,addStatusElement:function(){var e=document.createElement("div");return e.style.position="absolute",e.style.right="0px",e.style.top="0px",e.style.fontSize="0.8em",e.style.textAlign="left",e.style.background="rgba(0,0,0,0.25)",e.style.color="#fff",e.style.width="120px",e.style.padding="0.5em 0.5em 0.5em 0.5em",e.style.zIndex=1e3,e.innerHTML="Loading ...",e},updateProgress:function(e){var t="Loaded ";t+=e.total?(100*e.loaded/e.total).toFixed(0)+"%":(e.loaded/1024).toFixed(2)+" KB",this.statusDomElement.innerHTML=t},extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t){for(var n=[],r=0;r<e.length;++r)n[r]=this.createMaterial(e[r],t);return n},needsTangents:function(e){for(var t=0,n=e.length;n>t;t++){var r=e[t];if(r instanceof i.ShaderMaterial)return!0}return!1},createMaterial:function(e,t){function n(e){var t=Math.log(e)/Math.LN2;return Math.pow(2,Math.round(t))}function r(e,r,o,s,c,l,u){var h,p=t+o,d=i.Loader.Handlers.get(p);if(null!==d?h=d.load(p):(h=new i.Texture,d=a.imageLoader,d.crossOrigin=a.crossOrigin,d.load(p,function(e){if(i.Math.isPowerOfTwo(e.width)===!1||i.Math.isPowerOfTwo(e.height)===!1){var t=n(e.width),r=n(e.height),o=document.createElement("canvas");o.width=t,o.height=r;var a=o.getContext("2d");a.drawImage(e,0,0,t,r),h.image=o}else h.image=e;h.needsUpdate=!0})),h.sourceFile=o,s&&(h.repeat.set(s[0],s[1]),1!==s[0]&&(h.wrapS=i.RepeatWrapping),1!==s[1]&&(h.wrapT=i.RepeatWrapping)),c&&h.offset.set(c[0],c[1]),l){var f={repeat:i.RepeatWrapping,mirror:i.MirroredRepeatWrapping};void 0!==f[l[0]]&&(h.wrapS=f[l[0]]),void 0!==f[l[1]]&&(h.wrapT=f[l[1]])}u&&(h.anisotropy=u),e[r]=h}function o(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]}var a=this,s="MeshLambertMaterial",c={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(e.shading){var l=e.shading.toLowerCase();"phong"===l?s="MeshPhongMaterial":"basic"===l&&(s="MeshBasicMaterial")}if(void 0!==e.blending&&void 0!==i[e.blending]&&(c.blending=i[e.blending]),(void 0!==e.transparent||e.opacity<1)&&(c.transparent=e.transparent),void 0!==e.depthTest&&(c.depthTest=e.depthTest),void 0!==e.depthWrite&&(c.depthWrite=e.depthWrite),void 0!==e.visible&&(c.visible=e.visible),void 0!==e.flipSided&&(c.side=i.BackSide),void 0!==e.doubleSided&&(c.side=i.DoubleSide),void 0!==e.wireframe&&(c.wireframe=e.wireframe),void 0!==e.vertexColors&&("face"===e.vertexColors?c.vertexColors=i.FaceColors:e.vertexColors&&(c.vertexColors=i.VertexColors)),e.colorDiffuse?c.color=o(e.colorDiffuse):e.DbgColor&&(c.color=e.DbgColor),e.colorSpecular&&(c.specular=o(e.colorSpecular)),e.colorAmbient&&(c.ambient=o(e.colorAmbient)),e.colorEmissive&&(c.emissive=o(e.colorEmissive)),e.transparency&&(c.opacity=e.transparency),e.specularCoef&&(c.shininess=e.specularCoef),e.mapDiffuse&&t&&r(c,"map",e.mapDiffuse,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy),e.mapLight&&t&&r(c,"lightMap",e.mapLight,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy),e.mapBump&&t&&r(c,"bumpMap",e.mapBump,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy),e.mapNormal&&t&&r(c,"normalMap",e.mapNormal,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy),e.mapSpecular&&t&&r(c,"specularMap",e.mapSpecular,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy),e.mapAlpha&&t&&r(c,"alphaMap",e.mapAlpha,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy),e.mapBumpScale&&(c.bumpScale=e.mapBumpScale),e.mapNormal){var u=i.ShaderLib.normalmap,h=i.UniformsUtils.clone(u.uniforms);h.tNormal.value=c.normalMap,e.mapNormalFactor&&h.uNormalScale.value.set(e.mapNormalFactor,e.mapNormalFactor),c.map&&(h.tDiffuse.value=c.map,h.enableDiffuse.value=!0),c.specularMap&&(h.tSpecular.value=c.specularMap,h.enableSpecular.value=!0),c.lightMap&&(h.tAO.value=c.lightMap,h.enableAO.value=!0),h.diffuse.value.setHex(c.color),h.specular.value.setHex(c.specular),h.ambient.value.setHex(c.ambient),h.shininess.value=c.shininess,void 0!==c.opacity&&(h.opacity.value=c.opacity);var p={fragmentShader:u.fragmentShader,vertexShader:u.vertexShader,uniforms:h,lights:!0,fog:!0},d=new i.ShaderMaterial(p);c.transparent&&(d.transparent=!0)}else var d=new i[s](c);return void 0!==e.DbgName&&(d.name=e.DbgName),d}},i.Loader.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=0,n=this.handlers.length;n>t;t+=2){var r=this.handlers[t],i=this.handlers[t+1];if(r.test(e))return i}return null}},i.XHRLoader=function(e){this.cache=new i.Cache,this.manager=void 0!==e?e:i.DefaultLoadingManager},i.XHRLoader.prototype={constructor:i.XHRLoader,load:function(e,t,n,r){var i=this,o=i.cache.get(e);if(void 0!==o)return void(t&&t(o));var a=new XMLHttpRequest;a.open("GET",e,!0),a.addEventListener("load",function(){i.cache.add(e,this.response),t&&t(this.response),i.manager.itemEnd(e)},!1),void 0!==n&&a.addEventListener("progress",function(e){n(e)},!1),void 0!==r&&a.addEventListener("error",function(e){r(e)},!1),void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),void 0!==this.responseType&&(a.responseType=this.responseType),a.send(null),i.manager.itemStart(e)},setResponseType:function(e){this.responseType=e},setCrossOrigin:function(e){this.crossOrigin=e}},i.ImageLoader=function(e){this.cache=new i.Cache,this.manager=void 0!==e?e:i.DefaultLoadingManager},i.ImageLoader.prototype={constructor:i.ImageLoader,load:function(e,t,n,r){var i=this,o=i.cache.get(e);if(void 0!==o)return void t(o);var a=document.createElement("img");return void 0!==t&&a.addEventListener("load",function(){i.cache.add(e,this),t(this),i.manager.itemEnd(e)},!1),void 0!==n&&a.addEventListener("progress",function(e){n(e)},!1),void 0!==r&&a.addEventListener("error",function(e){r(e)},!1),void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),a.src=e,i.manager.itemStart(e),a},setCrossOrigin:function(e){this.crossOrigin=e}},i.JSONLoader=function(e){i.Loader.call(this,e),this.withCredentials=!1},i.JSONLoader.prototype=Object.create(i.Loader.prototype),i.JSONLoader.prototype.load=function(e,t,n){n=n&&"string"==typeof n?n:this.extractUrlBase(e),this.onLoadStart(),this.loadAjaxJSON(this,e,t,n)},i.JSONLoader.prototype.loadAjaxJSON=function(e,t,n,r,i){var o=new XMLHttpRequest,a=0;o.onreadystatechange=function(){if(o.readyState===o.DONE)if(200===o.status||0===o.status){if(o.responseText){var s=JSON.parse(o.responseText);if(void 0!==s.metadata&&"scene"===s.metadata.type)return void console.error('THREE.JSONLoader: "'+t+'" seems to be a Scene. Use THREE.SceneLoader instead.');var c=e.parse(s,r);n(c.geometry,c.materials)}else console.error('THREE.JSONLoader: "'+t+'" seems to be unreachable or the file is empty.');e.onLoadComplete()}else console.error("THREE.JSONLoader: Couldn't load \""+t+'" ('+o.status+")");else o.readyState===o.LOADING?i&&(0===a&&(a=o.getResponseHeader("Content-Length")),i({total:a,loaded:o.responseText.length})):o.readyState===o.HEADERS_RECEIVED&&void 0!==i&&(a=o.getResponseHeader("Content-Length"))},o.open("GET",t,!0),o.withCredentials=this.withCredentials,o.send(null)},i.JSONLoader.prototype.parse=function(e,t){function n(t){function n(e,t){return e&1<<t}var r,o,s,c,l,u,h,p,d,f,m,v,g,y,x,_,b,w,E,M,C,S,T,R,D,A,N,P=e.faces,O=e.vertices,L=e.normals,U=e.colors,V=0;if(void 0!==e.uvs){for(r=0;r<e.uvs.length;r++)e.uvs[r].length&&V++;for(r=0;V>r;r++)a.faceVertexUvs[r]=[]}for(c=0,l=O.length;l>c;)w=new i.Vector3,w.x=O[c++]*t,w.y=O[c++]*t,w.z=O[c++]*t,a.vertices.push(w);for(c=0,l=P.length;l>c;)if(f=P[c++],m=n(f,0),v=n(f,1),g=n(f,3),y=n(f,4),x=n(f,5),_=n(f,6),b=n(f,7),m){if(M=new i.Face3,M.a=P[c],M.b=P[c+1],M.c=P[c+3],C=new i.Face3,C.a=P[c+1],C.b=P[c+2],C.c=P[c+3],c+=4,v&&(d=P[c++],M.materialIndex=d,C.materialIndex=d),s=a.faces.length,g)for(r=0;V>r;r++)for(R=e.uvs[r],a.faceVertexUvs[r][s]=[],a.faceVertexUvs[r][s+1]=[],o=0;4>o;o++)p=P[c++],A=R[2*p],N=R[2*p+1],D=new i.Vector2(A,N),2!==o&&a.faceVertexUvs[r][s].push(D),0!==o&&a.faceVertexUvs[r][s+1].push(D);if(y&&(h=3*P[c++],M.normal.set(L[h++],L[h++],L[h]),C.normal.copy(M.normal)),x)for(r=0;4>r;r++)h=3*P[c++],T=new i.Vector3(L[h++],L[h++],L[h]),2!==r&&M.vertexNormals.push(T),0!==r&&C.vertexNormals.push(T);if(_&&(u=P[c++],S=U[u],M.color.setHex(S),C.color.setHex(S)),b)for(r=0;4>r;r++)u=P[c++],S=U[u],2!==r&&M.vertexColors.push(new i.Color(S)),0!==r&&C.vertexColors.push(new i.Color(S));a.faces.push(M),a.faces.push(C)}else{if(E=new i.Face3,E.a=P[c++],E.b=P[c++],E.c=P[c++],v&&(d=P[c++],E.materialIndex=d),s=a.faces.length,g)for(r=0;V>r;r++)for(R=e.uvs[r],a.faceVertexUvs[r][s]=[],o=0;3>o;o++)p=P[c++],A=R[2*p],N=R[2*p+1],D=new i.Vector2(A,N),a.faceVertexUvs[r][s].push(D);if(y&&(h=3*P[c++],E.normal.set(L[h++],L[h++],L[h])),x)for(r=0;3>r;r++)h=3*P[c++],T=new i.Vector3(L[h++],L[h++],L[h]),E.vertexNormals.push(T);if(_&&(u=P[c++],E.color.setHex(U[u])),b)for(r=0;3>r;r++)u=P[c++],E.vertexColors.push(new i.Color(U[u]));a.faces.push(E)}}function r(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var n=0,r=e.skinWeights.length;r>n;n+=t){var o=e.skinWeights[n],s=t>1?e.skinWeights[n+1]:0,c=t>2?e.skinWeights[n+2]:0,l=t>3?e.skinWeights[n+3]:0;a.skinWeights.push(new i.Vector4(o,s,c,l))}if(e.skinIndices)for(var n=0,r=e.skinIndices.length;r>n;n+=t){var u=e.skinIndices[n],h=t>1?e.skinIndices[n+1]:0,p=t>2?e.skinIndices[n+2]:0,d=t>3?e.skinIndices[n+3]:0;a.skinIndices.push(new i.Vector4(u,h,p,d))}a.bones=e.bones,a.bones&&a.bones.length>0&&(a.skinWeights.length!==a.skinIndices.length||a.skinIndices.length!==a.vertices.length)&&console.warn("When skinning, number of vertices ("+a.vertices.length+"), skinIndices ("+a.skinIndices.length+"), and skinWeights ("+a.skinWeights.length+") should match."),a.animation=e.animation,a.animations=e.animations}function o(t){if(void 0!==e.morphTargets){var n,r,o,s,c,l;for(n=0,r=e.morphTargets.length;r>n;n++)for(a.morphTargets[n]={},a.morphTargets[n].name=e.morphTargets[n].name,a.morphTargets[n].vertices=[],c=a.morphTargets[n].vertices,l=e.morphTargets[n].vertices,o=0,s=l.length;s>o;o+=3){var u=new i.Vector3;u.x=l[o]*t,u.y=l[o+1]*t,u.z=l[o+2]*t,c.push(u)}}if(void 0!==e.morphColors){var n,r,h,p,d,f,m;for(n=0,r=e.morphColors.length;r>n;n++)for(a.morphColors[n]={},a.morphColors[n].name=e.morphColors[n].name,a.morphColors[n].colors=[],d=a.morphColors[n].colors,f=e.morphColors[n].colors,h=0,p=f.length;p>h;h+=3)m=new i.Color(16755200),m.setRGB(f[h],f[h+1],f[h+2]),d.push(m)}}var a=new i.Geometry,s=void 0!==e.scale?1/e.scale:1;if(n(s),r(),o(s),a.computeFaceNormals(),a.computeBoundingSphere(),void 0===e.materials||0===e.materials.length)return{geometry:a};var c=this.initMaterials(e.materials,t);return this.needsTangents(c)&&a.computeTangents(),{geometry:a,materials:c}},i.LoadingManager=function(e,t,n){var r=this,i=0,o=0;this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(){o++},this.itemEnd=function(e){i++,void 0!==r.onProgress&&r.onProgress(e,i,o),i===o&&void 0!==r.onLoad&&r.onLoad()}},i.DefaultLoadingManager=new i.LoadingManager,i.BufferGeometryLoader=function(e){this.manager=void 0!==e?e:i.DefaultLoadingManager},i.BufferGeometryLoader.prototype={constructor:i.BufferGeometryLoader,load:function(e,t,n,r){var o=this,a=new i.XHRLoader;a.setCrossOrigin(this.crossOrigin),a.load(e,function(e){t(o.parse(JSON.parse(e)))},n,r)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new i.BufferGeometry,n=e.attributes;for(var o in n){var a=n[o];t.attributes[o]={itemSize:a.itemSize,array:new r[a.type](a.array)}}var s=e.offsets;void 0!==s&&(t.offsets=JSON.parse(JSON.stringify(s)));var c=e.boundingSphere;return void 0!==c&&(t.boundingSphere=new i.Sphere((new i.Vector3).fromArray(void 0!==c.center?c.center:[0,0,0]),c.radius)),t}},i.MaterialLoader=function(e){this.manager=void 0!==e?e:i.DefaultLoadingManager},i.MaterialLoader.prototype={constructor:i.MaterialLoader,load:function(e,t,n,r){var o=this,a=new i.XHRLoader;a.setCrossOrigin(this.crossOrigin),a.load(e,function(e){t(o.parse(JSON.parse(e)))},n,r)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new i[e.type];if(void 0!==e.color&&t.color.setHex(e.color),void 0!==e.ambient&&t.ambient.setHex(e.ambient),void 0!==e.emissive&&t.emissive.setHex(e.emissive),void 0!==e.specular&&t.specular.setHex(e.specular),void 0!==e.shininess&&(t.shininess=e.shininess),void 0!==e.uniforms&&(t.uniforms=e.uniforms),void 0!==e.vertexShader&&(t.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(t.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(t.vertexColors=e.vertexColors),void 0!==e.blending&&(t.blending=e.blending),void 0!==e.side&&(t.side=e.side),void 0!==e.opacity&&(t.opacity=e.opacity),void 0!==e.transparent&&(t.transparent=e.transparent),void 0!==e.wireframe&&(t.wireframe=e.wireframe),void 0!==e.materials)for(var n=0,r=e.materials.length;r>n;n++)t.materials.push(this.parse(e.materials[n]));return t}},i.ObjectLoader=function(e){this.manager=void 0!==e?e:i.DefaultLoadingManager},i.ObjectLoader.prototype={constructor:i.ObjectLoader,load:function(e,t,n,r){var o=this,a=new i.XHRLoader(o.manager);a.setCrossOrigin(this.crossOrigin),a.load(e,function(e){t(o.parse(JSON.parse(e)))},n,r)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=this.parseGeometries(e.geometries),n=this.parseMaterials(e.materials),r=this.parseObject(e.object,t,n);return r},parseGeometries:function(e){var t={};if(void 0!==e)for(var n=new i.JSONLoader,r=new i.BufferGeometryLoader,o=0,a=e.length;a>o;o++){var s,c=e[o];switch(c.type){case"PlaneGeometry":s=new i.PlaneGeometry(c.width,c.height,c.widthSegments,c.heightSegments);break;case"BoxGeometry":case"CubeGeometry":s=new i.BoxGeometry(c.width,c.height,c.depth,c.widthSegments,c.heightSegments,c.depthSegments);break;case"CircleGeometry":s=new i.CircleGeometry(c.radius,c.segments);break;case"CylinderGeometry":s=new i.CylinderGeometry(c.radiusTop,c.radiusBottom,c.height,c.radialSegments,c.heightSegments,c.openEnded);break;case"SphereGeometry":s=new i.SphereGeometry(c.radius,c.widthSegments,c.heightSegments,c.phiStart,c.phiLength,c.thetaStart,c.thetaLength);break;case"IcosahedronGeometry":s=new i.IcosahedronGeometry(c.radius,c.detail);break;case"TorusGeometry":s=new i.TorusGeometry(c.radius,c.tube,c.radialSegments,c.tubularSegments,c.arc);break;case"TorusKnotGeometry":s=new i.TorusKnotGeometry(c.radius,c.tube,c.radialSegments,c.tubularSegments,c.p,c.q,c.heightScale);break;case"BufferGeometry":s=r.parse(c.data);break;case"Geometry":s=n.parse(c.data).geometry}s.uuid=c.uuid,void 0!==c.name&&(s.name=c.name),t[c.uuid]=s}return t},parseMaterials:function(e){var t={};if(void 0!==e)for(var n=new i.MaterialLoader,r=0,o=e.length;o>r;r++){var a=e[r],s=n.parse(a);s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),t[a.uuid]=s}return t},parseObject:function(){var e=new i.Matrix4;return function(t,n,r){var o;switch(t.type){case"Scene":o=new i.Scene;break;case"PerspectiveCamera":o=new i.PerspectiveCamera(t.fov,t.aspect,t.near,t.far);break;case"OrthographicCamera":o=new i.OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":o=new i.AmbientLight(t.color);break;case"DirectionalLight":o=new i.DirectionalLight(t.color,t.intensity);break;case"PointLight":o=new i.PointLight(t.color,t.intensity,t.distance);break;case"SpotLight":o=new i.SpotLight(t.color,t.intensity,t.distance,t.angle,t.exponent);break;case"HemisphereLight":o=new i.HemisphereLight(t.color,t.groundColor,t.intensity);break;case"Mesh":var a=n[t.geometry],s=r[t.material];void 0===a&&console.error("THREE.ObjectLoader: Undefined geometry "+t.geometry),void 0===s&&console.error("THREE.ObjectLoader: Undefined material "+t.material),o=new i.Mesh(a,s);break;case"Sprite":var s=r[t.material];void 0===s&&console.error("THREE.ObjectLoader: Undefined material "+t.material),o=new i.Sprite(s);break;default:o=new i.Object3D}if(o.uuid=t.uuid,void 0!==t.name&&(o.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(o.position,o.quaternion,o.scale)):(void 0!==t.position&&o.position.fromArray(t.position),void 0!==t.rotation&&o.rotation.fromArray(t.rotation),void 0!==t.scale&&o.scale.fromArray(t.scale)),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.children)for(var c in t.children)o.add(this.parseObject(t.children[c],n,r));return o}}()},i.TextureLoader=function(e){this.manager=void 0!==e?e:i.DefaultLoadingManager},i.TextureLoader.prototype={constructor:i.TextureLoader,load:function(e,t,n,r){var o=this,a=new i.ImageLoader(o.manager);a.setCrossOrigin(this.crossOrigin),a.load(e,function(e){var n=new i.Texture(e);n.needsUpdate=!0,void 0!==t&&t(n)},n,r)},setCrossOrigin:function(e){this.crossOrigin=e}},i.Material=function(){this.id=i.MaterialIdCount++,this.uuid=i.Math.generateUUID(),this.name="",this.side=i.FrontSide,this.opacity=1,this.transparent=!1,this.blending=i.NormalBlending,this.blendSrc=i.SrcAlphaFactor,this.blendDst=i.OneMinusSrcAlphaFactor,this.blendEquation=i.AddEquation,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.overdraw=0,this.visible=!0,this.needsUpdate=!0},i.Material.prototype={constructor:i.Material,setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){if(t in this){var r=this[t];r instanceof i.Color?r.set(n):r instanceof i.Vector3&&n instanceof i.Vector3?r.copy(n):this[t]="overdraw"==t?Number(n):n}}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},clone:function(e){return void 0===e&&(e=new i.Material),e.name=this.name,e.side=this.side,e.opacity=this.opacity,e.transparent=this.transparent,e.blending=this.blending,e.blendSrc=this.blendSrc,e.blendDst=this.blendDst,e.blendEquation=this.blendEquation,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.polygonOffset=this.polygonOffset,e.polygonOffsetFactor=this.polygonOffsetFactor,e.polygonOffsetUnits=this.polygonOffsetUnits,e.alphaTest=this.alphaTest,e.overdraw=this.overdraw,e.visible=this.visible,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},i.EventDispatcher.prototype.apply(i.Material.prototype),i.MaterialIdCount=0,i.LineBasicMaterial=function(e){i.Material.call(this),this.color=new i.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=i.NoColors,this.fog=!0,this.setValues(e)},i.LineBasicMaterial.prototype=Object.create(i.Material.prototype),i.LineBasicMaterial.prototype.clone=function(){var e=new i.LineBasicMaterial;return i.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.linecap=this.linecap,e.linejoin=this.linejoin,e.vertexColors=this.vertexColors,e.fog=this.fog,e},i.LineDashedMaterial=function(e){i.Material.call(this),this.color=new i.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(e)},i.LineDashedMaterial.prototype=Object.create(i.Material.prototype),i.LineDashedMaterial.prototype.clone=function(){var e=new i.LineDashedMaterial;return i.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.scale=this.scale,e.dashSize=this.dashSize,e.gapSize=this.gapSize,e.vertexColors=this.vertexColors,e.fog=this.fog,e},i.MeshBasicMaterial=function(e){i.Material.call(this),this.color=new i.Color(16777215),this.map=null,this.lightMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=i.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=i.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=i.NoColors,this.skinning=!1,this.morphTargets=!1,this.setValues(e)},i.MeshBasicMaterial.prototype=Object.create(i.Material.prototype),i.MeshBasicMaterial.prototype.clone=function(){var e=new i.MeshBasicMaterial;return i.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e},i.MeshLambertMaterial=function(e){i.Material.call(this),this.color=new i.Color(16777215),this.ambient=new i.Color(16777215),this.emissive=new i.Color(0),this.wrapAround=!1,this.wrapRGB=new i.Vector3(1,1,1),this.map=null,this.lightMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=i.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=i.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=i.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},i.MeshLambertMaterial.prototype=Object.create(i.Material.prototype),i.MeshLambertMaterial.prototype.clone=function(){var e=new i.MeshLambertMaterial;return i.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},i.MeshPhongMaterial=function(e){i.Material.call(this),this.color=new i.Color(16777215),this.ambient=new i.Color(16777215),this.emissive=new i.Color(0),this.specular=new i.Color(1118481),this.shininess=30,this.metal=!1,this.wrapAround=!1,this.wrapRGB=new i.Vector3(1,1,1),this.map=null,this.lightMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i.Vector2(1,1),this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=i.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=i.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=i.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},i.MeshPhongMaterial.prototype=Object.create(i.Material.prototype),i.MeshPhongMaterial.prototype.clone=function(){var e=new i.MeshPhongMaterial;return i.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.specular.copy(this.specular),e.shininess=this.shininess,e.metal=this.metal,e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.bumpMap=this.bumpMap,e.bumpScale=this.bumpScale,e.normalMap=this.normalMap,e.normalScale.copy(this.normalScale),e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},i.MeshDepthMaterial=function(e){i.Material.call(this),this.morphTargets=!1,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)},i.MeshDepthMaterial.prototype=Object.create(i.Material.prototype),i.MeshDepthMaterial.prototype.clone=function(){var e=new i.MeshDepthMaterial;return i.Material.prototype.clone.call(this,e),e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},i.MeshNormalMaterial=function(e){i.Material.call(this,e),this.shading=i.FlatShading,this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(e)},i.MeshNormalMaterial.prototype=Object.create(i.Material.prototype),i.MeshNormalMaterial.prototype.clone=function(){var e=new i.MeshNormalMaterial;return i.Material.prototype.clone.call(this,e),e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},i.MeshFaceMaterial=function(e){this.materials=e instanceof Array?e:[]},i.MeshFaceMaterial.prototype.clone=function(){for(var e=new i.MeshFaceMaterial,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e},i.PointCloudMaterial=function(e){i.Material.call(this),this.color=new i.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=i.NoColors,this.fog=!0,this.setValues(e)},i.PointCloudMaterial.prototype=Object.create(i.Material.prototype),i.PointCloudMaterial.prototype.clone=function(){var e=new i.PointCloudMaterial;return i.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.size=this.size,e.sizeAttenuation=this.sizeAttenuation,e.vertexColors=this.vertexColors,e.fog=this.fog,e},i.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial."),new i.PointCloudMaterial(e)},i.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial."),new i.PointCloudMaterial(e)},i.ShaderMaterial=function(e){i.Material.call(this),this.defines={},this.uniforms={},this.attributes=null,this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.shading=i.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.vertexColors=i.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.setValues(e)},i.ShaderMaterial.prototype=Object.create(i.Material.prototype),i.ShaderMaterial.prototype.clone=function(){var e=new i.ShaderMaterial;return i.Material.prototype.clone.call(this,e),e.fragmentShader=this.fragmentShader,e.vertexShader=this.vertexShader,e.uniforms=i.UniformsUtils.clone(this.uniforms),e.attributes=this.attributes,e.defines=this.defines,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.fog=this.fog,e.lights=this.lights,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e
},i.RawShaderMaterial=function(e){i.ShaderMaterial.call(this,e)},i.RawShaderMaterial.prototype=Object.create(i.ShaderMaterial.prototype),i.RawShaderMaterial.prototype.clone=function(){var e=new i.RawShaderMaterial;return i.ShaderMaterial.prototype.clone.call(this,e),e},i.SpriteMaterial=function(e){i.Material.call(this),this.color=new i.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(e)},i.SpriteMaterial.prototype=Object.create(i.Material.prototype),i.SpriteMaterial.prototype.clone=function(){var e=new i.SpriteMaterial;return i.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.rotation=this.rotation,e.fog=this.fog,e},i.SpriteCanvasMaterial=function(e){i.Material.call(this),this.color=new i.Color(16777215),this.program=function(){},this.setValues(e)},i.SpriteCanvasMaterial.prototype=Object.create(i.Material.prototype),i.SpriteCanvasMaterial.prototype.clone=function(){var e=new i.SpriteCanvasMaterial;return i.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.program=this.program,e},i.ParticleCanvasMaterial=i.SpriteCanvasMaterial,i.Texture=function(e,t,n,r,o,a,s,c,l){this.id=i.TextureIdCount++,this.uuid=i.Math.generateUUID(),this.name="",this.image=void 0!==e?e:i.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:i.Texture.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:i.ClampToEdgeWrapping,this.wrapT=void 0!==r?r:i.ClampToEdgeWrapping,this.magFilter=void 0!==o?o:i.LinearFilter,this.minFilter=void 0!==a?a:i.LinearMipMapLinearFilter,this.anisotropy=void 0!==l?l:1,this.format=void 0!==s?s:i.RGBAFormat,this.type=void 0!==c?c:i.UnsignedByteType,this.offset=new i.Vector2(0,0),this.repeat=new i.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this._needsUpdate=!1,this.onUpdate=null},i.Texture.DEFAULT_IMAGE=void 0,i.Texture.DEFAULT_MAPPING=new i.UVMapping,i.Texture.prototype={constructor:i.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){e===!0&&this.update(),this._needsUpdate=e},clone:function(e){return void 0===e&&(e=new i.Texture),e.image=this.image,e.mipmaps=this.mipmaps.slice(0),e.mapping=this.mapping,e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.format=this.format,e.type=this.type,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.generateMipmaps=this.generateMipmaps,e.premultiplyAlpha=this.premultiplyAlpha,e.flipY=this.flipY,e.unpackAlignment=this.unpackAlignment,e},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},i.EventDispatcher.prototype.apply(i.Texture.prototype),i.TextureIdCount=0,i.CubeTexture=function(e,t,n,r,o,a,s,c,l){i.Texture.call(this,e,t,n,r,o,a,s,c,l),this.images=e},i.CubeTexture.prototype=Object.create(i.Texture.prototype),i.CubeTexture.clone=function(e){return void 0===e&&(e=new i.CubeTexture),i.Texture.prototype.clone.call(this,e),e.images=this.images,e},i.CompressedTexture=function(e,t,n,r,o,a,s,c,l,u,h){i.Texture.call(this,null,a,s,c,l,u,r,o,h),this.image={width:t,height:n},this.mipmaps=e,this.generateMipmaps=!1},i.CompressedTexture.prototype=Object.create(i.Texture.prototype),i.CompressedTexture.prototype.clone=function(){var e=new i.CompressedTexture;return i.Texture.prototype.clone.call(this,e),e},i.DataTexture=function(e,t,n,r,o,a,s,c,l,u,h){i.Texture.call(this,null,a,s,c,l,u,r,o,h),this.image={data:e,width:t,height:n}},i.DataTexture.prototype=Object.create(i.Texture.prototype),i.DataTexture.prototype.clone=function(){var e=new i.DataTexture;return i.Texture.prototype.clone.call(this,e),e},i.PointCloud=function(e,t){i.Object3D.call(this),this.geometry=void 0!==e?e:new i.Geometry,this.material=void 0!==t?t:new i.PointCloudMaterial({color:16777215*Math.random()}),this.sortParticles=!1},i.PointCloud.prototype=Object.create(i.Object3D.prototype),i.PointCloud.prototype.raycast=function(){var e=new i.Matrix4,t=new i.Ray;return function(n,r){var o=this,a=o.geometry,s=n.params.PointCloud.threshold;if(e.getInverse(this.matrixWorld),t.copy(n.ray).applyMatrix4(e),null===a.boundingBox||t.isIntersectionBox(a.boundingBox)!==!1){var c=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=new i.Vector3,u=function(e,i){var a=t.distanceToPoint(e);if(c>a){var s=t.closestPointToPoint(e);s.applyMatrix4(o.matrixWorld);var l=n.ray.origin.distanceTo(s);r.push({distance:l,distanceToRay:a,point:s.clone(),index:i,face:null,object:o})}};if(a instanceof i.BufferGeometry){var h=a.attributes,p=h.position.array;if(void 0!==h.index){var d=h.index.array,f=a.offsets;if(0===f.length){var m={start:0,count:d.length,index:0};f=[m]}for(var v=0,g=f.length;g>v;++v)for(var y=f[v].start,x=f[v].count,_=f[v].index,b=y,w=y+x;w>b;b++){var E=_+d[b];l.set(p[3*E],p[3*E+1],p[3*E+2]),u(l,E)}}else for(var M=p.length/3,b=0;M>b;b++)l.set(p[3*b],p[3*b+1],p[3*b+2]),u(l,b)}else for(var C=this.geometry.vertices,b=0;b<C.length;b++)u(C[b],b)}}}(),i.PointCloud.prototype.clone=function(e){return void 0===e&&(e=new i.PointCloud(this.geometry,this.material)),e.sortParticles=this.sortParticles,i.Object3D.prototype.clone.call(this,e),e},i.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud."),new i.PointCloud(e,t)},i.Line=function(e,t,n){i.Object3D.call(this),this.geometry=void 0!==e?e:new i.Geometry,this.material=void 0!==t?t:new i.LineBasicMaterial({color:16777215*Math.random()}),this.type=void 0!==n?n:i.LineStrip},i.LineStrip=0,i.LinePieces=1,i.Line.prototype=Object.create(i.Object3D.prototype),i.Line.prototype.raycast=function(){var e=new i.Matrix4,t=new i.Ray,n=new i.Sphere;return function(r,o){var a=r.linePrecision,s=a*a,c=this.geometry;if(null===c.boundingSphere&&c.computeBoundingSphere(),n.copy(c.boundingSphere),n.applyMatrix4(this.matrixWorld),r.ray.isIntersectionSphere(n)!==!1&&(e.getInverse(this.matrixWorld),t.copy(r.ray).applyMatrix4(e),c instanceof i.Geometry))for(var l=c.vertices,u=l.length,h=new i.Vector3,p=new i.Vector3,d=this.type===i.LineStrip?1:2,f=0;u-1>f;f+=d){var m=t.distanceSqToSegment(l[f],l[f+1],p,h);if(!(m>s)){var v=t.origin.distanceTo(p);v<r.near||v>r.far||o.push({distance:v,point:h.clone().applyMatrix4(this.matrixWorld),face:null,faceIndex:null,object:this})}}}}(),i.Line.prototype.clone=function(e){return void 0===e&&(e=new i.Line(this.geometry,this.material,this.type)),i.Object3D.prototype.clone.call(this,e),e},i.Mesh=function(e,t){i.Object3D.call(this),this.geometry=void 0!==e?e:new i.Geometry,this.material=void 0!==t?t:new i.MeshBasicMaterial({color:16777215*Math.random()}),this.updateMorphTargets()},i.Mesh.prototype=Object.create(i.Object3D.prototype),i.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&this.geometry.morphTargets.length>0){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,t=this.geometry.morphTargets.length;t>e;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[e].name]=e}},i.Mesh.prototype.getMorphTargetIndexByName=function(e){return void 0!==this.morphTargetDictionary[e]?this.morphTargetDictionary[e]:(console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+e+" does not exist. Returning 0."),0)},i.Mesh.prototype.raycast=function(){var e=new i.Matrix4,t=new i.Ray,n=new i.Sphere,r=new i.Vector3,o=new i.Vector3,a=new i.Vector3;return function(s,c){var l=this.geometry;if(null===l.boundingSphere&&l.computeBoundingSphere(),n.copy(l.boundingSphere),n.applyMatrix4(this.matrixWorld),s.ray.isIntersectionSphere(n)!==!1&&(e.getInverse(this.matrixWorld),t.copy(s.ray).applyMatrix4(e),null===l.boundingBox||t.isIntersectionBox(l.boundingBox)!==!1))if(l instanceof i.BufferGeometry){var u=this.material;if(void 0===u)return;var h,p,d,f=l.attributes,m=s.precision;if(void 0!==f.index){var v=f.index.array,g=f.position.array,y=l.offsets;0===y.length&&(y=[{start:0,count:v.length,index:0}]);for(var x=0,_=y.length;_>x;++x)for(var b=y[x].start,w=y[x].count,E=y[x].index,M=b,C=b+w;C>M;M+=3){if(h=E+v[M],p=E+v[M+1],d=E+v[M+2],r.set(g[3*h],g[3*h+1],g[3*h+2]),o.set(g[3*p],g[3*p+1],g[3*p+2]),a.set(g[3*d],g[3*d+1],g[3*d+2]),u.side===i.BackSide)var S=t.intersectTriangle(a,o,r,!0);else var S=t.intersectTriangle(r,o,a,u.side!==i.DoubleSide);if(null!==S){S.applyMatrix4(this.matrixWorld);var T=s.ray.origin.distanceTo(S);m>T||T<s.near||T>s.far||c.push({distance:T,point:S,indices:[h,p,d],face:null,faceIndex:null,object:this})}}}else for(var g=f.position.array,M=0,R=0,C=g.length;C>M;M+=3,R+=9){if(h=M,p=M+1,d=M+2,r.set(g[R],g[R+1],g[R+2]),o.set(g[R+3],g[R+4],g[R+5]),a.set(g[R+6],g[R+7],g[R+8]),u.side===i.BackSide)var S=t.intersectTriangle(a,o,r,!0);else var S=t.intersectTriangle(r,o,a,u.side!==i.DoubleSide);if(null!==S){S.applyMatrix4(this.matrixWorld);var T=s.ray.origin.distanceTo(S);m>T||T<s.near||T>s.far||c.push({distance:T,point:S,indices:[h,p,d],face:null,faceIndex:null,object:this})}}}else if(l instanceof i.Geometry)for(var h,p,d,D=this.material instanceof i.MeshFaceMaterial,A=D===!0?this.material.materials:null,m=s.precision,N=l.vertices,P=0,O=l.faces.length;O>P;P++){var L=l.faces[P],u=D===!0?A[L.materialIndex]:this.material;if(void 0!==u){if(h=N[L.a],p=N[L.b],d=N[L.c],u.morphTargets===!0){var U=l.morphTargets,V=this.morphTargetInfluences;r.set(0,0,0),o.set(0,0,0),a.set(0,0,0);for(var k=0,F=U.length;F>k;k++){var I=V[k];if(0!==I){var B=U[k].vertices;r.x+=(B[L.a].x-h.x)*I,r.y+=(B[L.a].y-h.y)*I,r.z+=(B[L.a].z-h.z)*I,o.x+=(B[L.b].x-p.x)*I,o.y+=(B[L.b].y-p.y)*I,o.z+=(B[L.b].z-p.z)*I,a.x+=(B[L.c].x-d.x)*I,a.y+=(B[L.c].y-d.y)*I,a.z+=(B[L.c].z-d.z)*I}}r.add(h),o.add(p),a.add(d),h=r,p=o,d=a}if(u.side===i.BackSide)var S=t.intersectTriangle(d,p,h,!0);else var S=t.intersectTriangle(h,p,d,u.side!==i.DoubleSide);if(null!==S){S.applyMatrix4(this.matrixWorld);var T=s.ray.origin.distanceTo(S);m>T||T<s.near||T>s.far||c.push({distance:T,point:S,face:L,faceIndex:P,object:this})}}}}}(),i.Mesh.prototype.clone=function(e,t){return void 0===e&&(e=new i.Mesh(this.geometry,this.material)),i.Object3D.prototype.clone.call(this,e,t),e},i.Bone=function(e){i.Object3D.call(this),this.skin=e,this.accumulatedRotWeight=0,this.accumulatedPosWeight=0,this.accumulatedSclWeight=0},i.Bone.prototype=Object.create(i.Object3D.prototype),i.Bone.prototype.updateMatrixWorld=function(e){i.Object3D.prototype.updateMatrixWorld.call(this,e),this.accumulatedRotWeight=0,this.accumulatedPosWeight=0,this.accumulatedSclWeight=0},i.Skeleton=function(e,t,n){if(this.useVertexTexture=void 0!==n?n:!0,this.identityMatrix=new i.Matrix4,e=e||[],this.bones=e.slice(0),this.useVertexTexture){var r;r=this.bones.length>256?64:this.bones.length>64?32:this.bones.length>16?16:8,this.boneTextureWidth=r,this.boneTextureHeight=r,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new i.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,i.RGBAFormat,i.FloatType),this.boneTexture.minFilter=i.NearestFilter,this.boneTexture.magFilter=i.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var o=0,a=this.bones.length;a>o;o++)this.boneInverses.push(new i.Matrix4)}},i.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var e=0,t=this.bones.length;t>e;e++){var n=new i.Matrix4;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},i.Skeleton.prototype.pose=function(){for(var e,t=0,n=this.bones.length;n>t;t++)e=this.bones[t],e&&e.matrixWorld.getInverse(this.boneInverses[t]);for(var t=0,n=this.bones.length;n>t;t++)e=this.bones[t],e&&(e.parent?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},i.Skeleton.prototype.update=function(){for(var e=new i.Matrix4,t=0,n=this.bones.length;n>t;t++){var r=this.bones[t]?this.bones[t].matrixWorld:this.identityMatrix;e.multiplyMatrices(r,this.boneInverses[t]),e.flattenToArrayOffset(this.boneMatrices,16*t)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)},i.SkinnedMesh=function(e,t,n){i.Mesh.call(this,e,t),this.bindMode="attached",this.bindMatrix=new i.Matrix4,this.bindMatrixInverse=new i.Matrix4;var r=[];if(this.geometry&&void 0!==this.geometry.bones){for(var o,a,s,c,l,u=0,h=this.geometry.bones.length;h>u;++u)a=this.geometry.bones[u],s=a.pos,c=a.rotq,l=a.scl,o=new i.Bone(this),r.push(o),o.name=a.name,o.position.set(s[0],s[1],s[2]),o.quaternion.set(c[0],c[1],c[2],c[3]),void 0!==l?o.scale.set(l[0],l[1],l[2]):o.scale.set(1,1,1);for(var u=0,h=this.geometry.bones.length;h>u;++u)a=this.geometry.bones[u],-1!==a.parent?r[a.parent].add(r[u]):this.add(r[u])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new i.Skeleton(r,void 0,n))},i.SkinnedMesh.prototype=Object.create(i.Mesh.prototype),i.SkinnedMesh.prototype.bind=function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},i.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()},i.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof i.Geometry)for(var e=0;e<this.geometry.skinIndices.length;e++){var t=this.geometry.skinWeights[e],n=1/t.lengthManhattan();1/0!==n?t.multiplyScalar(n):t.set(1)}},i.SkinnedMesh.prototype.updateMatrixWorld=function(){i.Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unreckognized bindMode: "+this.bindMode)},i.SkinnedMesh.prototype.clone=function(e){return void 0===e&&(e=new i.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)),i.Mesh.prototype.clone.call(this,e),e},i.MorphAnimMesh=function(e,t){i.Mesh.call(this,e,t),this.duration=1e3,this.mirroredLoop=!1,this.time=0,this.lastKeyframe=0,this.currentKeyframe=0,this.direction=1,this.directionBackwards=!1,this.setFrameRange(0,this.geometry.morphTargets.length-1)},i.MorphAnimMesh.prototype=Object.create(i.Mesh.prototype),i.MorphAnimMesh.prototype.setFrameRange=function(e,t){this.startKeyframe=e,this.endKeyframe=t,this.length=this.endKeyframe-this.startKeyframe+1},i.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1,this.directionBackwards=!1},i.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1,this.directionBackwards=!0},i.MorphAnimMesh.prototype.parseAnimations=function(){var e=this.geometry;e.animations||(e.animations={});for(var t,n=e.animations,r=/([a-z]+)_?(\d+)/,i=0,o=e.morphTargets.length;o>i;i++){var a=e.morphTargets[i],s=a.name.match(r);if(s&&s.length>1){{var c=s[1];s[2]}n[c]||(n[c]={start:1/0,end:-1/0});var l=n[c];i<l.start&&(l.start=i),i>l.end&&(l.end=i),t||(t=c)}}e.firstAnimation=t},i.MorphAnimMesh.prototype.setAnimationLabel=function(e,t,n){this.geometry.animations||(this.geometry.animations={}),this.geometry.animations[e]={start:t,end:n}},i.MorphAnimMesh.prototype.playAnimation=function(e,t){var n=this.geometry.animations[e];n?(this.setFrameRange(n.start,n.end),this.duration=1e3*((n.end-n.start)/t),this.time=0):console.warn("animation["+e+"] undefined")},i.MorphAnimMesh.prototype.updateAnimation=function(e){var t=this.duration/this.length;this.time+=this.direction*e,this.mirroredLoop?(this.time>this.duration||this.time<0)&&(this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),this.time<0&&(this.time=0,this.directionBackwards=!1)):(this.time=this.time%this.duration,this.time<0&&(this.time+=this.duration));var n=this.startKeyframe+i.Math.clamp(Math.floor(this.time/t),0,this.length-1);n!==this.currentKeyframe&&(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[n]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=n);var r=this.time%t/t;this.directionBackwards&&(r=1-r),this.morphTargetInfluences[this.currentKeyframe]=r,this.morphTargetInfluences[this.lastKeyframe]=1-r},i.MorphAnimMesh.prototype.interpolateTargets=function(e,t,n){for(var r=this.morphTargetInfluences,i=0,o=r.length;o>i;i++)r[i]=0;e>-1&&(r[e]=1-n),t>-1&&(r[t]=n)},i.MorphAnimMesh.prototype.clone=function(e){return void 0===e&&(e=new i.MorphAnimMesh(this.geometry,this.material)),e.duration=this.duration,e.mirroredLoop=this.mirroredLoop,e.time=this.time,e.lastKeyframe=this.lastKeyframe,e.currentKeyframe=this.currentKeyframe,e.direction=this.direction,e.directionBackwards=this.directionBackwards,i.Mesh.prototype.clone.call(this,e),e},i.LOD=function(){i.Object3D.call(this),this.objects=[]},i.LOD.prototype=Object.create(i.Object3D.prototype),i.LOD.prototype.addLevel=function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=0;n<this.objects.length&&!(t<this.objects[n].distance);n++);this.objects.splice(n,0,{distance:t,object:e}),this.add(e)},i.LOD.prototype.getObjectForDistance=function(e){for(var t=1,n=this.objects.length;n>t&&!(e<this.objects[t].distance);t++);return this.objects[t-1].object},i.LOD.prototype.raycast=function(){var e=new i.Vector3;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(t,n)}}(),i.LOD.prototype.update=function(){var e=new i.Vector3,t=new i.Vector3;return function(n){if(this.objects.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var r=e.distanceTo(t);this.objects[0].object.visible=!0;for(var i=1,o=this.objects.length;o>i&&r>=this.objects[i].distance;i++)this.objects[i-1].object.visible=!1,this.objects[i].object.visible=!0;for(;o>i;i++)this.objects[i].object.visible=!1}}}(),i.LOD.prototype.clone=function(e){void 0===e&&(e=new i.LOD),i.Object3D.prototype.clone.call(this,e);for(var t=0,n=this.objects.length;n>t;t++){var r=this.objects[t].object.clone();r.visible=0===t,e.addLevel(r,this.objects[t].distance)}return e},i.Sprite=function(){var e=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0]),t=new i.BufferGeometry;return t.addAttribute("position",new i.BufferAttribute(e,3)),function(e){i.Object3D.call(this),this.geometry=t,this.material=void 0!==e?e:new i.SpriteMaterial}}(),i.Sprite.prototype=Object.create(i.Object3D.prototype),i.Sprite.prototype.raycast=function(){var e=new i.Vector3;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.distanceToPoint(e);r>this.scale.x||n.push({distance:r,point:this.position,face:null,object:this})}}(),i.Sprite.prototype.updateMatrix=function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},i.Sprite.prototype.clone=function(e){return void 0===e&&(e=new i.Sprite(this.material)),i.Object3D.prototype.clone.call(this,e),e},i.Particle=i.Sprite,i.Scene=function(){i.Object3D.call(this),this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,this.matrixAutoUpdate=!1,this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]},i.Scene.prototype=Object.create(i.Object3D.prototype),i.Scene.prototype.__addObject=function(e){if(e instanceof i.Light)-1===this.__lights.indexOf(e)&&this.__lights.push(e),e.target&&void 0===e.target.parent&&this.add(e.target);else if(!(e instanceof i.Camera||e instanceof i.Bone)){this.__objectsAdded.push(e);var t=this.__objectsRemoved.indexOf(e);-1!==t&&this.__objectsRemoved.splice(t,1)}this.dispatchEvent({type:"objectAdded",object:e}),e.dispatchEvent({type:"addedToScene",scene:this});for(var n=0;n<e.children.length;n++)this.__addObject(e.children[n])},i.Scene.prototype.__removeObject=function(e){if(e instanceof i.Light){var t=this.__lights.indexOf(e);if(-1!==t&&this.__lights.splice(t,1),e.shadowCascadeArray)for(var n=0;n<e.shadowCascadeArray.length;n++)this.__removeObject(e.shadowCascadeArray[n])}else if(!(e instanceof i.Camera)){this.__objectsRemoved.push(e);var t=this.__objectsAdded.indexOf(e);-1!==t&&this.__objectsAdded.splice(t,1)}this.dispatchEvent({type:"objectRemoved",object:e}),e.dispatchEvent({type:"removedFromScene",scene:this});for(var r=0;r<e.children.length;r++)this.__removeObject(e.children[r])},i.Scene.prototype.clone=function(e){return void 0===e&&(e=new i.Scene),i.Object3D.prototype.clone.call(this,e),null!==this.fog&&(e.fog=this.fog.clone()),null!==this.overrideMaterial&&(e.overrideMaterial=this.overrideMaterial.clone()),e.autoUpdate=this.autoUpdate,e.matrixAutoUpdate=this.matrixAutoUpdate,e},i.Fog=function(e,t,n){this.name="",this.color=new i.Color(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3},i.Fog.prototype.clone=function(){return new i.Fog(this.color.getHex(),this.near,this.far)},i.FogExp2=function(e,t){this.name="",this.color=new i.Color(e),this.density=void 0!==t?t:25e-5},i.FogExp2.prototype.clone=function(){return new i.FogExp2(this.color.getHex(),this.density)},i.CanvasRenderer=function(e){function t(){_t.setRGB(0,0,0),bt.setRGB(0,0,0),wt.setRGB(0,0,0);for(var e=0,t=S.length;t>e;e++){var n=S[e],r=n.color;n instanceof i.AmbientLight?_t.add(r):n instanceof i.DirectionalLight?bt.add(r):n instanceof i.PointLight&&wt.add(r)}}function n(e,t,n){for(var r=0,o=S.length;o>r;r++){var a=S[r];if(mt.copy(a.color),a instanceof i.DirectionalLight){var s=Et.setFromMatrixPosition(a.matrixWorld).normalize(),c=t.dot(s);if(0>=c)continue;c*=a.intensity,n.add(mt.multiplyScalar(c))}else if(a instanceof i.PointLight){var s=Et.setFromMatrixPosition(a.matrixWorld),c=t.dot(Et.subVectors(s,e).normalize());if(0>=c)continue;if(c*=0==a.distance?1:1-Math.min(e.distanceTo(s)/a.distance,1),0==c)continue;c*=a.intensity,n.add(mt.multiplyScalar(c))}}}function o(e,t,n){m(n.opacity),v(n.blending);var r=t.scale.x*K,o=t.scale.y*Q,a=.5*Math.sqrt(r*r+o*o);if(xt.min.set(e.x-a,e.y-a),xt.max.set(e.x+a,e.y+a),n instanceof i.SpriteMaterial){var s=n.map;if(null!==s&&void 0!==s.image){s.hasEventListener("update",h)===!1&&(s.image.width>0&&p(s),s.addEventListener("update",h));var c=vt[s.id];b(void 0!==c?c:"rgba( 0, 0, 0, 1 )");var l=s.image,u=l.width*s.offset.x,d=l.height*s.offset.y,f=l.width*s.repeat.x,g=l.height*s.repeat.y,y=r/f,x=o/g;tt.save(),tt.translate(e.x,e.y),0!==n.rotation&&tt.rotate(n.rotation),tt.translate(-r/2,-o/2),tt.scale(y,x),tt.translate(-u,-d),tt.fillRect(u,d,f,g),tt.restore()}else b(n.color.getStyle()),tt.save(),tt.translate(e.x,e.y),0!==n.rotation&&tt.rotate(n.rotation),tt.scale(r,-o),tt.fillRect(-.5,-.5,1,1),tt.restore()}else n instanceof i.SpriteCanvasMaterial&&(_(n.color.getStyle()),b(n.color.getStyle()),tt.save(),tt.translate(e.x,e.y),0!==n.rotation&&tt.rotate(n.rotation),tt.scale(r,o),n.program(tt),tt.restore())}function a(e,t,n,r){if(m(r.opacity),v(r.blending),tt.beginPath(),tt.moveTo(e.positionScreen.x,e.positionScreen.y),tt.lineTo(t.positionScreen.x,t.positionScreen.y),r instanceof i.LineBasicMaterial){if(g(r.linewidth),y(r.linecap),x(r.linejoin),r.vertexColors!==i.VertexColors)_(r.color.getStyle());else{var o=n.vertexColors[0].getStyle(),a=n.vertexColors[1].getStyle();if(o===a)_(o);else{try{var s=tt.createLinearGradient(e.positionScreen.x,e.positionScreen.y,t.positionScreen.x,t.positionScreen.y);s.addColorStop(0,o),s.addColorStop(1,a)}catch(c){s=o}_(s)}}tt.stroke(),xt.expandByScalar(2*r.linewidth)}else r instanceof i.LineDashedMaterial&&(g(r.linewidth),y(r.linecap),x(r.linejoin),_(r.color.getStyle()),w([r.dashSize,r.gapSize]),tt.stroke(),xt.expandByScalar(2*r.linewidth),w([]))}function s(e,t,r,o,a,s,h,p){G.info.render.vertices+=3,G.info.render.faces++,m(p.opacity),v(p.blending),N=e.positionScreen.x,P=e.positionScreen.y,O=t.positionScreen.x,L=t.positionScreen.y,U=r.positionScreen.x,V=r.positionScreen.y,c(N,P,O,L,U,V),(p instanceof i.MeshLambertMaterial||p instanceof i.MeshPhongMaterial)&&null===p.map?(dt.copy(p.color),ft.copy(p.emissive),p.vertexColors===i.FaceColors&&dt.multiply(h.color),pt.copy(_t),Mt.copy(e.positionWorld).add(t.positionWorld).add(r.positionWorld).divideScalar(3),n(Mt,h.normalModel,pt),pt.multiply(dt).add(ft),p.wireframe===!0?l(pt,p.wireframeLinewidth,p.wireframeLinecap,p.wireframeLinejoin):u(pt)):p instanceof i.MeshBasicMaterial||p instanceof i.MeshLambertMaterial||p instanceof i.MeshPhongMaterial?null!==p.map?p.map.mapping instanceof i.UVMapping&&(k=h.uvs,d(N,P,O,L,U,V,k[o].x,k[o].y,k[a].x,k[a].y,k[s].x,k[s].y,p.map)):null!==p.envMap?p.envMap.mapping instanceof i.SphericalReflectionMapping?(Ct.copy(h.vertexNormalsModel[o]).applyMatrix3(St),F=.5*Ct.x+.5,I=.5*Ct.y+.5,Ct.copy(h.vertexNormalsModel[a]).applyMatrix3(St),B=.5*Ct.x+.5,z=.5*Ct.y+.5,Ct.copy(h.vertexNormalsModel[s]).applyMatrix3(St),H=.5*Ct.x+.5,j=.5*Ct.y+.5,d(N,P,O,L,U,V,F,I,B,z,H,j,p.envMap)):p.envMap.mapping instanceof i.SphericalRefractionMapping&&(Ct.copy(h.vertexNormalsModel[o]).applyMatrix3(St),F=-.5*Ct.x+.5,I=-.5*Ct.y+.5,Ct.copy(h.vertexNormalsModel[a]).applyMatrix3(St),B=-.5*Ct.x+.5,z=-.5*Ct.y+.5,Ct.copy(h.vertexNormalsModel[s]).applyMatrix3(St),H=-.5*Ct.x+.5,j=-.5*Ct.y+.5,d(N,P,O,L,U,V,F,I,B,z,H,j,p.envMap)):(pt.copy(p.color),p.vertexColors===i.FaceColors&&pt.multiply(h.color),p.wireframe===!0?l(pt,p.wireframeLinewidth,p.wireframeLinecap,p.wireframeLinejoin):u(pt)):p instanceof i.MeshDepthMaterial?(pt.r=pt.g=pt.b=1-E(e.positionScreen.z*e.positionScreen.w,T.near,T.far),p.wireframe===!0?l(pt,p.wireframeLinewidth,p.wireframeLinecap,p.wireframeLinejoin):u(pt)):p instanceof i.MeshNormalMaterial?(Ct.copy(h.normalModel).applyMatrix3(St),pt.setRGB(Ct.x,Ct.y,Ct.z).multiplyScalar(.5).addScalar(.5),p.wireframe===!0?l(pt,p.wireframeLinewidth,p.wireframeLinecap,p.wireframeLinejoin):u(pt)):(pt.setRGB(1,1,1),p.wireframe===!0?l(pt,p.wireframeLinewidth,p.wireframeLinecap,p.wireframeLinejoin):u(pt))}function c(e,t,n,r,i,o){tt.beginPath(),tt.moveTo(e,t),tt.lineTo(n,r),tt.lineTo(i,o),tt.closePath()}function l(e,t,n,r){g(t),y(n),x(r),_(e.getStyle()),tt.stroke(),xt.expandByScalar(2*t)}function u(e){b(e.getStyle()),tt.fill()}function h(e){p(e.target)}function p(e){if(!(e instanceof i.CompressedTexture)){var t=e.wrapS===i.RepeatWrapping,n=e.wrapT===i.RepeatWrapping,r=e.image,o=document.createElement("canvas");o.width=r.width,o.height=r.height;var a=o.getContext("2d");a.setTransform(1,0,0,-1,0,r.height),a.drawImage(r,0,0),vt[e.id]=tt.createPattern(o,t===!0&&n===!0?"repeat":t===!0&&n===!1?"repeat-x":t===!1&&n===!0?"repeat-y":"no-repeat")}}function d(e,t,n,r,o,a,s,c,l,u,d,f,m){if(!(m instanceof i.DataTexture)){m.hasEventListener("update",h)===!1&&(void 0!==m.image&&m.image.width>0&&p(m),m.addEventListener("update",h));var v=vt[m.id];if(void 0===v)return b("rgba(0,0,0,1)"),void tt.fill();b(v);var g,y,x,_,w,E,M,C,S=m.offset.x/m.repeat.x,T=m.offset.y/m.repeat.y,R=m.image.width*m.repeat.x,D=m.image.height*m.repeat.y;s=(s+S)*R,c=(c+T)*D,l=(l+S)*R,u=(u+T)*D,d=(d+S)*R,f=(f+T)*D,n-=e,r-=t,o-=e,a-=t,l-=s,u-=c,d-=s,f-=c,M=l*f-d*u,0!==M&&(C=1/M,g=(f*n-u*o)*C,y=(f*r-u*a)*C,x=(l*o-d*n)*C,_=(l*a-d*r)*C,w=e-g*s-x*c,E=t-y*s-_*c,tt.save(),tt.transform(g,y,x,_,w,E),tt.fill(),tt.restore())}}function f(e,t,n){var r,i=t.x-e.x,o=t.y-e.y,a=i*i+o*o;0!==a&&(r=n/Math.sqrt(a),i*=r,o*=r,t.x+=i,t.y+=o,e.x-=i,e.y-=o)}function m(e){it!==e&&(tt.globalAlpha=e,it=e)}function v(e){ot!==e&&(e===i.NormalBlending?tt.globalCompositeOperation="source-over":e===i.AdditiveBlending?tt.globalCompositeOperation="lighter":e===i.SubtractiveBlending&&(tt.globalCompositeOperation="darker"),ot=e)}function g(e){ct!==e&&(tt.lineWidth=e,ct=e)}function y(e){lt!==e&&(tt.lineCap=e,lt=e)}function x(e){ut!==e&&(tt.lineJoin=e,ut=e)}function _(e){at!==e&&(tt.strokeStyle=e,at=e)}function b(e){st!==e&&(tt.fillStyle=e,st=e)}function w(e){ht.length!==e.length&&(tt.setLineDash(e),ht=e)}console.log("THREE.CanvasRenderer",i.REVISION);var E=i.Math.smoothstep;e=e||{};var M,C,S,T,R,D,A,N,P,O,L,U,V,k,F,I,B,z,H,j,G=this,W=new i.Projector,X=void 0!==e.canvas?e.canvas:document.createElement("canvas"),Y=X.width,q=X.height,K=Math.floor(Y/2),Q=Math.floor(q/2),Z=0,J=0,$=Y,et=q,tt=X.getContext("2d",{alpha:e.alpha===!0}),nt=new i.Color(0),rt=0,it=1,ot=0,at=null,st=null,ct=null,lt=null,ut=null,ht=[],pt=(new i.RenderableVertex,new i.RenderableVertex,new i.Color),dt=(new i.Color,new i.Color,new i.Color,new i.Color,new i.Color),ft=new i.Color,mt=new i.Color,vt={},gt=new i.Box2,yt=new i.Box2,xt=new i.Box2,_t=new i.Color,bt=new i.Color,wt=new i.Color,Et=new i.Vector3,Mt=new i.Vector3,Ct=new i.Vector3,St=new i.Matrix3;void 0===tt.setLineDash&&(tt.setLineDash=function(){}),this.domElement=X,this.devicePixelRatio=void 0!==e.devicePixelRatio?e.devicePixelRatio:void 0!==r.devicePixelRatio?r.devicePixelRatio:1,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.info={render:{vertices:0,faces:0}},this.supportsVertexTextures=function(){},this.setFaceCulling=function(){},this.setSize=function(e,t,n){Y=e*this.devicePixelRatio,q=t*this.devicePixelRatio,X.width=Y,X.height=q,K=Math.floor(Y/2),Q=Math.floor(q/2),n!==!1&&(X.style.width=e+"px",X.style.height=t+"px"),gt.min.set(-K,-Q),gt.max.set(K,Q),yt.min.set(-K,-Q),yt.max.set(K,Q),it=1,ot=0,at=null,st=null,ct=null,lt=null,ut=null,this.setViewport(0,0,e,t)},this.setViewport=function(e,t,n,r){Z=e*this.devicePixelRatio,J=t*this.devicePixelRatio,$=n*this.devicePixelRatio,et=r*this.devicePixelRatio},this.setScissor=function(){},this.enableScissorTest=function(){},this.setClearColor=function(e,t){nt.set(e),rt=void 0!==t?t:1,yt.min.set(-K,-Q),yt.max.set(K,Q)},this.setClearColorHex=function(e,t){console.warn("THREE.CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead."),this.setClearColor(e,t)},this.getClearColor=function(){return nt},this.getClearAlpha=function(){return rt},this.getMaxAnisotropy=function(){return 0},this.clear=function(){yt.empty()===!1&&(yt.intersect(gt),yt.expandByScalar(2),yt.min.x=yt.min.x+K,yt.min.y=-yt.min.y+Q,yt.max.x=yt.max.x+K,yt.max.y=-yt.max.y+Q,1>rt&&tt.clearRect(0|yt.min.x,0|yt.min.y,yt.max.x-yt.min.x|0,yt.max.y-yt.min.y|0),rt>0&&(v(i.NormalBlending),m(1),b("rgba("+Math.floor(255*nt.r)+","+Math.floor(255*nt.g)+","+Math.floor(255*nt.b)+","+rt+")"),tt.fillRect(0|yt.min.x,0|yt.min.y,yt.max.x-yt.min.x|0,yt.max.y-yt.min.y|0)),yt.makeEmpty())},this.clearColor=function(){},this.clearDepth=function(){},this.clearStencil=function(){},this.render=function(e,n){if(n instanceof i.Camera==!1)return void console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.");this.autoClear===!0&&this.clear(),G.info.render.vertices=0,G.info.render.faces=0,tt.setTransform($/Y,0,0,-et/q,Z,q-J),tt.translate(K,Q),M=W.projectScene(e,n,this.sortObjects,this.sortElements),C=M.elements,S=M.lights,T=n,St.getNormalMatrix(n.matrixWorldInverse),t();for(var r=0,c=C.length;c>r;r++){var l=C[r],u=l.material;if(void 0!==u&&0!==u.opacity){if(xt.makeEmpty(),l instanceof i.RenderableSprite)R=l,R.x*=K,R.y*=Q,o(R,l,u);else if(l instanceof i.RenderableLine)R=l.v1,D=l.v2,R.positionScreen.x*=K,R.positionScreen.y*=Q,D.positionScreen.x*=K,D.positionScreen.y*=Q,xt.setFromPoints([R.positionScreen,D.positionScreen]),gt.isIntersectionBox(xt)===!0&&a(R,D,l,u);else if(l instanceof i.RenderableFace){if(R=l.v1,D=l.v2,A=l.v3,R.positionScreen.z<-1||R.positionScreen.z>1)continue;if(D.positionScreen.z<-1||D.positionScreen.z>1)continue;if(A.positionScreen.z<-1||A.positionScreen.z>1)continue;R.positionScreen.x*=K,R.positionScreen.y*=Q,D.positionScreen.x*=K,D.positionScreen.y*=Q,A.positionScreen.x*=K,A.positionScreen.y*=Q,u.overdraw>0&&(f(R.positionScreen,D.positionScreen,u.overdraw),f(D.positionScreen,A.positionScreen,u.overdraw),f(A.positionScreen,R.positionScreen,u.overdraw)),xt.setFromPoints([R.positionScreen,D.positionScreen,A.positionScreen]),gt.isIntersectionBox(xt)===!0&&s(R,D,A,0,1,2,l,u)}yt.union(xt)}}tt.setTransform(1,0,0,1,0,0)}},i.ShaderChunk={},i.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n	if ( gl_FragColor.a < ALPHATEST ) discard;\n\n#endif\n",i.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n	vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n	vec3 dirVector = normalize( lDirection.xyz );\n\n	float dotProduct = dot( transformedNormal, dirVector );\n	vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n	#ifdef DOUBLE_SIDED\n\n		vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n		#ifdef WRAP_AROUND\n\n			vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n		#endif\n\n	#endif\n\n	#ifdef WRAP_AROUND\n\n		vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n		directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n		#ifdef DOUBLE_SIDED\n\n			directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n		#endif\n\n	#endif\n\n	vLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n	#ifdef DOUBLE_SIDED\n\n		vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n	#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( pointLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n		float dotProduct = dot( transformedNormal, lVector );\n\n		vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n		#ifdef DOUBLE_SIDED\n\n			vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n			#ifdef WRAP_AROUND\n\n				vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n			#endif\n\n		#endif\n\n		#ifdef WRAP_AROUND\n\n			vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n			pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n			#ifdef DOUBLE_SIDED\n\n				pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n			#endif\n\n		#endif\n\n		vLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n\n		#endif\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n			float lDistance = 1.0;\n			if ( spotLightDistance[ i ] > 0.0 )\n				lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n			lVector = normalize( lVector );\n\n			float dotProduct = dot( transformedNormal, lVector );\n			vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n			#ifdef DOUBLE_SIDED\n\n				vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n				#ifdef WRAP_AROUND\n\n					vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n				#endif\n\n			#endif\n\n			#ifdef WRAP_AROUND\n\n				vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n				spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n				#ifdef DOUBLE_SIDED\n\n					spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n				#endif\n\n			#endif\n\n			vLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n\n			#ifdef DOUBLE_SIDED\n\n				vLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n\n			#endif\n\n		}\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n		vec3 lVector = normalize( lDirection.xyz );\n\n		float dotProduct = dot( transformedNormal, lVector );\n\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n		float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n		vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n		#endif\n\n	}\n\n#endif\n\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n\n#endif",i.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif",i.ShaderChunk.default_vertex="vec4 mvPosition;\n\n#ifdef USE_SKINNING\n\n	mvPosition = modelViewMatrix * skinned;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\n\n	mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\n\n	mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;",i.ShaderChunk.map_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif",i.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n	#ifdef USE_MORPHNORMALS\n\n	vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n	#else\n\n	vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n	#endif\n\n#endif\n",i.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		varying float vFragDepth;\n\n	#endif\n\n	uniform float logDepthBufFC;\n\n#endif",i.ShaderChunk.lightmap_pars_vertex="#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n\n#endif",i.ShaderChunk.lights_phong_fragment="vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef DOUBLE_SIDED\n\n	normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	vec3 pointDiffuse = vec3( 0.0 );\n	vec3 pointSpecular = vec3( 0.0 );\n\n	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( pointLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n\n				// diffuse\n\n		float dotProduct = dot( normal, lVector );\n\n		#ifdef WRAP_AROUND\n\n			float pointDiffuseWeightFull = max( dotProduct, 0.0 );\n			float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float pointDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		pointDiffuse += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\n\n				// specular\n\n		vec3 pointHalfVector = normalize( lVector + viewPosition );\n		float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n		float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n		pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	vec3 spotDiffuse = vec3( 0.0 );\n	vec3 spotSpecular = vec3( 0.0 );\n\n	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( spotLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n					// diffuse\n\n			float dotProduct = dot( normal, lVector );\n\n			#ifdef WRAP_AROUND\n\n				float spotDiffuseWeightFull = max( dotProduct, 0.0 );\n				float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n				vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n			#else\n\n				float spotDiffuseWeight = max( dotProduct, 0.0 );\n\n			#endif\n\n			spotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\n\n					// specular\n\n			vec3 spotHalfVector = normalize( lVector + viewPosition );\n			float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n			float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n			float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n			spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n\n		}\n\n	}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n	vec3 dirDiffuse = vec3( 0.0 );\n	vec3 dirSpecular = vec3( 0.0 );\n\n	for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n		vec3 dirVector = normalize( lDirection.xyz );\n\n				// diffuse\n\n		float dotProduct = dot( normal, dirVector );\n\n		#ifdef WRAP_AROUND\n\n			float dirDiffuseWeightFull = max( dotProduct, 0.0 );\n			float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float dirDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		dirDiffuse += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\n\n		// specular\n\n		vec3 dirHalfVector = normalize( dirVector + viewPosition );\n		float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n		float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n		/*\n		// fresnel term from skin shader\n		const float F0 = 0.128;\n\n		float base = 1.0 - dot( viewPosition, dirHalfVector );\n		float exponential = pow( base, 5.0 );\n\n		float fresnel = exponential + F0 * ( 1.0 - exponential );\n		*/\n\n		/*\n		// fresnel term from fresnel shader\n		const float mFresnelBias = 0.08;\n		const float mFresnelScale = 0.3;\n		const float mFresnelPower = 5.0;\n\n		float fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n		*/\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		// 		dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n		dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	vec3 hemiDiffuse = vec3( 0.0 );\n	vec3 hemiSpecular = vec3( 0.0 );\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n		vec3 lVector = normalize( lDirection.xyz );\n\n		// diffuse\n\n		float dotProduct = dot( normal, lVector );\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n		vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		hemiDiffuse += diffuse * hemiColor;\n\n		// specular (sky light)\n\n		vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n		float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n		float hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n		// specular (ground light)\n\n		vec3 lVectorGround = -lVector;\n\n		vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n		float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n		float hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n		float dotProductGround = dot( normal, lVectorGround );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n		vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n		hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n	}\n\n#endif\n\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n\n#if MAX_DIR_LIGHTS > 0\n\n	totalDiffuse += dirDiffuse;\n	totalSpecular += dirSpecular;\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	totalDiffuse += hemiDiffuse;\n	totalSpecular += hemiSpecular;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	totalDiffuse += pointDiffuse;\n	totalSpecular += pointSpecular;\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	totalDiffuse += spotDiffuse;\n	totalSpecular += spotSpecular;\n\n#endif\n\n#ifdef METAL\n\n	gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\n#else\n\n	gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\n#endif",i.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n	uniform vec3 fogColor;\n\n	#ifdef FOG_EXP2\n\n		uniform float fogDensity;\n\n	#else\n\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n\n#endif",i.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n	vec3 morphedNormal = vec3( 0.0 );\n\n	morphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	morphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	morphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	morphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n	morphedNormal += normal;\n\n#endif",i.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n	uniform float reflectivity;\n	uniform samplerCube envMap;\n	uniform float flipEnvMap;\n	uniform int combine;\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\n		uniform bool useRefract;\n		uniform float refractionRatio;\n\n	#else\n\n		varying vec3 vReflect;\n\n	#endif\n\n#endif",i.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif",i.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n\n			// Per-Pixel Tangent Space Normal Mapping\n			// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n\n	}\n\n#endif\n",i.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n",i.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n	uniform sampler2D lightMap;\n\n#endif",i.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n	}\n\n#endif",i.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	vWorldPosition = worldPosition.xyz;\n\n#endif",i.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n	vec4 texelColor = texture2D( map, vUv );\n\n	#ifdef GAMMA_INPUT\n\n		texelColor.xyz *= texelColor.xyz;\n\n	#endif\n\n	gl_FragColor = gl_FragColor * texelColor;\n\n#endif",i.ShaderChunk.lightmap_vertex="#ifdef USE_LIGHTMAP\n\n	vUv2 = uv2;\n\n#endif",i.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n	gl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n\n#endif",i.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif\n",i.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n	#ifdef GAMMA_INPUT\n\n		vColor = color * color;\n\n	#else\n\n		vColor = color;\n\n	#endif\n\n#endif",i.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n	#ifdef USE_MORPHTARGETS\n\n	vec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n	vec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n	#endif\n\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	skinned  = bindMatrixInverse * skinned;\n\n#endif\n",i.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\n\n	varying vec3 vReflect;\n\n	uniform float refractionRatio;\n	uniform bool useRefract;\n\n#endif\n",i.ShaderChunk.linear_to_gamma_fragment="#ifdef GAMMA_OUTPUT\n\n	gl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n\n#endif",i.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif",i.ShaderChunk.lights_lambert_pars_vertex="uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\n\nuniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n",i.ShaderChunk.map_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n\n#endif\n",i.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n	vec3 reflectVec;\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n		// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\n		// Transforming Normal Vectors with the Inverse Transformation\n\n		vec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );\n\n		if ( useRefract ) {\n\n			reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n		} else { \n\n			reflectVec = reflect( cameraToVertex, worldNormal );\n\n		}\n\n	#else\n\n		reflectVec = vReflect;\n\n	#endif\n\n	#ifdef DOUBLE_SIDED\n\n		float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n		vec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n	#else\n\n		vec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n	#endif\n\n	#ifdef GAMMA_INPUT\n\n		cubeColor.xyz *= cubeColor.xyz;\n\n	#endif\n\n	if ( combine == 1 ) {\n\n		gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );\n\n	} else if ( combine == 2 ) {\n\n		gl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;\n\n	} else {\n\n		gl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );\n\n	}\n\n#endif",i.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n	uniform sampler2D specularMap;\n\n#endif",i.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n	gl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		vFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n	#endif\n\n#endif",i.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n	#ifndef USE_MORPHNORMALS\n\n	uniform float morphTargetInfluences[ 8 ];\n\n	#else\n\n	uniform float morphTargetInfluences[ 4 ];\n\n	#endif\n\n#endif",i.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n\n#else\n\n	specularStrength = 1.0;\n\n#endif",i.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n	#else\n\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n\n	#endif\n\n	#ifdef FOG_EXP2\n\n		const float LOG2 = 1.442695;\n		float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\n		fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\n	#else\n\n		float fogFactor = smoothstep( fogNear, fogFar, depth );\n\n	#endif\n	\n	gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n\n#endif",i.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n\n			// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n			//	http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n			// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n	vec2 dHdxy_fwd() {\n\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n		return vec2( dBx, dBy );\n\n	}\n\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n		vec3 vSigmaX = dFdx( surf_pos );\n		vec3 vSigmaY = dFdy( surf_pos );\n		vec3 vN = surf_norm;		// normalized\n\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n\n		float fDet = dot( vSigmaX, R1 );\n\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n\n	}\n\n#endif",i.ShaderChunk.defaultnormal_vertex="vec3 objectNormal;\n\n#ifdef USE_SKINNING\n\n	objectNormal = skinnedNormal.xyz;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\n\n	objectNormal = morphedNormal;\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\n\n	objectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n	objectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;",i.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",i.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif",i.ShaderChunk.map_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif",i.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n	gl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n\n#endif",i.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n	uniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif",i.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n	gl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n\n#endif",i.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n	vec3 morphed = vec3( 0.0 );\n	morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n	#ifndef USE_MORPHNORMALS\n\n	morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n	#endif\n\n	morphed += position;\n\n#endif",i.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\n\n	vec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\n	worldNormal = normalize( worldNormal );\n\n	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n	if ( useRefract ) {\n\n		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n	} else {\n\n		vReflect = reflect( cameraToVertex, worldNormal );\n\n	}\n\n#endif",i.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n	#ifdef SHADOWMAP_DEBUG\n\n		vec3 frustumColors[3];\n		frustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n		frustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n		frustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n	#endif\n\n	#ifdef SHADOWMAP_CASCADE\n\n		int inFrustumCount = 0;\n\n	#endif\n\n	float fDepth;\n	vec3 shadowColor = vec3( 1.0 );\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n				// if ( something && something ) breaks ATI OpenGL shader compiler\n				// if ( all( something, something ) ) using this instead\n\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n\n				// don't shadow pixels outside of light frustum\n				// use just first frustum (for cascades)\n				// don't shadow pixels behind far plane of light frustum\n\n		#ifdef SHADOWMAP_CASCADE\n\n			inFrustumCount += int( inFrustum );\n			bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n		#else\n\n			bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n		#endif\n\n		bool frustumTest = all( frustumTestVec );\n\n		if ( frustumTest ) {\n\n			shadowCoord.z += shadowBias[ i ];\n\n			#if defined( SHADOWMAP_TYPE_PCF )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n		/*\n						// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n						// must enroll loop manually\n\n				for ( float y = -1.25; y <= 1.25; y += 1.25 )\n					for ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n						vec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n								// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n								//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n						float fDepth = unpackDepth( rgbaDepth );\n\n						if ( fDepth < shadowCoord.z )\n							shadow += 1.0;\n\n				}\n\n				shadow /= 9.0;\n\n		*/\n\n				const float shadowDelta = 1.0 / 9.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.25 * xPixelOffset;\n				float dy0 = -1.25 * yPixelOffset;\n				float dx1 = 1.25 * xPixelOffset;\n				float dy1 = 1.25 * yPixelOffset;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.0 * xPixelOffset;\n				float dy0 = -1.0 * yPixelOffset;\n				float dx1 = 1.0 * xPixelOffset;\n				float dy1 = 1.0 * yPixelOffset;\n\n				mat3 shadowKernel;\n				mat3 depthKernel;\n\n				depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n				vec3 shadowZ = vec3( shadowCoord.z );\n				shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n				shadowKernel[0] *= vec3(0.25);\n\n				shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n				shadowKernel[1] *= vec3(0.25);\n\n				shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n				shadowKernel[2] *= vec3(0.25);\n\n				vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n				shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n				shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n				vec4 shadowValues;\n				shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n				shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n				shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n				shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n				shadow = dot( shadowValues, vec4( 1.0 ) );\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#else\n\n				vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n				float fDepth = unpackDepth( rgbaDepth );\n\n				if ( fDepth < shadowCoord.z )\n\n		// spot with multiple shadows is darker\n\n					shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n		// spot with multiple shadows has the same color as single shadow spot\n\n		// 					shadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n			#endif\n\n		}\n\n\n		#ifdef SHADOWMAP_DEBUG\n\n			#ifdef SHADOWMAP_CASCADE\n\n				if ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n\n			#else\n\n				if ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n\n			#endif\n\n		#endif\n\n	}\n\n	#ifdef GAMMA_OUTPUT\n\n		shadowColor *= shadowColor;\n\n	#endif\n\n	gl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n\n#endif\n",i.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n	#ifdef USE_SKINNING\n\n		vec4 worldPosition = modelMatrix * skinned;\n\n	#endif\n\n	#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n		vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n	#endif\n\n	#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n		vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n	#endif\n\n#endif",i.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n	uniform sampler2D shadowMap[ MAX_SHADOWS ];\n	uniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n	uniform float shadowDarkness[ MAX_SHADOWS ];\n	uniform float shadowBias[ MAX_SHADOWS ];\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n	float unpackDepth( const in vec4 rgba_depth ) {\n\n		const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n		float depth = dot( rgba_depth, bit_shift );\n		return depth;\n\n	}\n\n#endif",i.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n\n	#ifdef BONE_TEXTURE\n\n		uniform sampler2D boneTexture;\n		uniform int boneTextureWidth;\n		uniform int boneTextureHeight;\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureWidth ) );\n			float y = floor( j / float( boneTextureWidth ) );\n\n			float dx = 1.0 / float( boneTextureWidth );\n			float dy = 1.0 / float( boneTextureHeight );\n\n			y = dy * ( y + 0.5 );\n\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n			mat4 bone = mat4( v1, v2, v3, v4 );\n\n			return bone;\n\n		}\n\n	#else\n\n		uniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			mat4 bone = boneGlobalMatrices[ int(i) ];\n			return bone;\n\n		}\n\n	#endif\n\n#endif\n",i.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n	uniform float logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		#extension GL_EXT_frag_depth : enable\n		varying float vFragDepth;\n\n	#endif\n\n#endif",i.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n	gl_FragColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",i.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n	uniform sampler2D alphaMap;\n\n#endif\n",i.UniformsUtils={merge:function(e){var t,n,r,i={};
for(t=0;t<e.length;t++){r=this.clone(e[t]);for(n in r)i[n]=r[n]}return i},clone:function(e){var t,n,r,o={};for(t in e){o[t]={};for(n in e[t])r=e[t][n],o[t][n]=r instanceof i.Color||r instanceof i.Vector2||r instanceof i.Vector3||r instanceof i.Vector4||r instanceof i.Matrix4||r instanceof i.Texture?r.clone():r instanceof Array?r.slice():r}return o}},i.UniformsLib={common:{diffuse:{type:"c",value:new i.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new i.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new i.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new i.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new i.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new i.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},i.ShaderLib={basic:{uniforms:i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.fog,i.UniformsLib.shadowmap]),vertexShader:[i.ShaderChunk.map_pars_vertex,i.ShaderChunk.lightmap_pars_vertex,i.ShaderChunk.envmap_pars_vertex,i.ShaderChunk.color_pars_vertex,i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.skinning_pars_vertex,i.ShaderChunk.shadowmap_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.map_vertex,i.ShaderChunk.lightmap_vertex,i.ShaderChunk.color_vertex,i.ShaderChunk.skinbase_vertex,"	#ifdef USE_ENVMAP",i.ShaderChunk.morphnormal_vertex,i.ShaderChunk.skinnormal_vertex,i.ShaderChunk.defaultnormal_vertex,"	#endif",i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.skinning_vertex,i.ShaderChunk.default_vertex,i.ShaderChunk.logdepthbuf_vertex,i.ShaderChunk.worldpos_vertex,i.ShaderChunk.envmap_vertex,i.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;",i.ShaderChunk.color_pars_fragment,i.ShaderChunk.map_pars_fragment,i.ShaderChunk.alphamap_pars_fragment,i.ShaderChunk.lightmap_pars_fragment,i.ShaderChunk.envmap_pars_fragment,i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.shadowmap_pars_fragment,i.ShaderChunk.specularmap_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( diffuse, opacity );",i.ShaderChunk.logdepthbuf_fragment,i.ShaderChunk.map_fragment,i.ShaderChunk.alphamap_fragment,i.ShaderChunk.alphatest_fragment,i.ShaderChunk.specularmap_fragment,i.ShaderChunk.lightmap_fragment,i.ShaderChunk.color_fragment,i.ShaderChunk.envmap_fragment,i.ShaderChunk.shadowmap_fragment,i.ShaderChunk.linear_to_gamma_fragment,i.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.fog,i.UniformsLib.lights,i.UniformsLib.shadowmap,{ambient:{type:"c",value:new i.Color(16777215)},emissive:{type:"c",value:new i.Color(0)},wrapRGB:{type:"v3",value:new i.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","#endif",i.ShaderChunk.map_pars_vertex,i.ShaderChunk.lightmap_pars_vertex,i.ShaderChunk.envmap_pars_vertex,i.ShaderChunk.lights_lambert_pars_vertex,i.ShaderChunk.color_pars_vertex,i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.skinning_pars_vertex,i.ShaderChunk.shadowmap_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.map_vertex,i.ShaderChunk.lightmap_vertex,i.ShaderChunk.color_vertex,i.ShaderChunk.morphnormal_vertex,i.ShaderChunk.skinbase_vertex,i.ShaderChunk.skinnormal_vertex,i.ShaderChunk.defaultnormal_vertex,i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.skinning_vertex,i.ShaderChunk.default_vertex,i.ShaderChunk.logdepthbuf_vertex,i.ShaderChunk.worldpos_vertex,i.ShaderChunk.envmap_vertex,i.ShaderChunk.lights_lambert_vertex,i.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","#endif",i.ShaderChunk.color_pars_fragment,i.ShaderChunk.map_pars_fragment,i.ShaderChunk.alphamap_pars_fragment,i.ShaderChunk.lightmap_pars_fragment,i.ShaderChunk.envmap_pars_fragment,i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.shadowmap_pars_fragment,i.ShaderChunk.specularmap_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( vec3( 1.0 ), opacity );",i.ShaderChunk.logdepthbuf_fragment,i.ShaderChunk.map_fragment,i.ShaderChunk.alphamap_fragment,i.ShaderChunk.alphatest_fragment,i.ShaderChunk.specularmap_fragment,"	#ifdef DOUBLE_SIDED","		if ( gl_FrontFacing )","			gl_FragColor.xyz *= vLightFront;","		else","			gl_FragColor.xyz *= vLightBack;","	#else","		gl_FragColor.xyz *= vLightFront;","	#endif",i.ShaderChunk.lightmap_fragment,i.ShaderChunk.color_fragment,i.ShaderChunk.envmap_fragment,i.ShaderChunk.shadowmap_fragment,i.ShaderChunk.linear_to_gamma_fragment,i.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.bump,i.UniformsLib.normalmap,i.UniformsLib.fog,i.UniformsLib.lights,i.UniformsLib.shadowmap,{ambient:{type:"c",value:new i.Color(16777215)},emissive:{type:"c",value:new i.Color(0)},specular:{type:"c",value:new i.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new i.Vector3(1,1,1)}}]),vertexShader:["#define PHONG","varying vec3 vViewPosition;","varying vec3 vNormal;",i.ShaderChunk.map_pars_vertex,i.ShaderChunk.lightmap_pars_vertex,i.ShaderChunk.envmap_pars_vertex,i.ShaderChunk.lights_phong_pars_vertex,i.ShaderChunk.color_pars_vertex,i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.skinning_pars_vertex,i.ShaderChunk.shadowmap_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.map_vertex,i.ShaderChunk.lightmap_vertex,i.ShaderChunk.color_vertex,i.ShaderChunk.morphnormal_vertex,i.ShaderChunk.skinbase_vertex,i.ShaderChunk.skinnormal_vertex,i.ShaderChunk.defaultnormal_vertex,"	vNormal = normalize( transformedNormal );",i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.skinning_vertex,i.ShaderChunk.default_vertex,i.ShaderChunk.logdepthbuf_vertex,"	vViewPosition = -mvPosition.xyz;",i.ShaderChunk.worldpos_vertex,i.ShaderChunk.envmap_vertex,i.ShaderChunk.lights_phong_vertex,i.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform vec3 ambient;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;",i.ShaderChunk.color_pars_fragment,i.ShaderChunk.map_pars_fragment,i.ShaderChunk.alphamap_pars_fragment,i.ShaderChunk.lightmap_pars_fragment,i.ShaderChunk.envmap_pars_fragment,i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.lights_phong_pars_fragment,i.ShaderChunk.shadowmap_pars_fragment,i.ShaderChunk.bumpmap_pars_fragment,i.ShaderChunk.normalmap_pars_fragment,i.ShaderChunk.specularmap_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( vec3( 1.0 ), opacity );",i.ShaderChunk.logdepthbuf_fragment,i.ShaderChunk.map_fragment,i.ShaderChunk.alphamap_fragment,i.ShaderChunk.alphatest_fragment,i.ShaderChunk.specularmap_fragment,i.ShaderChunk.lights_phong_fragment,i.ShaderChunk.lightmap_fragment,i.ShaderChunk.color_fragment,i.ShaderChunk.envmap_fragment,i.ShaderChunk.shadowmap_fragment,i.ShaderChunk.linear_to_gamma_fragment,i.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:i.UniformsUtils.merge([i.UniformsLib.particle,i.UniformsLib.shadowmap]),vertexShader:["uniform float size;","uniform float scale;",i.ShaderChunk.color_pars_vertex,i.ShaderChunk.shadowmap_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.color_vertex,"	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","	#ifdef USE_SIZEATTENUATION","		gl_PointSize = size * ( scale / length( mvPosition.xyz ) );","	#else","		gl_PointSize = size;","	#endif","	gl_Position = projectionMatrix * mvPosition;",i.ShaderChunk.logdepthbuf_vertex,i.ShaderChunk.worldpos_vertex,i.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;","uniform float opacity;",i.ShaderChunk.color_pars_fragment,i.ShaderChunk.map_particle_pars_fragment,i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.shadowmap_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( psColor, opacity );",i.ShaderChunk.logdepthbuf_fragment,i.ShaderChunk.map_particle_fragment,i.ShaderChunk.alphatest_fragment,i.ShaderChunk.color_fragment,i.ShaderChunk.shadowmap_fragment,i.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;","attribute float lineDistance;","varying float vLineDistance;",i.ShaderChunk.color_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.color_vertex,"	vLineDistance = scale * lineDistance;","	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","	gl_Position = projectionMatrix * mvPosition;",i.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform float dashSize;","uniform float totalSize;","varying float vLineDistance;",i.ShaderChunk.color_pars_fragment,i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	if ( mod( vLineDistance, totalSize ) > dashSize ) {","		discard;","	}","	gl_FragColor = vec4( diffuse, opacity );",i.ShaderChunk.logdepthbuf_fragment,i.ShaderChunk.color_fragment,i.ShaderChunk.fog_fragment,"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:[i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.default_vertex,i.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;","uniform float mFar;","uniform float opacity;",i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",i.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT","		float depth = gl_FragDepthEXT / gl_FragCoord.w;","	#else","		float depth = gl_FragCoord.z / gl_FragCoord.w;","	#endif","	float color = 1.0 - smoothstep( mNear, mFar, depth );","	gl_FragColor = vec4( vec3( color ), opacity );","}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vNormal = normalize( normalMatrix * normal );",i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.default_vertex,i.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vNormal;",i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",i.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},normalmap:{uniforms:i.UniformsUtils.merge([i.UniformsLib.fog,i.UniformsLib.lights,i.UniformsLib.shadowmap,{enableAO:{type:"i",value:0},enableDiffuse:{type:"i",value:0},enableSpecular:{type:"i",value:0},enableReflection:{type:"i",value:0},enableDisplacement:{type:"i",value:0},tDisplacement:{type:"t",value:null},tDiffuse:{type:"t",value:null},tCube:{type:"t",value:null},tNormal:{type:"t",value:null},tSpecular:{type:"t",value:null},tAO:{type:"t",value:null},uNormalScale:{type:"v2",value:new i.Vector2(1,1)},uDisplacementBias:{type:"f",value:0},uDisplacementScale:{type:"f",value:1},diffuse:{type:"c",value:new i.Color(16777215)},specular:{type:"c",value:new i.Color(1118481)},ambient:{type:"c",value:new i.Color(16777215)},shininess:{type:"f",value:30},opacity:{type:"f",value:1},useRefract:{type:"i",value:0},refractionRatio:{type:"f",value:.98},reflectivity:{type:"f",value:.5},uOffset:{type:"v2",value:new i.Vector2(0,0)},uRepeat:{type:"v2",value:new i.Vector2(1,1)},wrapRGB:{type:"v3",value:new i.Vector3(1,1,1)}}]),fragmentShader:["uniform vec3 ambient;","uniform vec3 diffuse;","uniform vec3 specular;","uniform float shininess;","uniform float opacity;","uniform bool enableDiffuse;","uniform bool enableSpecular;","uniform bool enableAO;","uniform bool enableReflection;","uniform sampler2D tDiffuse;","uniform sampler2D tNormal;","uniform sampler2D tSpecular;","uniform sampler2D tAO;","uniform samplerCube tCube;","uniform vec2 uNormalScale;","uniform bool useRefract;","uniform float refractionRatio;","uniform float reflectivity;","varying vec3 vTangent;","varying vec3 vBinormal;","varying vec3 vNormal;","varying vec2 vUv;","uniform vec3 ambientLightColor;","#if MAX_DIR_LIGHTS > 0","	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];","	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];","#endif","#if MAX_HEMI_LIGHTS > 0","	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];","	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];","	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];","#endif","#if MAX_POINT_LIGHTS > 0","	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];","	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0","	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];","	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];","	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];","	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];","	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","#endif","#ifdef WRAP_AROUND","	uniform vec3 wrapRGB;","#endif","varying vec3 vWorldPosition;","varying vec3 vViewPosition;",i.ShaderChunk.shadowmap_pars_fragment,i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",i.ShaderChunk.logdepthbuf_fragment,"	gl_FragColor = vec4( vec3( 1.0 ), opacity );","	vec3 specularTex = vec3( 1.0 );","	vec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;","	normalTex.xy *= uNormalScale;","	normalTex = normalize( normalTex );","	if( enableDiffuse ) {","		#ifdef GAMMA_INPUT","			vec4 texelColor = texture2D( tDiffuse, vUv );","			texelColor.xyz *= texelColor.xyz;","			gl_FragColor = gl_FragColor * texelColor;","		#else","			gl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );","		#endif","	}","	if( enableAO ) {","		#ifdef GAMMA_INPUT","			vec4 aoColor = texture2D( tAO, vUv );","			aoColor.xyz *= aoColor.xyz;","			gl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;","		#else","			gl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;","		#endif","	}",i.ShaderChunk.alphatest_fragment,"	if( enableSpecular )","		specularTex = texture2D( tSpecular, vUv ).xyz;","	mat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );","	vec3 finalNormal = tsb * normalTex;","	#ifdef FLIP_SIDED","		finalNormal = -finalNormal;","	#endif","	vec3 normal = normalize( finalNormal );","	vec3 viewPosition = normalize( vViewPosition );","	#if MAX_POINT_LIGHTS > 0","		vec3 pointDiffuse = vec3( 0.0 );","		vec3 pointSpecular = vec3( 0.0 );","		for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","			vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","			vec3 pointVector = lPosition.xyz + vViewPosition.xyz;","			float pointDistance = 1.0;","			if ( pointLightDistance[ i ] > 0.0 )","				pointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );","			pointVector = normalize( pointVector );","			#ifdef WRAP_AROUND","				float pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );","				float pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );","				vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );","			#else","				float pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );","			#endif","			pointDiffuse += pointDistance * pointLightColor[ i ] * diffuse * pointDiffuseWeight;","			vec3 pointHalfVector = normalize( pointVector + viewPosition );","			float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );","			float pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, shininess ), 0.0 );","			float specularNormalization = ( shininess + 2.0 ) / 8.0;","			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( pointVector, pointHalfVector ), 0.0 ), 5.0 );","			pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;","		}","	#endif","	#if MAX_SPOT_LIGHTS > 0","		vec3 spotDiffuse = vec3( 0.0 );","		vec3 spotSpecular = vec3( 0.0 );","		for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","			vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","			vec3 spotVector = lPosition.xyz + vViewPosition.xyz;","			float spotDistance = 1.0;","			if ( spotLightDistance[ i ] > 0.0 )","				spotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );","			spotVector = normalize( spotVector );","			float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );","			if ( spotEffect > spotLightAngleCos[ i ] ) {","				spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );","				#ifdef WRAP_AROUND","					float spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );","					float spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );","					vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );","				#else","					float spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );","				#endif","				spotDiffuse += spotDistance * spotLightColor[ i ] * diffuse * spotDiffuseWeight * spotEffect;","				vec3 spotHalfVector = normalize( spotVector + viewPosition );","				float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );","				float spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, shininess ), 0.0 );","				float specularNormalization = ( shininess + 2.0 ) / 8.0;","				vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( spotVector, spotHalfVector ), 0.0 ), 5.0 );","				spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;","			}","		}","	#endif","	#if MAX_DIR_LIGHTS > 0","		vec3 dirDiffuse = vec3( 0.0 );","		vec3 dirSpecular = vec3( 0.0 );","		for( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {","			vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );","			vec3 dirVector = normalize( lDirection.xyz );","			#ifdef WRAP_AROUND","				float directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );","				float directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );","				vec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );","			#else","				float dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );","			#endif","			dirDiffuse += directionalLightColor[ i ] * diffuse * dirDiffuseWeight;","			vec3 dirHalfVector = normalize( dirVector + viewPosition );","			float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );","			float dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, shininess ), 0.0 );","			float specularNormalization = ( shininess + 2.0 ) / 8.0;","			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );","			dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;","		}","	#endif","	#if MAX_HEMI_LIGHTS > 0","		vec3 hemiDiffuse = vec3( 0.0 );","		vec3 hemiSpecular = vec3( 0.0 );","		for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {","			vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );","			vec3 lVector = normalize( lDirection.xyz );","			float dotProduct = dot( normal, lVector );","			float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","			vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","			hemiDiffuse += diffuse * hemiColor;","			vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );","			float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;","			float hemiSpecularWeightSky = specularTex.r * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );","			vec3 lVectorGround = -lVector;","			vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );","			float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;","			float hemiSpecularWeightGround = specularTex.r * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );","			float dotProductGround = dot( normal, lVectorGround );","			float specularNormalization = ( shininess + 2.0 ) / 8.0;","			vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );","			vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );","			hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );","		}","	#endif","	vec3 totalDiffuse = vec3( 0.0 );","	vec3 totalSpecular = vec3( 0.0 );","	#if MAX_DIR_LIGHTS > 0","		totalDiffuse += dirDiffuse;","		totalSpecular += dirSpecular;","	#endif","	#if MAX_HEMI_LIGHTS > 0","		totalDiffuse += hemiDiffuse;","		totalSpecular += hemiSpecular;","	#endif","	#if MAX_POINT_LIGHTS > 0","		totalDiffuse += pointDiffuse;","		totalSpecular += pointSpecular;","	#endif","	#if MAX_SPOT_LIGHTS > 0","		totalDiffuse += spotDiffuse;","		totalSpecular += spotSpecular;","	#endif","	#ifdef METAL","		gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient + totalSpecular );","	#else","		gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient ) + totalSpecular;","	#endif","	if ( enableReflection ) {","		vec3 vReflect;","		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );","		if ( useRefract ) {","			vReflect = refract( cameraToVertex, normal, refractionRatio );","		} else {","			vReflect = reflect( cameraToVertex, normal );","		}","		vec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );","		#ifdef GAMMA_INPUT","			cubeColor.xyz *= cubeColor.xyz;","		#endif","		gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * reflectivity );","	}",i.ShaderChunk.shadowmap_fragment,i.ShaderChunk.linear_to_gamma_fragment,i.ShaderChunk.fog_fragment,"}"].join("\n"),vertexShader:["attribute vec4 tangent;","uniform vec2 uOffset;","uniform vec2 uRepeat;","uniform bool enableDisplacement;","#ifdef VERTEX_TEXTURES","	uniform sampler2D tDisplacement;","	uniform float uDisplacementScale;","	uniform float uDisplacementBias;","#endif","varying vec3 vTangent;","varying vec3 vBinormal;","varying vec3 vNormal;","varying vec2 vUv;","varying vec3 vWorldPosition;","varying vec3 vViewPosition;",i.ShaderChunk.skinning_pars_vertex,i.ShaderChunk.shadowmap_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.skinbase_vertex,i.ShaderChunk.skinnormal_vertex,"	#ifdef USE_SKINNING","		vNormal = normalize( normalMatrix * skinnedNormal.xyz );","		vec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );","		vTangent = normalize( normalMatrix * skinnedTangent.xyz );","	#else","		vNormal = normalize( normalMatrix * normal );","		vTangent = normalize( normalMatrix * tangent.xyz );","	#endif","	vBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );","	vUv = uv * uRepeat + uOffset;","	vec3 displacedPosition;","	#ifdef VERTEX_TEXTURES","		if ( enableDisplacement ) {","			vec3 dv = texture2D( tDisplacement, uv ).xyz;","			float df = uDisplacementScale * dv.x + uDisplacementBias;","			displacedPosition = position + normalize( normal ) * df;","		} else {","			#ifdef USE_SKINNING","				vec4 skinVertex = bindMatrix * vec4( position, 1.0 );","				vec4 skinned = vec4( 0.0 );","				skinned += boneMatX * skinVertex * skinWeight.x;","				skinned += boneMatY * skinVertex * skinWeight.y;","				skinned += boneMatZ * skinVertex * skinWeight.z;","				skinned += boneMatW * skinVertex * skinWeight.w;","				skinned  = bindMatrixInverse * skinned;","				displacedPosition = skinned.xyz;","			#else","				displacedPosition = position;","			#endif","		}","	#else","		#ifdef USE_SKINNING","			vec4 skinVertex = bindMatrix * vec4( position, 1.0 );","			vec4 skinned = vec4( 0.0 );","			skinned += boneMatX * skinVertex * skinWeight.x;","			skinned += boneMatY * skinVertex * skinWeight.y;","			skinned += boneMatZ * skinVertex * skinWeight.z;","			skinned += boneMatW * skinVertex * skinWeight.w;","			skinned  = bindMatrixInverse * skinned;","			displacedPosition = skinned.xyz;","		#else","			displacedPosition = position;","		#endif","	#endif","	vec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );","	vec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );","	gl_Position = projectionMatrix * mvPosition;",i.ShaderChunk.logdepthbuf_vertex,"	vWorldPosition = worldPosition.xyz;","	vViewPosition = -mvPosition.xyz;","	#ifdef USE_SHADOWMAP","		for( int i = 0; i < MAX_SHADOWS; i ++ ) {","			vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;","		}","	#endif","}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","	vWorldPosition = worldPosition.xyz;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",i.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;","uniform float tFlip;","varying vec3 vWorldPosition;",i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",i.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.skinning_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.skinbase_vertex,i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.skinning_vertex,i.ShaderChunk.default_vertex,i.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[i.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {","	const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","	const vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","	vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );","	res -= res.xxyz * bit_mask;","	return res;","}","void main() {",i.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT","		gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );","	#else","		gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );","	#endif","}"].join("\n")}},i.WebGLRenderer=function(e){function t(e){e.__webglVertexBuffer=Ft.createBuffer(),e.__webglColorBuffer=Ft.createBuffer(),Xt.info.memory.geometries++}function n(e){e.__webglVertexBuffer=Ft.createBuffer(),e.__webglColorBuffer=Ft.createBuffer(),e.__webglLineDistanceBuffer=Ft.createBuffer(),Xt.info.memory.geometries++}function o(e){e.__webglVertexBuffer=Ft.createBuffer(),e.__webglNormalBuffer=Ft.createBuffer(),e.__webglTangentBuffer=Ft.createBuffer(),e.__webglColorBuffer=Ft.createBuffer(),e.__webglUVBuffer=Ft.createBuffer(),e.__webglUV2Buffer=Ft.createBuffer(),e.__webglSkinIndicesBuffer=Ft.createBuffer(),e.__webglSkinWeightsBuffer=Ft.createBuffer(),e.__webglFaceBuffer=Ft.createBuffer(),e.__webglLineBuffer=Ft.createBuffer();var t,n;if(e.numMorphTargets)for(e.__webglMorphTargetsBuffers=[],t=0,n=e.numMorphTargets;n>t;t++)e.__webglMorphTargetsBuffers.push(Ft.createBuffer());if(e.numMorphNormals)for(e.__webglMorphNormalsBuffers=[],t=0,n=e.numMorphNormals;n>t;t++)e.__webglMorphNormalsBuffers.push(Ft.createBuffer());Xt.info.memory.geometries++}function a(e,t){var n=e.vertices.length,r=t.material;if(r.attributes){void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[]);for(var i in r.attributes){var o=r.attributes[i];if(!o.__webglInitialized||o.createUniqueBuffers){o.__webglInitialized=!0;var a=1;"v2"===o.type?a=2:"v3"===o.type?a=3:"v4"===o.type?a=4:"c"===o.type&&(a=3),o.size=a,o.array=new Float32Array(n*a),o.buffer=Ft.createBuffer(),o.buffer.belongsToAttribute=i,o.needsUpdate=!0}e.__webglCustomAttributesList.push(o)}}}function s(e,t){var n=e.vertices.length;e.__vertexArray=new Float32Array(3*n),e.__colorArray=new Float32Array(3*n),e.__sortArray=[],e.__webglParticleCount=n,a(e,t)}function c(e,t){var n=e.vertices.length;e.__vertexArray=new Float32Array(3*n),e.__colorArray=new Float32Array(3*n),e.__lineDistanceArray=new Float32Array(1*n),e.__webglLineCount=n,a(e,t)}function l(e,t){var n=t.geometry,r=e.faces3,i=3*r.length,o=1*r.length,a=3*r.length,s=u(t,e),c=f(s),l=p(s),h=d(s);e.__vertexArray=new Float32Array(3*i),l&&(e.__normalArray=new Float32Array(3*i)),n.hasTangents&&(e.__tangentArray=new Float32Array(4*i)),h&&(e.__colorArray=new Float32Array(3*i)),c&&(n.faceVertexUvs.length>0&&(e.__uvArray=new Float32Array(2*i)),n.faceVertexUvs.length>1&&(e.__uv2Array=new Float32Array(2*i))),t.geometry.skinWeights.length&&t.geometry.skinIndices.length&&(e.__skinIndexArray=new Float32Array(4*i),e.__skinWeightArray=new Float32Array(4*i));var m=null!==Gt&&o>21845?Uint32Array:Uint16Array;e.__typeArray=m,e.__faceArray=new m(3*o),e.__lineArray=new m(2*a);var v,g;if(e.numMorphTargets)for(e.__morphTargetsArrays=[],v=0,g=e.numMorphTargets;g>v;v++)e.__morphTargetsArrays.push(new Float32Array(3*i));if(e.numMorphNormals)for(e.__morphNormalsArrays=[],v=0,g=e.numMorphNormals;g>v;v++)e.__morphNormalsArrays.push(new Float32Array(3*i));if(e.__webglFaceCount=3*o,e.__webglLineCount=2*a,s.attributes){void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[]);for(var y in s.attributes){var x=s.attributes[y],_={};for(var b in x)_[b]=x[b];if(!_.__webglInitialized||_.createUniqueBuffers){_.__webglInitialized=!0;var w=1;"v2"===_.type?w=2:"v3"===_.type?w=3:"v4"===_.type?w=4:"c"===_.type&&(w=3),_.size=w,_.array=new Float32Array(i*w),_.buffer=Ft.createBuffer(),_.buffer.belongsToAttribute=y,x.needsUpdate=!0,_.__original=x}e.__webglCustomAttributesList.push(_)}}e.__inittedArrays=!0}function u(e,t){return e.material instanceof i.MeshFaceMaterial?e.material.materials[t.materialIndex]:e.material
}function h(e){return e&&void 0!==e.shading&&e.shading===i.SmoothShading}function p(e){return e instanceof i.MeshBasicMaterial&&!e.envMap||e instanceof i.MeshDepthMaterial?!1:h(e)?i.SmoothShading:i.FlatShading}function d(e){return e.vertexColors?e.vertexColors:!1}function f(e){return e.map||e.lightMap||e.bumpMap||e.normalMap||e.specularMap||e.alphaMap||e instanceof i.ShaderMaterial?!0:!1}function m(e){for(var t in e.attributes){var n="index"===t?Ft.ELEMENT_ARRAY_BUFFER:Ft.ARRAY_BUFFER,r=e.attributes[t];r.buffer=Ft.createBuffer(),Ft.bindBuffer(n,r.buffer),Ft.bufferData(n,r.array,Ft.STATIC_DRAW)}}function v(e,t,n){var r,i,o,a,s,c,l,u,h,p,d,f,m=e.vertices,v=m.length,g=e.colors,y=g.length,x=e.__vertexArray,_=e.__colorArray,b=e.__sortArray,w=e.verticesNeedUpdate,E=(e.elementsNeedUpdate,e.colorsNeedUpdate),M=e.__webglCustomAttributesList;if(n.sortParticles){for(En.copy(wn),En.multiply(n.matrixWorld),r=0;v>r;r++)o=m[r],Mn.copy(o),Mn.applyProjection(En),b[r]=[Mn.z,r];for(b.sort(T),r=0;v>r;r++)o=m[b[r][1]],a=3*r,x[a]=o.x,x[a+1]=o.y,x[a+2]=o.z;for(i=0;y>i;i++)a=3*i,c=g[b[i][1]],_[a]=c.r,_[a+1]=c.g,_[a+2]=c.b;if(M)for(l=0,u=M.length;u>l;l++)if(f=M[l],void 0===f.boundTo||"vertices"===f.boundTo)if(a=0,p=f.value.length,1===f.size)for(h=0;p>h;h++)s=b[h][1],f.array[h]=f.value[s];else if(2===f.size)for(h=0;p>h;h++)s=b[h][1],d=f.value[s],f.array[a]=d.x,f.array[a+1]=d.y,a+=2;else if(3===f.size)if("c"===f.type)for(h=0;p>h;h++)s=b[h][1],d=f.value[s],f.array[a]=d.r,f.array[a+1]=d.g,f.array[a+2]=d.b,a+=3;else for(h=0;p>h;h++)s=b[h][1],d=f.value[s],f.array[a]=d.x,f.array[a+1]=d.y,f.array[a+2]=d.z,a+=3;else if(4===f.size)for(h=0;p>h;h++)s=b[h][1],d=f.value[s],f.array[a]=d.x,f.array[a+1]=d.y,f.array[a+2]=d.z,f.array[a+3]=d.w,a+=4}else{if(w)for(r=0;v>r;r++)o=m[r],a=3*r,x[a]=o.x,x[a+1]=o.y,x[a+2]=o.z;if(E)for(i=0;y>i;i++)c=g[i],a=3*i,_[a]=c.r,_[a+1]=c.g,_[a+2]=c.b;if(M)for(l=0,u=M.length;u>l;l++)if(f=M[l],f.needsUpdate&&(void 0===f.boundTo||"vertices"===f.boundTo))if(p=f.value.length,a=0,1===f.size)for(h=0;p>h;h++)f.array[h]=f.value[h];else if(2===f.size)for(h=0;p>h;h++)d=f.value[h],f.array[a]=d.x,f.array[a+1]=d.y,a+=2;else if(3===f.size)if("c"===f.type)for(h=0;p>h;h++)d=f.value[h],f.array[a]=d.r,f.array[a+1]=d.g,f.array[a+2]=d.b,a+=3;else for(h=0;p>h;h++)d=f.value[h],f.array[a]=d.x,f.array[a+1]=d.y,f.array[a+2]=d.z,a+=3;else if(4===f.size)for(h=0;p>h;h++)d=f.value[h],f.array[a]=d.x,f.array[a+1]=d.y,f.array[a+2]=d.z,f.array[a+3]=d.w,a+=4}if((w||n.sortParticles)&&(Ft.bindBuffer(Ft.ARRAY_BUFFER,e.__webglVertexBuffer),Ft.bufferData(Ft.ARRAY_BUFFER,x,t)),(E||n.sortParticles)&&(Ft.bindBuffer(Ft.ARRAY_BUFFER,e.__webglColorBuffer),Ft.bufferData(Ft.ARRAY_BUFFER,_,t)),M)for(l=0,u=M.length;u>l;l++)f=M[l],(f.needsUpdate||n.sortParticles)&&(Ft.bindBuffer(Ft.ARRAY_BUFFER,f.buffer),Ft.bufferData(Ft.ARRAY_BUFFER,f.array,t))}function g(e,t){var n,r,i,o,a,s,c,l,u,h,p,d,f=e.vertices,m=e.colors,v=e.lineDistances,g=f.length,y=m.length,x=v.length,_=e.__vertexArray,b=e.__colorArray,w=e.__lineDistanceArray,E=e.verticesNeedUpdate,M=e.colorsNeedUpdate,C=e.lineDistancesNeedUpdate,S=e.__webglCustomAttributesList;if(E){for(n=0;g>n;n++)o=f[n],a=3*n,_[a]=o.x,_[a+1]=o.y,_[a+2]=o.z;Ft.bindBuffer(Ft.ARRAY_BUFFER,e.__webglVertexBuffer),Ft.bufferData(Ft.ARRAY_BUFFER,_,t)}if(M){for(r=0;y>r;r++)s=m[r],a=3*r,b[a]=s.r,b[a+1]=s.g,b[a+2]=s.b;Ft.bindBuffer(Ft.ARRAY_BUFFER,e.__webglColorBuffer),Ft.bufferData(Ft.ARRAY_BUFFER,b,t)}if(C){for(i=0;x>i;i++)w[i]=v[i];Ft.bindBuffer(Ft.ARRAY_BUFFER,e.__webglLineDistanceBuffer),Ft.bufferData(Ft.ARRAY_BUFFER,w,t)}if(S)for(c=0,l=S.length;l>c;c++)if(d=S[c],d.needsUpdate&&(void 0===d.boundTo||"vertices"===d.boundTo)){if(a=0,h=d.value.length,1===d.size)for(u=0;h>u;u++)d.array[u]=d.value[u];else if(2===d.size)for(u=0;h>u;u++)p=d.value[u],d.array[a]=p.x,d.array[a+1]=p.y,a+=2;else if(3===d.size)if("c"===d.type)for(u=0;h>u;u++)p=d.value[u],d.array[a]=p.r,d.array[a+1]=p.g,d.array[a+2]=p.b,a+=3;else for(u=0;h>u;u++)p=d.value[u],d.array[a]=p.x,d.array[a+1]=p.y,d.array[a+2]=p.z,a+=3;else if(4===d.size)for(u=0;h>u;u++)p=d.value[u],d.array[a]=p.x,d.array[a+1]=p.y,d.array[a+2]=p.z,d.array[a+3]=p.w,a+=4;Ft.bindBuffer(Ft.ARRAY_BUFFER,d.buffer),Ft.bufferData(Ft.ARRAY_BUFFER,d.array,t)}}function y(e,t,n,r,o){if(e.__inittedArrays){var a,s,c,l,u,h,m,v,g,y,x,_,b,w,E,M,C,S,T,R,D,A,N,P,O,L,U,V,k,F,I,B,z,H,j,G,W,X,Y,q,K,Q,Z=p(o),J=d(o),$=f(o),et=Z===i.SmoothShading,tt=0,nt=0,rt=0,it=0,ot=0,at=0,st=0,ct=0,lt=0,ut=0,ht=0,pt=0,dt=0,ft=e.__vertexArray,mt=e.__uvArray,vt=e.__uv2Array,gt=e.__normalArray,yt=e.__tangentArray,xt=e.__colorArray,_t=e.__skinIndexArray,bt=e.__skinWeightArray,wt=e.__morphTargetsArrays,Et=e.__morphNormalsArrays,Mt=e.__webglCustomAttributesList,Ct=e.__faceArray,St=e.__lineArray,Tt=t.geometry,Rt=Tt.verticesNeedUpdate,Dt=Tt.elementsNeedUpdate,At=Tt.uvsNeedUpdate,Nt=Tt.normalsNeedUpdate,Pt=Tt.tangentsNeedUpdate,Ot=Tt.colorsNeedUpdate,Lt=Tt.morphTargetsNeedUpdate,Ut=Tt.vertices,Vt=e.faces3,kt=Tt.faces,It=Tt.faceVertexUvs[0],Bt=Tt.faceVertexUvs[1],zt=(Tt.colors,Tt.skinIndices),Ht=Tt.skinWeights,jt=Tt.morphTargets,Gt=Tt.morphNormals;if(Rt){for(a=0,s=Vt.length;s>a;a++)l=kt[Vt[a]],_=Ut[l.a],b=Ut[l.b],w=Ut[l.c],ft[nt]=_.x,ft[nt+1]=_.y,ft[nt+2]=_.z,ft[nt+3]=b.x,ft[nt+4]=b.y,ft[nt+5]=b.z,ft[nt+6]=w.x,ft[nt+7]=w.y,ft[nt+8]=w.z,nt+=9;Ft.bindBuffer(Ft.ARRAY_BUFFER,e.__webglVertexBuffer),Ft.bufferData(Ft.ARRAY_BUFFER,ft,n)}if(Lt)for(j=0,G=jt.length;G>j;j++){for(ht=0,a=0,s=Vt.length;s>a;a++)Y=Vt[a],l=kt[Y],_=jt[j].vertices[l.a],b=jt[j].vertices[l.b],w=jt[j].vertices[l.c],W=wt[j],W[ht]=_.x,W[ht+1]=_.y,W[ht+2]=_.z,W[ht+3]=b.x,W[ht+4]=b.y,W[ht+5]=b.z,W[ht+6]=w.x,W[ht+7]=w.y,W[ht+8]=w.z,o.morphNormals&&(et?(q=Gt[j].vertexNormals[Y],S=q.a,T=q.b,R=q.c):(S=Gt[j].faceNormals[Y],T=S,R=S),X=Et[j],X[ht]=S.x,X[ht+1]=S.y,X[ht+2]=S.z,X[ht+3]=T.x,X[ht+4]=T.y,X[ht+5]=T.z,X[ht+6]=R.x,X[ht+7]=R.y,X[ht+8]=R.z),ht+=9;Ft.bindBuffer(Ft.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[j]),Ft.bufferData(Ft.ARRAY_BUFFER,wt[j],n),o.morphNormals&&(Ft.bindBuffer(Ft.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[j]),Ft.bufferData(Ft.ARRAY_BUFFER,Et[j],n))}if(Ht.length){for(a=0,s=Vt.length;s>a;a++)l=kt[Vt[a]],P=Ht[l.a],O=Ht[l.b],L=Ht[l.c],bt[ut]=P.x,bt[ut+1]=P.y,bt[ut+2]=P.z,bt[ut+3]=P.w,bt[ut+4]=O.x,bt[ut+5]=O.y,bt[ut+6]=O.z,bt[ut+7]=O.w,bt[ut+8]=L.x,bt[ut+9]=L.y,bt[ut+10]=L.z,bt[ut+11]=L.w,U=zt[l.a],V=zt[l.b],k=zt[l.c],_t[ut]=U.x,_t[ut+1]=U.y,_t[ut+2]=U.z,_t[ut+3]=U.w,_t[ut+4]=V.x,_t[ut+5]=V.y,_t[ut+6]=V.z,_t[ut+7]=V.w,_t[ut+8]=k.x,_t[ut+9]=k.y,_t[ut+10]=k.z,_t[ut+11]=k.w,ut+=12;ut>0&&(Ft.bindBuffer(Ft.ARRAY_BUFFER,e.__webglSkinIndicesBuffer),Ft.bufferData(Ft.ARRAY_BUFFER,_t,n),Ft.bindBuffer(Ft.ARRAY_BUFFER,e.__webglSkinWeightsBuffer),Ft.bufferData(Ft.ARRAY_BUFFER,bt,n))}if(Ot&&J){for(a=0,s=Vt.length;s>a;a++)l=kt[Vt[a]],m=l.vertexColors,v=l.color,3===m.length&&J===i.VertexColors?(D=m[0],A=m[1],N=m[2]):(D=v,A=v,N=v),xt[lt]=D.r,xt[lt+1]=D.g,xt[lt+2]=D.b,xt[lt+3]=A.r,xt[lt+4]=A.g,xt[lt+5]=A.b,xt[lt+6]=N.r,xt[lt+7]=N.g,xt[lt+8]=N.b,lt+=9;lt>0&&(Ft.bindBuffer(Ft.ARRAY_BUFFER,e.__webglColorBuffer),Ft.bufferData(Ft.ARRAY_BUFFER,xt,n))}if(Pt&&Tt.hasTangents){for(a=0,s=Vt.length;s>a;a++)l=kt[Vt[a]],g=l.vertexTangents,E=g[0],M=g[1],C=g[2],yt[st]=E.x,yt[st+1]=E.y,yt[st+2]=E.z,yt[st+3]=E.w,yt[st+4]=M.x,yt[st+5]=M.y,yt[st+6]=M.z,yt[st+7]=M.w,yt[st+8]=C.x,yt[st+9]=C.y,yt[st+10]=C.z,yt[st+11]=C.w,st+=12;Ft.bindBuffer(Ft.ARRAY_BUFFER,e.__webglTangentBuffer),Ft.bufferData(Ft.ARRAY_BUFFER,yt,n)}if(Nt&&Z){for(a=0,s=Vt.length;s>a;a++)if(l=kt[Vt[a]],u=l.vertexNormals,h=l.normal,3===u.length&&et)for(F=0;3>F;F++)B=u[F],gt[at]=B.x,gt[at+1]=B.y,gt[at+2]=B.z,at+=3;else for(F=0;3>F;F++)gt[at]=h.x,gt[at+1]=h.y,gt[at+2]=h.z,at+=3;Ft.bindBuffer(Ft.ARRAY_BUFFER,e.__webglNormalBuffer),Ft.bufferData(Ft.ARRAY_BUFFER,gt,n)}if(At&&It&&$){for(a=0,s=Vt.length;s>a;a++)if(c=Vt[a],y=It[c],void 0!==y)for(F=0;3>F;F++)z=y[F],mt[rt]=z.x,mt[rt+1]=z.y,rt+=2;rt>0&&(Ft.bindBuffer(Ft.ARRAY_BUFFER,e.__webglUVBuffer),Ft.bufferData(Ft.ARRAY_BUFFER,mt,n))}if(At&&Bt&&$){for(a=0,s=Vt.length;s>a;a++)if(c=Vt[a],x=Bt[c],void 0!==x)for(F=0;3>F;F++)H=x[F],vt[it]=H.x,vt[it+1]=H.y,it+=2;it>0&&(Ft.bindBuffer(Ft.ARRAY_BUFFER,e.__webglUV2Buffer),Ft.bufferData(Ft.ARRAY_BUFFER,vt,n))}if(Dt){for(a=0,s=Vt.length;s>a;a++)Ct[ot]=tt,Ct[ot+1]=tt+1,Ct[ot+2]=tt+2,ot+=3,St[ct]=tt,St[ct+1]=tt+1,St[ct+2]=tt,St[ct+3]=tt+2,St[ct+4]=tt+1,St[ct+5]=tt+2,ct+=6,tt+=3;Ft.bindBuffer(Ft.ELEMENT_ARRAY_BUFFER,e.__webglFaceBuffer),Ft.bufferData(Ft.ELEMENT_ARRAY_BUFFER,Ct,n),Ft.bindBuffer(Ft.ELEMENT_ARRAY_BUFFER,e.__webglLineBuffer),Ft.bufferData(Ft.ELEMENT_ARRAY_BUFFER,St,n)}if(Mt)for(F=0,I=Mt.length;I>F;F++)if(Q=Mt[F],Q.__original.needsUpdate){if(pt=0,dt=0,1===Q.size){if(void 0===Q.boundTo||"vertices"===Q.boundTo)for(a=0,s=Vt.length;s>a;a++)l=kt[Vt[a]],Q.array[pt]=Q.value[l.a],Q.array[pt+1]=Q.value[l.b],Q.array[pt+2]=Q.value[l.c],pt+=3;else if("faces"===Q.boundTo)for(a=0,s=Vt.length;s>a;a++)K=Q.value[Vt[a]],Q.array[pt]=K,Q.array[pt+1]=K,Q.array[pt+2]=K,pt+=3}else if(2===Q.size){if(void 0===Q.boundTo||"vertices"===Q.boundTo)for(a=0,s=Vt.length;s>a;a++)l=kt[Vt[a]],_=Q.value[l.a],b=Q.value[l.b],w=Q.value[l.c],Q.array[pt]=_.x,Q.array[pt+1]=_.y,Q.array[pt+2]=b.x,Q.array[pt+3]=b.y,Q.array[pt+4]=w.x,Q.array[pt+5]=w.y,pt+=6;else if("faces"===Q.boundTo)for(a=0,s=Vt.length;s>a;a++)K=Q.value[Vt[a]],_=K,b=K,w=K,Q.array[pt]=_.x,Q.array[pt+1]=_.y,Q.array[pt+2]=b.x,Q.array[pt+3]=b.y,Q.array[pt+4]=w.x,Q.array[pt+5]=w.y,pt+=6}else if(3===Q.size){var Wt;if(Wt="c"===Q.type?["r","g","b"]:["x","y","z"],void 0===Q.boundTo||"vertices"===Q.boundTo)for(a=0,s=Vt.length;s>a;a++)l=kt[Vt[a]],_=Q.value[l.a],b=Q.value[l.b],w=Q.value[l.c],Q.array[pt]=_[Wt[0]],Q.array[pt+1]=_[Wt[1]],Q.array[pt+2]=_[Wt[2]],Q.array[pt+3]=b[Wt[0]],Q.array[pt+4]=b[Wt[1]],Q.array[pt+5]=b[Wt[2]],Q.array[pt+6]=w[Wt[0]],Q.array[pt+7]=w[Wt[1]],Q.array[pt+8]=w[Wt[2]],pt+=9;else if("faces"===Q.boundTo)for(a=0,s=Vt.length;s>a;a++)K=Q.value[Vt[a]],_=K,b=K,w=K,Q.array[pt]=_[Wt[0]],Q.array[pt+1]=_[Wt[1]],Q.array[pt+2]=_[Wt[2]],Q.array[pt+3]=b[Wt[0]],Q.array[pt+4]=b[Wt[1]],Q.array[pt+5]=b[Wt[2]],Q.array[pt+6]=w[Wt[0]],Q.array[pt+7]=w[Wt[1]],Q.array[pt+8]=w[Wt[2]],pt+=9;else if("faceVertices"===Q.boundTo)for(a=0,s=Vt.length;s>a;a++)K=Q.value[Vt[a]],_=K[0],b=K[1],w=K[2],Q.array[pt]=_[Wt[0]],Q.array[pt+1]=_[Wt[1]],Q.array[pt+2]=_[Wt[2]],Q.array[pt+3]=b[Wt[0]],Q.array[pt+4]=b[Wt[1]],Q.array[pt+5]=b[Wt[2]],Q.array[pt+6]=w[Wt[0]],Q.array[pt+7]=w[Wt[1]],Q.array[pt+8]=w[Wt[2]],pt+=9}else if(4===Q.size)if(void 0===Q.boundTo||"vertices"===Q.boundTo)for(a=0,s=Vt.length;s>a;a++)l=kt[Vt[a]],_=Q.value[l.a],b=Q.value[l.b],w=Q.value[l.c],Q.array[pt]=_.x,Q.array[pt+1]=_.y,Q.array[pt+2]=_.z,Q.array[pt+3]=_.w,Q.array[pt+4]=b.x,Q.array[pt+5]=b.y,Q.array[pt+6]=b.z,Q.array[pt+7]=b.w,Q.array[pt+8]=w.x,Q.array[pt+9]=w.y,Q.array[pt+10]=w.z,Q.array[pt+11]=w.w,pt+=12;else if("faces"===Q.boundTo)for(a=0,s=Vt.length;s>a;a++)K=Q.value[Vt[a]],_=K,b=K,w=K,Q.array[pt]=_.x,Q.array[pt+1]=_.y,Q.array[pt+2]=_.z,Q.array[pt+3]=_.w,Q.array[pt+4]=b.x,Q.array[pt+5]=b.y,Q.array[pt+6]=b.z,Q.array[pt+7]=b.w,Q.array[pt+8]=w.x,Q.array[pt+9]=w.y,Q.array[pt+10]=w.z,Q.array[pt+11]=w.w,pt+=12;else if("faceVertices"===Q.boundTo)for(a=0,s=Vt.length;s>a;a++)K=Q.value[Vt[a]],_=K[0],b=K[1],w=K[2],Q.array[pt]=_.x,Q.array[pt+1]=_.y,Q.array[pt+2]=_.z,Q.array[pt+3]=_.w,Q.array[pt+4]=b.x,Q.array[pt+5]=b.y,Q.array[pt+6]=b.z,Q.array[pt+7]=b.w,Q.array[pt+8]=w.x,Q.array[pt+9]=w.y,Q.array[pt+10]=w.z,Q.array[pt+11]=w.w,pt+=12;Ft.bindBuffer(Ft.ARRAY_BUFFER,Q.buffer),Ft.bufferData(Ft.ARRAY_BUFFER,Q.array,n)}r&&(delete e.__inittedArrays,delete e.__colorArray,delete e.__normalArray,delete e.__tangentArray,delete e.__uvArray,delete e.__uv2Array,delete e.__faceArray,delete e.__vertexArray,delete e.__lineArray,delete e.__skinIndexArray,delete e.__skinWeightArray)}}function x(e,t){var n,r,i=e.attributes;for(n in i)r=i[n],r.needsUpdate&&("index"===n?(Ft.bindBuffer(Ft.ELEMENT_ARRAY_BUFFER,r.buffer),Ft.bufferData(Ft.ELEMENT_ARRAY_BUFFER,r.array,t)):(Ft.bindBuffer(Ft.ARRAY_BUFFER,r.buffer),Ft.bufferData(Ft.ARRAY_BUFFER,r.array,t)),r.needsUpdate=!1)}function _(e,t,n,r){for(var i in t){var o=t[i],a=n[i];if(o>=0)if(a){var s=a.itemSize;Ft.bindBuffer(Ft.ARRAY_BUFFER,a.buffer),w(o),Ft.vertexAttribPointer(o,s,Ft.FLOAT,!1,0,r*s*4)}else e.defaultAttributeValues&&(2===e.defaultAttributeValues[i].length?Ft.vertexAttrib2fv(o,e.defaultAttributeValues[i]):3===e.defaultAttributeValues[i].length&&Ft.vertexAttrib3fv(o,e.defaultAttributeValues[i]))}E()}function b(){for(var e=0,t=xn.length;t>e;e++)xn[e]=0}function w(e){xn[e]=1,0===_n[e]&&(Ft.enableVertexAttribArray(e),_n[e]=1)}function E(){for(var e=0,t=_n.length;t>e;e++)_n[e]!==xn[e]&&(Ft.disableVertexAttribArray(e),_n[e]=0)}function M(e,t,n){var r=e.program.attributes;if(-1!==n.morphTargetBase&&r.position>=0?(Ft.bindBuffer(Ft.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[n.morphTargetBase]),w(r.position),Ft.vertexAttribPointer(r.position,3,Ft.FLOAT,!1,0,0)):r.position>=0&&(Ft.bindBuffer(Ft.ARRAY_BUFFER,t.__webglVertexBuffer),w(r.position),Ft.vertexAttribPointer(r.position,3,Ft.FLOAT,!1,0,0)),n.morphTargetForcedOrder.length)for(var i=0,o=n.morphTargetForcedOrder,a=n.morphTargetInfluences;i<e.numSupportedMorphTargets&&i<o.length;)r["morphTarget"+i]>=0&&(Ft.bindBuffer(Ft.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[o[i]]),w(r["morphTarget"+i]),Ft.vertexAttribPointer(r["morphTarget"+i],3,Ft.FLOAT,!1,0,0)),r["morphNormal"+i]>=0&&e.morphNormals&&(Ft.bindBuffer(Ft.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[o[i]]),w(r["morphNormal"+i]),Ft.vertexAttribPointer(r["morphNormal"+i],3,Ft.FLOAT,!1,0,0)),n.__webglMorphTargetInfluences[i]=a[o[i]],i++;else{var s,c,l=[],a=n.morphTargetInfluences,u=a.length;for(c=0;u>c;c++)s=a[c],s>0&&l.push([s,c]);l.length>e.numSupportedMorphTargets?(l.sort(T),l.length=e.numSupportedMorphTargets):l.length>e.numSupportedMorphNormals?l.sort(T):0===l.length&&l.push([0,0]);for(var h,i=0;i<e.numSupportedMorphTargets;)l[i]?(h=l[i][1],r["morphTarget"+i]>=0&&(Ft.bindBuffer(Ft.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[h]),w(r["morphTarget"+i]),Ft.vertexAttribPointer(r["morphTarget"+i],3,Ft.FLOAT,!1,0,0)),r["morphNormal"+i]>=0&&e.morphNormals&&(Ft.bindBuffer(Ft.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[h]),w(r["morphNormal"+i]),Ft.vertexAttribPointer(r["morphNormal"+i],3,Ft.FLOAT,!1,0,0)),n.__webglMorphTargetInfluences[i]=a[h]):n.__webglMorphTargetInfluences[i]=0,i++}null!==e.program.uniforms.morphTargetInfluences&&Ft.uniform1fv(e.program.uniforms.morphTargetInfluences,n.__webglMorphTargetInfluences)}function C(e,t){return e.z!==t.z?t.z-e.z:e.id-t.id}function S(e,t){return e.z!==t.z?e.z-t.z:e.id-t.id}function T(e,t){return t[0]-e[0]}function R(e,t,n){if(t.visible!==!1){var r=e.__webglObjects[t.id];if(r&&(t.frustumCulled===!1||bn.intersectsObject(t)===!0)){F(e,t);for(var i=0,o=r.length;o>i;i++){var a=r[i];O(a),a.render=!0,Xt.sortObjects===!0&&(null!==t.renderDepth?a.z=t.renderDepth:(Mn.setFromMatrixPosition(t.matrixWorld),Mn.applyProjection(wn),a.z=Mn.z))}}for(var i=0,o=t.children.length;o>i;i++)R(e,t.children[i],n)}}function D(e,t,n){if(0!==e.length)for(var r=0,i=e.length;i>r;r++)qt=null,Jt=null,nn=-1,sn=-1,cn=-1,en=-1,tn=-1,Zt=-1,Qt=-1,Sn=!0,e[r].render(t,n,gn,yn),qt=null,Jt=null,nn=-1,sn=-1,cn=-1,en=-1,tn=-1,Zt=-1,Qt=-1,Sn=!0}function A(e,t,n,r,o,a){for(var s,c,l,u,h=e.length-1;-1!==h;h--){if(s=e[h],c=s.object,l=s.buffer,it(c,t),a)u=a;else{if(u=s.material,!u)continue;o&&Xt.setBlending(u.blending,u.blendEquation,u.blendSrc,u.blendDst),Xt.setDepthTest(u.depthTest),Xt.setDepthWrite(u.depthWrite),lt(u.polygonOffset,u.polygonOffsetFactor,u.polygonOffsetUnits)}Xt.setMaterialFaces(u),l instanceof i.BufferGeometry?Xt.renderBufferDirect(t,n,r,u,l,c):Xt.renderBuffer(t,n,r,u,l,c)}}function N(e,t,n,r,i,o,a){for(var s,c,l,u=0,h=e.length;h>u;u++)if(s=e[u],c=s.object,c.visible){if(a)l=a;else{if(l=s[t],!l)continue;o&&Xt.setBlending(l.blending,l.blendEquation,l.blendSrc,l.blendDst),Xt.setDepthTest(l.depthTest),Xt.setDepthWrite(l.depthWrite),lt(l.polygonOffset,l.polygonOffsetFactor,l.polygonOffsetUnits)}Xt.renderImmediateObject(n,r,i,l,c)}}function P(e){var t=e.object,n=t.material;n.transparent?(e.transparent=n,e.opaque=null):(e.opaque=n,e.transparent=null)}function O(e){var t=e.object,n=e.buffer,r=t.geometry,o=t.material;if(o instanceof i.MeshFaceMaterial){var a=r instanceof i.BufferGeometry?0:n.materialIndex;o=o.materials[a],o.transparent?(e.material=o,kt.push(e)):(e.material=o,Vt.push(e))}else o&&(o.transparent?(e.material=o,kt.push(e)):(e.material=o,Vt.push(e)))}function L(e,r){var o,a;if(void 0===e.__webglInit&&(e.__webglInit=!0,e._modelViewMatrix=new i.Matrix4,e._normalMatrix=new i.Matrix3),o=e.geometry,void 0===o||void 0===o.__webglInit&&(o.__webglInit=!0,o.addEventListener("dispose",Bn),o instanceof i.BufferGeometry?m(o):e instanceof i.Mesh?(void 0!==e.__webglActive&&z(e,r),U(r,e,o)):e instanceof i.Line?o.__webglVertexBuffer||(n(o),c(o,e),o.verticesNeedUpdate=!0,o.colorsNeedUpdate=!0,o.lineDistancesNeedUpdate=!0):e instanceof i.PointCloud&&(o.__webglVertexBuffer||(t(o),s(o,e),o.verticesNeedUpdate=!0,o.colorsNeedUpdate=!0))),void 0===e.__webglActive){if(e instanceof i.Mesh){if(o=e.geometry,o instanceof i.BufferGeometry)V(r.__webglObjects,o,e);else if(o instanceof i.Geometry)for(var l=0,u=o.geometryGroupsList.length;u>l;l++)a=o.geometryGroupsList[l],V(r.__webglObjects,a,e)}else e instanceof i.Line||e instanceof i.PointCloud?(o=e.geometry,V(r.__webglObjects,o,e)):(e instanceof i.ImmediateRenderObject||e.immediateRenderCallback)&&k(r.__webglObjectsImmediate,e);e.__webglActive=!0}}function U(e,t,n){var r,a,s=!1;a=t.material,(void 0===n.geometryGroups||n.groupsNeedUpdate)&&(delete e.__webglObjects[t.id],n.makeGroups(a instanceof i.MeshFaceMaterial,Gt?4294967296:65535),n.groupsNeedUpdate=!1);for(var c=0,u=n.geometryGroupsList.length;u>c;c++)r=n.geometryGroupsList[c],r.__webglVertexBuffer?s=!1:(o(r),l(r,t),n.verticesNeedUpdate=!0,n.morphTargetsNeedUpdate=!0,n.elementsNeedUpdate=!0,n.uvsNeedUpdate=!0,n.normalsNeedUpdate=!0,n.tangentsNeedUpdate=!0,n.colorsNeedUpdate=!0,s=!0),(s||void 0===t.__webglActive)&&V(e.__webglObjects,r,t);t.__webglActive=!0}function V(e,t,n){var r=n.id;e[r]=e[r]||[],e[r].push({id:r,buffer:t,object:n,material:null,z:0})}function k(e,t){e.push({id:null,object:t,opaque:null,transparent:null,z:0})}function F(e,t){var n,r,o,a=t.geometry;if(a instanceof i.BufferGeometry)x(a,Ft.DYNAMIC_DRAW);else if(t instanceof i.Mesh){(a.buffersNeedUpdate||a.groupsNeedUpdate)&&(a instanceof i.BufferGeometry?m(a):t instanceof i.Mesh&&U(e,t,a));for(var s=0,c=a.geometryGroupsList.length;c>s;s++)n=a.geometryGroupsList[s],o=u(t,n),(a.buffersNeedUpdate||a.groupsNeedUpdate)&&l(n,t),r=o.attributes&&I(o),(a.verticesNeedUpdate||a.morphTargetsNeedUpdate||a.elementsNeedUpdate||a.uvsNeedUpdate||a.normalsNeedUpdate||a.colorsNeedUpdate||a.tangentsNeedUpdate||r)&&y(n,t,Ft.DYNAMIC_DRAW,!a.dynamic,o);a.verticesNeedUpdate=!1,a.morphTargetsNeedUpdate=!1,a.elementsNeedUpdate=!1,a.uvsNeedUpdate=!1,a.normalsNeedUpdate=!1,a.colorsNeedUpdate=!1,a.tangentsNeedUpdate=!1,a.buffersNeedUpdate=!1,o.attributes&&B(o)}else t instanceof i.Line?(o=u(t,a),r=o.attributes&&I(o),(a.verticesNeedUpdate||a.colorsNeedUpdate||a.lineDistancesNeedUpdate||r)&&g(a,Ft.DYNAMIC_DRAW),a.verticesNeedUpdate=!1,a.colorsNeedUpdate=!1,a.lineDistancesNeedUpdate=!1,o.attributes&&B(o)):t instanceof i.PointCloud&&(o=u(t,a),r=o.attributes&&I(o),(a.verticesNeedUpdate||a.colorsNeedUpdate||t.sortParticles||r)&&v(a,Ft.DYNAMIC_DRAW,t),a.verticesNeedUpdate=!1,a.colorsNeedUpdate=!1,o.attributes&&B(o))}function I(e){for(var t in e.attributes)if(e.attributes[t].needsUpdate)return!0;return!1}function B(e){for(var t in e.attributes)e.attributes[t].needsUpdate=!1}function z(e,t){e instanceof i.Mesh||e instanceof i.PointCloud||e instanceof i.Line?H(t.__webglObjects,e):(e instanceof i.ImmediateRenderObject||e.immediateRenderCallback)&&j(t.__webglObjectsImmediate,e),delete e.__webglActive}function H(e,t){delete e[t.id]}function j(e,t){for(var n=e.length-1;n>=0;n--)e[n].object===t&&e.splice(n,1)}function G(e,t,n,r,o){$t=0,r.needsUpdate&&(r.program&&qn(r),Xt.initMaterial(r,t,n,o),r.needsUpdate=!1),r.morphTargets&&(o.__webglMorphTargetInfluences||(o.__webglMorphTargetInfluences=new Float32Array(Xt.maxMorphTargets)));var a=!1,s=!1,c=!1,l=r.program,u=l.uniforms,h=r.__webglShader.uniforms;if(l.id!==qt&&(Ft.useProgram(l.program),qt=l.id,a=!0,s=!0,c=!0),r.id!==Qt&&(-1===Qt&&(c=!0),Qt=r.id,s=!0),(a||e!==Jt)&&(Ft.uniformMatrix4fv(u.projectionMatrix,!1,e.projectionMatrix.elements),Ot&&Ft.uniform1f(u.logDepthBufFC,2/(Math.log(e.far+1)/Math.LN2)),e!==Jt&&(Jt=e),(r instanceof i.ShaderMaterial||r instanceof i.MeshPhongMaterial||r.envMap)&&null!==u.cameraPosition&&(Mn.setFromMatrixPosition(e.matrixWorld),Ft.uniform3f(u.cameraPosition,Mn.x,Mn.y,Mn.z)),(r instanceof i.MeshPhongMaterial||r instanceof i.MeshLambertMaterial||r instanceof i.ShaderMaterial||r.skinning)&&null!==u.viewMatrix&&Ft.uniformMatrix4fv(u.viewMatrix,!1,e.matrixWorldInverse.elements)),r.skinning)if(o.bindMatrix&&null!==u.bindMatrix&&Ft.uniformMatrix4fv(u.bindMatrix,!1,o.bindMatrix.elements),o.bindMatrixInverse&&null!==u.bindMatrixInverse&&Ft.uniformMatrix4fv(u.bindMatrixInverse,!1,o.bindMatrixInverse.elements),On&&o.skeleton&&o.skeleton.useVertexTexture){if(null!==u.boneTexture){var p=nt();Ft.uniform1i(u.boneTexture,p),Xt.setTexture(o.skeleton.boneTexture,p)}null!==u.boneTextureWidth&&Ft.uniform1i(u.boneTextureWidth,o.skeleton.boneTextureWidth),null!==u.boneTextureHeight&&Ft.uniform1i(u.boneTextureHeight,o.skeleton.boneTextureHeight)}else o.skeleton&&o.skeleton.boneMatrices&&null!==u.boneGlobalMatrices&&Ft.uniformMatrix4fv(u.boneGlobalMatrices,!1,o.skeleton.boneMatrices);return s&&(n&&r.fog&&K(h,n),(r instanceof i.MeshPhongMaterial||r instanceof i.MeshLambertMaterial||r.lights)&&(Sn&&(c=!0,st(t),Sn=!1),c?(J(h,Tn),$(h,!0)):$(h,!1)),(r instanceof i.MeshBasicMaterial||r instanceof i.MeshLambertMaterial||r instanceof i.MeshPhongMaterial)&&W(h,r),r instanceof i.LineBasicMaterial?X(h,r):r instanceof i.LineDashedMaterial?(X(h,r),Y(h,r)):r instanceof i.PointCloudMaterial?q(h,r):r instanceof i.MeshPhongMaterial?Q(h,r):r instanceof i.MeshLambertMaterial?Z(h,r):r instanceof i.MeshDepthMaterial?(h.mNear.value=e.near,h.mFar.value=e.far,h.opacity.value=r.opacity):r instanceof i.MeshNormalMaterial&&(h.opacity.value=r.opacity),o.receiveShadow&&!r._shadowPass&&et(h,t),rt(r.uniformsList)),tt(u,o),null!==u.modelMatrix&&Ft.uniformMatrix4fv(u.modelMatrix,!1,o.matrixWorld.elements),l}function W(e,t){e.opacity.value=t.opacity,Xt.gammaInput?e.diffuse.value.copyGammaToLinear(t.color):e.diffuse.value=t.color,e.map.value=t.map,e.lightMap.value=t.lightMap,e.specularMap.value=t.specularMap,e.alphaMap.value=t.alphaMap,t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale));var n;if(t.map?n=t.map:t.specularMap?n=t.specularMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.alphaMap&&(n=t.alphaMap),void 0!==n){var r=n.offset,o=n.repeat;e.offsetRepeat.value.set(r.x,r.y,o.x,o.y)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap instanceof i.WebGLRenderTargetCube?1:-1,e.reflectivity.value=Xt.gammaInput?t.reflectivity:t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.combine.value=t.combine,e.useRefract.value=t.envMap&&t.envMap.mapping instanceof i.CubeRefractionMapping}function X(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function Y(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function q(e,t){e.psColor.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size,e.scale.value=Mt.height/2,e.map.value=t.map}function K(e,t){e.fogColor.value=t.color,t instanceof i.Fog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t instanceof i.FogExp2&&(e.fogDensity.value=t.density)}function Q(e,t){e.shininess.value=t.shininess,Xt.gammaInput?(e.ambient.value.copyGammaToLinear(t.ambient),e.emissive.value.copyGammaToLinear(t.emissive),e.specular.value.copyGammaToLinear(t.specular)):(e.ambient.value=t.ambient,e.emissive.value=t.emissive,e.specular.value=t.specular),t.wrapAround&&e.wrapRGB.value.copy(t.wrapRGB)}function Z(e,t){Xt.gammaInput?(e.ambient.value.copyGammaToLinear(t.ambient),e.emissive.value.copyGammaToLinear(t.emissive)):(e.ambient.value=t.ambient,e.emissive.value=t.emissive),t.wrapAround&&e.wrapRGB.value.copy(t.wrapRGB)}function J(e,t){e.ambientLightColor.value=t.ambient,e.directionalLightColor.value=t.directional.colors,e.directionalLightDirection.value=t.directional.positions,e.pointLightColor.value=t.point.colors,e.pointLightPosition.value=t.point.positions,e.pointLightDistance.value=t.point.distances,e.spotLightColor.value=t.spot.colors,e.spotLightPosition.value=t.spot.positions,e.spotLightDistance.value=t.spot.distances,e.spotLightDirection.value=t.spot.directions,e.spotLightAngleCos.value=t.spot.anglesCos,e.spotLightExponent.value=t.spot.exponents,e.hemisphereLightSkyColor.value=t.hemi.skyColors,e.hemisphereLightGroundColor.value=t.hemi.groundColors,e.hemisphereLightDirection.value=t.hemi.positions}function $(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLightColor.needsUpdate=t,e.directionalLightDirection.needsUpdate=t,e.pointLightColor.needsUpdate=t,e.pointLightPosition.needsUpdate=t,e.pointLightDistance.needsUpdate=t,e.spotLightColor.needsUpdate=t,e.spotLightPosition.needsUpdate=t,e.spotLightDistance.needsUpdate=t,e.spotLightDirection.needsUpdate=t,e.spotLightAngleCos.needsUpdate=t,e.spotLightExponent.needsUpdate=t,e.hemisphereLightSkyColor.needsUpdate=t,e.hemisphereLightGroundColor.needsUpdate=t,e.hemisphereLightDirection.needsUpdate=t}function et(e,t){if(e.shadowMatrix)for(var n=0,r=0,o=t.length;o>r;r++){var a=t[r];a.castShadow&&(a instanceof i.SpotLight||a instanceof i.DirectionalLight&&!a.shadowCascade)&&(e.shadowMap.value[n]=a.shadowMap,e.shadowMapSize.value[n]=a.shadowMapSize,e.shadowMatrix.value[n]=a.shadowMatrix,e.shadowDarkness.value[n]=a.shadowDarkness,e.shadowBias.value[n]=a.shadowBias,n++)}}function tt(e,t){Ft.uniformMatrix4fv(e.modelViewMatrix,!1,t._modelViewMatrix.elements),e.normalMatrix&&Ft.uniformMatrix3fv(e.normalMatrix,!1,t._normalMatrix.elements)}function nt(){var e=$t;return e>=Rn&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+Rn),$t+=1,e}function rt(e){for(var t,n,r,o=0,a=e.length;a>o;o++){var s=e[o][0];if(s.needsUpdate!==!1){var c=s.type,l=s.value,u=e[o][1];switch(c){case"1i":Ft.uniform1i(u,l);break;case"1f":Ft.uniform1f(u,l);break;case"2f":Ft.uniform2f(u,l[0],l[1]);break;case"3f":Ft.uniform3f(u,l[0],l[1],l[2]);break;case"4f":Ft.uniform4f(u,l[0],l[1],l[2],l[3]);break;case"1iv":Ft.uniform1iv(u,l);break;case"3iv":Ft.uniform3iv(u,l);break;case"1fv":Ft.uniform1fv(u,l);break;case"2fv":Ft.uniform2fv(u,l);break;case"3fv":Ft.uniform3fv(u,l);break;case"4fv":Ft.uniform4fv(u,l);break;case"Matrix3fv":Ft.uniformMatrix3fv(u,!1,l);break;case"Matrix4fv":Ft.uniformMatrix4fv(u,!1,l);break;case"i":Ft.uniform1i(u,l);break;case"f":Ft.uniform1f(u,l);break;case"v2":Ft.uniform2f(u,l.x,l.y);break;case"v3":Ft.uniform3f(u,l.x,l.y,l.z);break;case"v4":Ft.uniform4f(u,l.x,l.y,l.z,l.w);break;case"c":Ft.uniform3f(u,l.r,l.g,l.b);break;case"iv1":Ft.uniform1iv(u,l);break;case"iv":Ft.uniform3iv(u,l);break;case"fv1":Ft.uniform1fv(u,l);break;case"fv":Ft.uniform3fv(u,l);break;case"v2v":void 0===s._array&&(s._array=new Float32Array(2*l.length));for(var h=0,p=l.length;p>h;h++)r=2*h,s._array[r]=l[h].x,s._array[r+1]=l[h].y;Ft.uniform2fv(u,s._array);break;case"v3v":void 0===s._array&&(s._array=new Float32Array(3*l.length));for(var h=0,p=l.length;p>h;h++)r=3*h,s._array[r]=l[h].x,s._array[r+1]=l[h].y,s._array[r+2]=l[h].z;Ft.uniform3fv(u,s._array);break;case"v4v":void 0===s._array&&(s._array=new Float32Array(4*l.length));for(var h=0,p=l.length;p>h;h++)r=4*h,s._array[r]=l[h].x,s._array[r+1]=l[h].y,s._array[r+2]=l[h].z,s._array[r+3]=l[h].w;Ft.uniform4fv(u,s._array);break;case"m3":Ft.uniformMatrix3fv(u,!1,l.elements);break;case"m3v":void 0===s._array&&(s._array=new Float32Array(9*l.length));for(var h=0,p=l.length;p>h;h++)l[h].flattenToArrayOffset(s._array,9*h);Ft.uniformMatrix3fv(u,!1,s._array);break;case"m4":Ft.uniformMatrix4fv(u,!1,l.elements);break;case"m4v":void 0===s._array&&(s._array=new Float32Array(16*l.length));for(var h=0,p=l.length;p>h;h++)l[h].flattenToArrayOffset(s._array,16*h);Ft.uniformMatrix4fv(u,!1,s._array);break;case"t":if(t=l,n=nt(),Ft.uniform1i(u,n),!t)continue;t instanceof i.CubeTexture||t.image instanceof Array&&6===t.image.length?pt(t,n):t instanceof i.WebGLRenderTargetCube?dt(t,n):Xt.setTexture(t,n);break;case"tv":void 0===s._array&&(s._array=[]);for(var h=0,p=s.value.length;p>h;h++)s._array[h]=nt();Ft.uniform1iv(u,s._array);for(var h=0,p=s.value.length;p>h;h++)t=s.value[h],n=s._array[h],t&&Xt.setTexture(t,n);break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+c)}}}}function it(e,t){e._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld),e._normalMatrix.getNormalMatrix(e._modelViewMatrix)}function ot(e,t,n,r){e[t]=n.r*n.r*r,e[t+1]=n.g*n.g*r,e[t+2]=n.b*n.b*r}function at(e,t,n,r){e[t]=n.r*r,e[t+1]=n.g*r,e[t+2]=n.b*r}function st(e){var t,n,r,o,a,s,c,l,u,h=0,p=0,d=0,f=Tn,m=f.directional.colors,v=f.directional.positions,g=f.point.colors,y=f.point.positions,x=f.point.distances,_=f.spot.colors,b=f.spot.positions,w=f.spot.distances,E=f.spot.directions,M=f.spot.anglesCos,C=f.spot.exponents,S=f.hemi.skyColors,T=f.hemi.groundColors,R=f.hemi.positions,D=0,A=0,N=0,P=0,O=0,L=0,U=0,V=0,k=0,F=0,I=0,B=0;for(t=0,n=e.length;n>t;t++)if(r=e[t],!r.onlyShadow)if(o=r.color,c=r.intensity,u=r.distance,r instanceof i.AmbientLight){if(!r.visible)continue;Xt.gammaInput?(h+=o.r*o.r,p+=o.g*o.g,d+=o.b*o.b):(h+=o.r,p+=o.g,d+=o.b)}else if(r instanceof i.DirectionalLight){if(O+=1,!r.visible)continue;Cn.setFromMatrixPosition(r.matrixWorld),Mn.setFromMatrixPosition(r.target.matrixWorld),Cn.sub(Mn),Cn.normalize(),k=3*D,v[k]=Cn.x,v[k+1]=Cn.y,v[k+2]=Cn.z,Xt.gammaInput?ot(m,k,o,c*c):at(m,k,o,c),D+=1}else if(r instanceof i.PointLight){if(L+=1,!r.visible)continue;F=3*A,Xt.gammaInput?ot(g,F,o,c*c):at(g,F,o,c),Mn.setFromMatrixPosition(r.matrixWorld),y[F]=Mn.x,y[F+1]=Mn.y,y[F+2]=Mn.z,x[A]=u,A+=1}else if(r instanceof i.SpotLight){if(U+=1,!r.visible)continue;I=3*N,Xt.gammaInput?ot(_,I,o,c*c):at(_,I,o,c),Mn.setFromMatrixPosition(r.matrixWorld),b[I]=Mn.x,b[I+1]=Mn.y,b[I+2]=Mn.z,w[N]=u,Cn.copy(Mn),Mn.setFromMatrixPosition(r.target.matrixWorld),Cn.sub(Mn),Cn.normalize(),E[I]=Cn.x,E[I+1]=Cn.y,E[I+2]=Cn.z,M[N]=Math.cos(r.angle),C[N]=r.exponent,N+=1}else if(r instanceof i.HemisphereLight){if(V+=1,!r.visible)continue;Cn.setFromMatrixPosition(r.matrixWorld),Cn.normalize(),B=3*P,R[B]=Cn.x,R[B+1]=Cn.y,R[B+2]=Cn.z,a=r.color,s=r.groundColor,Xt.gammaInput?(l=c*c,ot(S,B,a,l),ot(T,B,s,l)):(at(S,B,a,c),at(T,B,s,c)),P+=1}for(t=3*D,n=Math.max(m.length,3*O);n>t;t++)m[t]=0;for(t=3*A,n=Math.max(g.length,3*L);n>t;t++)g[t]=0;for(t=3*N,n=Math.max(_.length,3*U);n>t;t++)_[t]=0;for(t=3*P,n=Math.max(S.length,3*V);n>t;t++)S[t]=0;for(t=3*P,n=Math.max(T.length,3*V);n>t;t++)T[t]=0;f.directional.length=D,f.point.length=A,f.spot.length=N,f.hemi.length=P,f.ambient[0]=h,f.ambient[1]=p,f.ambient[2]=d}function ct(e){e!==pn&&(Ft.lineWidth(e),pn=e)}function lt(e,t,n){ln!==e&&(e?Ft.enable(Ft.POLYGON_OFFSET_FILL):Ft.disable(Ft.POLYGON_OFFSET_FILL),ln=e),!e||un===t&&hn===n||(Ft.polygonOffset(t,n),un=t,hn=n)}function ut(e,t,n){n?(Ft.texParameteri(e,Ft.TEXTURE_WRAP_S,yt(t.wrapS)),Ft.texParameteri(e,Ft.TEXTURE_WRAP_T,yt(t.wrapT)),Ft.texParameteri(e,Ft.TEXTURE_MAG_FILTER,yt(t.magFilter)),Ft.texParameteri(e,Ft.TEXTURE_MIN_FILTER,yt(t.minFilter))):(Ft.texParameteri(e,Ft.TEXTURE_WRAP_S,Ft.CLAMP_TO_EDGE),Ft.texParameteri(e,Ft.TEXTURE_WRAP_T,Ft.CLAMP_TO_EDGE),Ft.texParameteri(e,Ft.TEXTURE_MAG_FILTER,gt(t.magFilter)),Ft.texParameteri(e,Ft.TEXTURE_MIN_FILTER,gt(t.minFilter))),Ht&&t.type!==i.FloatType&&(t.anisotropy>1||t.__oldAnisotropy)&&(Ft.texParameterf(e,Ht.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,Nn)),t.__oldAnisotropy=t.anisotropy)
}function ht(e,t){if(e.width<=t&&e.height<=t)return e;var n=Math.max(e.width,e.height),r=Math.floor(e.width*t/n),i=Math.floor(e.height*t/n),o=document.createElement("canvas");o.width=r,o.height=i;var a=o.getContext("2d");return a.drawImage(e,0,0,e.width,e.height,0,0,r,i),o}function pt(e,t){if(6===e.image.length)if(e.needsUpdate){e.image.__webglTextureCube||(e.addEventListener("dispose",zn),e.image.__webglTextureCube=Ft.createTexture(),Xt.info.memory.textures++),Ft.activeTexture(Ft.TEXTURE0+t),Ft.bindTexture(Ft.TEXTURE_CUBE_MAP,e.image.__webglTextureCube),Ft.pixelStorei(Ft.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var n=e instanceof i.CompressedTexture,r=[],o=0;6>o;o++)r[o]=Xt.autoScaleCubemaps&&!n?ht(e.image[o],An):e.image[o];var a=r[0],s=i.Math.isPowerOfTwo(a.width)&&i.Math.isPowerOfTwo(a.height),c=yt(e.format),l=yt(e.type);ut(Ft.TEXTURE_CUBE_MAP,e,s);for(var o=0;6>o;o++)if(n)for(var u,h=r[o].mipmaps,p=0,d=h.length;d>p;p++)u=h[p],e.format!==i.RGBAFormat?Ft.compressedTexImage2D(Ft.TEXTURE_CUBE_MAP_POSITIVE_X+o,p,c,u.width,u.height,0,u.data):Ft.texImage2D(Ft.TEXTURE_CUBE_MAP_POSITIVE_X+o,p,c,u.width,u.height,0,c,l,u.data);else Ft.texImage2D(Ft.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,c,c,l,r[o]);e.generateMipmaps&&s&&Ft.generateMipmap(Ft.TEXTURE_CUBE_MAP),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()}else Ft.activeTexture(Ft.TEXTURE0+t),Ft.bindTexture(Ft.TEXTURE_CUBE_MAP,e.image.__webglTextureCube)}function dt(e,t){Ft.activeTexture(Ft.TEXTURE0+t),Ft.bindTexture(Ft.TEXTURE_CUBE_MAP,e.__webglTexture)}function ft(e,t,n){Ft.bindFramebuffer(Ft.FRAMEBUFFER,e),Ft.framebufferTexture2D(Ft.FRAMEBUFFER,Ft.COLOR_ATTACHMENT0,n,t.__webglTexture,0)}function mt(e,t){Ft.bindRenderbuffer(Ft.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer?(Ft.renderbufferStorage(Ft.RENDERBUFFER,Ft.DEPTH_COMPONENT16,t.width,t.height),Ft.framebufferRenderbuffer(Ft.FRAMEBUFFER,Ft.DEPTH_ATTACHMENT,Ft.RENDERBUFFER,e)):t.depthBuffer&&t.stencilBuffer?(Ft.renderbufferStorage(Ft.RENDERBUFFER,Ft.DEPTH_STENCIL,t.width,t.height),Ft.framebufferRenderbuffer(Ft.FRAMEBUFFER,Ft.DEPTH_STENCIL_ATTACHMENT,Ft.RENDERBUFFER,e)):Ft.renderbufferStorage(Ft.RENDERBUFFER,Ft.RGBA4,t.width,t.height)}function vt(e){e instanceof i.WebGLRenderTargetCube?(Ft.bindTexture(Ft.TEXTURE_CUBE_MAP,e.__webglTexture),Ft.generateMipmap(Ft.TEXTURE_CUBE_MAP),Ft.bindTexture(Ft.TEXTURE_CUBE_MAP,null)):(Ft.bindTexture(Ft.TEXTURE_2D,e.__webglTexture),Ft.generateMipmap(Ft.TEXTURE_2D),Ft.bindTexture(Ft.TEXTURE_2D,null))}function gt(e){return e===i.NearestFilter||e===i.NearestMipMapNearestFilter||e===i.NearestMipMapLinearFilter?Ft.NEAREST:Ft.LINEAR}function yt(e){if(e===i.RepeatWrapping)return Ft.REPEAT;if(e===i.ClampToEdgeWrapping)return Ft.CLAMP_TO_EDGE;if(e===i.MirroredRepeatWrapping)return Ft.MIRRORED_REPEAT;if(e===i.NearestFilter)return Ft.NEAREST;if(e===i.NearestMipMapNearestFilter)return Ft.NEAREST_MIPMAP_NEAREST;if(e===i.NearestMipMapLinearFilter)return Ft.NEAREST_MIPMAP_LINEAR;if(e===i.LinearFilter)return Ft.LINEAR;if(e===i.LinearMipMapNearestFilter)return Ft.LINEAR_MIPMAP_NEAREST;if(e===i.LinearMipMapLinearFilter)return Ft.LINEAR_MIPMAP_LINEAR;if(e===i.UnsignedByteType)return Ft.UNSIGNED_BYTE;if(e===i.UnsignedShort4444Type)return Ft.UNSIGNED_SHORT_4_4_4_4;if(e===i.UnsignedShort5551Type)return Ft.UNSIGNED_SHORT_5_5_5_1;if(e===i.UnsignedShort565Type)return Ft.UNSIGNED_SHORT_5_6_5;if(e===i.ByteType)return Ft.BYTE;if(e===i.ShortType)return Ft.SHORT;if(e===i.UnsignedShortType)return Ft.UNSIGNED_SHORT;if(e===i.IntType)return Ft.INT;if(e===i.UnsignedIntType)return Ft.UNSIGNED_INT;if(e===i.FloatType)return Ft.FLOAT;if(e===i.AlphaFormat)return Ft.ALPHA;if(e===i.RGBFormat)return Ft.RGB;if(e===i.RGBAFormat)return Ft.RGBA;if(e===i.LuminanceFormat)return Ft.LUMINANCE;if(e===i.LuminanceAlphaFormat)return Ft.LUMINANCE_ALPHA;if(e===i.AddEquation)return Ft.FUNC_ADD;if(e===i.SubtractEquation)return Ft.FUNC_SUBTRACT;if(e===i.ReverseSubtractEquation)return Ft.FUNC_REVERSE_SUBTRACT;if(e===i.ZeroFactor)return Ft.ZERO;if(e===i.OneFactor)return Ft.ONE;if(e===i.SrcColorFactor)return Ft.SRC_COLOR;if(e===i.OneMinusSrcColorFactor)return Ft.ONE_MINUS_SRC_COLOR;if(e===i.SrcAlphaFactor)return Ft.SRC_ALPHA;if(e===i.OneMinusSrcAlphaFactor)return Ft.ONE_MINUS_SRC_ALPHA;if(e===i.DstAlphaFactor)return Ft.DST_ALPHA;if(e===i.OneMinusDstAlphaFactor)return Ft.ONE_MINUS_DST_ALPHA;if(e===i.DstColorFactor)return Ft.DST_COLOR;if(e===i.OneMinusDstColorFactor)return Ft.ONE_MINUS_DST_COLOR;if(e===i.SrcAlphaSaturateFactor)return Ft.SRC_ALPHA_SATURATE;if(void 0!==jt){if(e===i.RGB_S3TC_DXT1_Format)return jt.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===i.RGBA_S3TC_DXT1_Format)return jt.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===i.RGBA_S3TC_DXT3_Format)return jt.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===i.RGBA_S3TC_DXT5_Format)return jt.COMPRESSED_RGBA_S3TC_DXT5_EXT}return 0}function xt(e){if(On&&e&&e.skeleton&&e.skeleton.useVertexTexture)return 1024;var t=Ft.getParameter(Ft.MAX_VERTEX_UNIFORM_VECTORS),n=Math.floor((t-20)/4),r=n;return void 0!==e&&e instanceof i.SkinnedMesh&&(r=Math.min(e.skeleton.bones.length,r),r<e.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+e.skeleton.bones.length+", this GPU supports just "+r+" (try OpenGL instead of ANGLE)")),r}function _t(e){for(var t=0,n=0,r=0,o=0,a=0,s=e.length;s>a;a++){var c=e[a];c.onlyShadow||c.visible===!1||(c instanceof i.DirectionalLight&&t++,c instanceof i.PointLight&&n++,c instanceof i.SpotLight&&r++,c instanceof i.HemisphereLight&&o++)}return{directional:t,point:n,spot:r,hemi:o}}function bt(e){for(var t=0,n=0,r=e.length;r>n;n++){var o=e[n];o.castShadow&&(o instanceof i.SpotLight&&t++,o instanceof i.DirectionalLight&&!o.shadowCascade&&t++)}return t}function wt(){try{var e={alpha:Tt,depth:Rt,stencil:Dt,antialias:At,premultipliedAlpha:Nt,preserveDrawingBuffer:Pt};if(Ft=Ct||Mt.getContext("webgl",e)||Mt.getContext("experimental-webgl",e),null===Ft)throw"Error creating WebGL context."}catch(t){console.error(t)}It=Ft.getExtension("OES_texture_float"),Bt=Ft.getExtension("OES_texture_float_linear"),zt=Ft.getExtension("OES_standard_derivatives"),Ht=Ft.getExtension("EXT_texture_filter_anisotropic")||Ft.getExtension("MOZ_EXT_texture_filter_anisotropic")||Ft.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),jt=Ft.getExtension("WEBGL_compressed_texture_s3tc")||Ft.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||Ft.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"),Gt=Ft.getExtension("OES_element_index_uint"),null===It&&console.log("THREE.WebGLRenderer: Float textures not supported."),null===zt&&console.log("THREE.WebGLRenderer: Standard derivatives not supported."),null===Ht&&console.log("THREE.WebGLRenderer: Anisotropic texture filtering not supported."),null===jt&&console.log("THREE.WebGLRenderer: S3TC compressed textures not supported."),null===Gt&&console.log("THREE.WebGLRenderer: elementindex as unsigned integer not supported."),void 0===Ft.getShaderPrecisionFormat&&(Ft.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),Ot&&(Wt=Ft.getExtension("EXT_frag_depth"))}function Et(){Ft.clearColor(0,0,0,1),Ft.clearDepth(1),Ft.clearStencil(0),Ft.enable(Ft.DEPTH_TEST),Ft.depthFunc(Ft.LEQUAL),Ft.frontFace(Ft.CCW),Ft.cullFace(Ft.BACK),Ft.enable(Ft.CULL_FACE),Ft.enable(Ft.BLEND),Ft.blendEquation(Ft.FUNC_ADD),Ft.blendFunc(Ft.SRC_ALPHA,Ft.ONE_MINUS_SRC_ALPHA),Ft.viewport(dn,fn,mn,vn),Ft.clearColor(Lt.r,Lt.g,Lt.b,Ut)}console.log("THREE.WebGLRenderer",i.REVISION),e=e||{};var Mt=void 0!==e.canvas?e.canvas:document.createElement("canvas"),Ct=void 0!==e.context?e.context:null,St=void 0!==e.precision?e.precision:"highp",Tt=void 0!==e.alpha?e.alpha:!1,Rt=void 0!==e.depth?e.depth:!0,Dt=void 0!==e.stencil?e.stencil:!0,At=void 0!==e.antialias?e.antialias:!1,Nt=void 0!==e.premultipliedAlpha?e.premultipliedAlpha:!0,Pt=void 0!==e.preserveDrawingBuffer?e.preserveDrawingBuffer:!1,Ot=void 0!==e.logarithmicDepthBuffer?e.logarithmicDepthBuffer:!1,Lt=new i.Color(0),Ut=0,Vt=[],kt=[];this.domElement=Mt,this.context=null,this.devicePixelRatio=void 0!==e.devicePixelRatio?e.devicePixelRatio:void 0!==r.devicePixelRatio?r.devicePixelRatio:1,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.gammaInput=!1,this.gammaOutput=!1,this.shadowMapEnabled=!1,this.shadowMapAutoUpdate=!0,this.shadowMapType=i.PCFShadowMap,this.shadowMapCullFace=i.CullFaceFront,this.shadowMapDebug=!1,this.shadowMapCascade=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.renderPluginsPre=[],this.renderPluginsPost=[],this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var Ft,It,Bt,zt,Ht,jt,Gt,Wt,Xt=this,Yt=[],qt=null,Kt=null,Qt=-1,Zt=null,Jt=null,$t=0,en=-1,tn=-1,nn=-1,rn=-1,on=-1,an=-1,sn=-1,cn=-1,ln=null,un=null,hn=null,pn=null,dn=0,fn=0,mn=Mt.width,vn=Mt.height,gn=0,yn=0,xn=new Uint8Array(16),_n=new Uint8Array(16),bn=new i.Frustum,wn=new i.Matrix4,En=new i.Matrix4,Mn=new i.Vector3,Cn=new i.Vector3,Sn=!0,Tn={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}};wt(),Et(),this.context=Ft;var Rn=Ft.getParameter(Ft.MAX_TEXTURE_IMAGE_UNITS),Dn=Ft.getParameter(Ft.MAX_VERTEX_TEXTURE_IMAGE_UNITS),An=(Ft.getParameter(Ft.MAX_TEXTURE_SIZE),Ft.getParameter(Ft.MAX_CUBE_MAP_TEXTURE_SIZE)),Nn=Ht?Ft.getParameter(Ht.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,Pn=Dn>0,On=Pn&&It,Ln=(jt?Ft.getParameter(Ft.COMPRESSED_TEXTURE_FORMATS):[],Ft.getShaderPrecisionFormat(Ft.VERTEX_SHADER,Ft.HIGH_FLOAT)),Un=Ft.getShaderPrecisionFormat(Ft.VERTEX_SHADER,Ft.MEDIUM_FLOAT),Vn=(Ft.getShaderPrecisionFormat(Ft.VERTEX_SHADER,Ft.LOW_FLOAT),Ft.getShaderPrecisionFormat(Ft.FRAGMENT_SHADER,Ft.HIGH_FLOAT)),kn=Ft.getShaderPrecisionFormat(Ft.FRAGMENT_SHADER,Ft.MEDIUM_FLOAT),Fn=(Ft.getShaderPrecisionFormat(Ft.FRAGMENT_SHADER,Ft.LOW_FLOAT),Ln.precision>0&&Vn.precision>0),In=Un.precision>0&&kn.precision>0;"highp"!==St||Fn||(In?(St="mediump",console.warn("THREE.WebGLRenderer: highp not supported, using mediump.")):(St="lowp",console.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp."))),"mediump"!==St||In||(St="lowp",console.warn("THREE.WebGLRenderer: mediump not supported, using lowp.")),this.getContext=function(){return Ft},this.supportsVertexTextures=function(){return Pn},this.supportsFloatTextures=function(){return It},this.supportsStandardDerivatives=function(){return zt},this.supportsCompressedTextureS3TC=function(){return jt},this.getMaxAnisotropy=function(){return Nn},this.getPrecision=function(){return St},this.setSize=function(e,t,n){Mt.width=e*this.devicePixelRatio,Mt.height=t*this.devicePixelRatio,n!==!1&&(Mt.style.width=e+"px",Mt.style.height=t+"px"),this.setViewport(0,0,e,t)},this.setViewport=function(e,t,n,r){dn=e*this.devicePixelRatio,fn=t*this.devicePixelRatio,mn=n*this.devicePixelRatio,vn=r*this.devicePixelRatio,Ft.viewport(dn,fn,mn,vn)},this.setScissor=function(e,t,n,r){Ft.scissor(e*this.devicePixelRatio,t*this.devicePixelRatio,n*this.devicePixelRatio,r*this.devicePixelRatio)},this.enableScissorTest=function(e){e?Ft.enable(Ft.SCISSOR_TEST):Ft.disable(Ft.SCISSOR_TEST)},this.setClearColor=function(e,t){Lt.set(e),Ut=void 0!==t?t:1,Ft.clearColor(Lt.r,Lt.g,Lt.b,Ut)},this.setClearColorHex=function(e,t){console.warn("THREE.WebGLRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead."),this.setClearColor(e,t)},this.getClearColor=function(){return Lt},this.getClearAlpha=function(){return Ut},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=Ft.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=Ft.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=Ft.STENCIL_BUFFER_BIT),Ft.clear(r)},this.clearColor=function(){Ft.clear(Ft.COLOR_BUFFER_BIT)},this.clearDepth=function(){Ft.clear(Ft.DEPTH_BUFFER_BIT)},this.clearStencil=function(){Ft.clear(Ft.STENCIL_BUFFER_BIT)},this.clearTarget=function(e,t,n,r){this.setRenderTarget(e),this.clear(t,n,r)},this.addPostPlugin=function(e){e.init(this),this.renderPluginsPost.push(e)},this.addPrePlugin=function(e){e.init(this),this.renderPluginsPre.push(e)},this.updateShadowMap=function(e,t){qt=null,nn=-1,sn=-1,cn=-1,Zt=-1,Qt=-1,Sn=!0,en=-1,tn=-1,Kn(e),this.shadowMapPlugin.update(e,t)};var Bn=function(e){var t=e.target;t.removeEventListener("dispose",Bn),Wn(t)},zn=function(e){var t=e.target;t.removeEventListener("dispose",zn),Xn(t),Xt.info.memory.textures--},Hn=function(e){var t=e.target;t.removeEventListener("dispose",Hn),Yn(t),Xt.info.memory.textures--},jn=function(e){var t=e.target;t.removeEventListener("dispose",jn),qn(t)},Gn=function(e){if(void 0!==e.__webglVertexBuffer&&Ft.deleteBuffer(e.__webglVertexBuffer),void 0!==e.__webglNormalBuffer&&Ft.deleteBuffer(e.__webglNormalBuffer),void 0!==e.__webglTangentBuffer&&Ft.deleteBuffer(e.__webglTangentBuffer),void 0!==e.__webglColorBuffer&&Ft.deleteBuffer(e.__webglColorBuffer),void 0!==e.__webglUVBuffer&&Ft.deleteBuffer(e.__webglUVBuffer),void 0!==e.__webglUV2Buffer&&Ft.deleteBuffer(e.__webglUV2Buffer),void 0!==e.__webglSkinIndicesBuffer&&Ft.deleteBuffer(e.__webglSkinIndicesBuffer),void 0!==e.__webglSkinWeightsBuffer&&Ft.deleteBuffer(e.__webglSkinWeightsBuffer),void 0!==e.__webglFaceBuffer&&Ft.deleteBuffer(e.__webglFaceBuffer),void 0!==e.__webglLineBuffer&&Ft.deleteBuffer(e.__webglLineBuffer),void 0!==e.__webglLineDistanceBuffer&&Ft.deleteBuffer(e.__webglLineDistanceBuffer),void 0!==e.__webglCustomAttributesList)for(var t in e.__webglCustomAttributesList)Ft.deleteBuffer(e.__webglCustomAttributesList[t].buffer);Xt.info.memory.geometries--},Wn=function(e){if(e.__webglInit=void 0,e instanceof i.BufferGeometry){var t=e.attributes;for(var n in t)void 0!==t[n].buffer&&Ft.deleteBuffer(t[n].buffer);Xt.info.memory.geometries--}else if(void 0!==e.geometryGroups)for(var r=0,o=e.geometryGroupsList.length;o>r;r++){var a=e.geometryGroupsList[r];if(void 0!==a.numMorphTargets)for(var s=0,c=a.numMorphTargets;c>s;s++)Ft.deleteBuffer(a.__webglMorphTargetsBuffers[s]);if(void 0!==a.numMorphNormals)for(var s=0,c=a.numMorphNormals;c>s;s++)Ft.deleteBuffer(a.__webglMorphNormalsBuffers[s]);Gn(a)}else Gn(e)},Xn=function(e){if(e.image&&e.image.__webglTextureCube)Ft.deleteTexture(e.image.__webglTextureCube);else{if(!e.__webglInit)return;e.__webglInit=!1,Ft.deleteTexture(e.__webglTexture)}},Yn=function(e){if(e&&e.__webglTexture)if(Ft.deleteTexture(e.__webglTexture),e instanceof i.WebGLRenderTargetCube)for(var t=0;6>t;t++)Ft.deleteFramebuffer(e.__webglFramebuffer[t]),Ft.deleteRenderbuffer(e.__webglRenderbuffer[t]);else Ft.deleteFramebuffer(e.__webglFramebuffer),Ft.deleteRenderbuffer(e.__webglRenderbuffer)},qn=function(e){var t=e.program.program;if(void 0!==t){e.program=void 0;var n,r,i,o=!1;for(n=0,r=Yt.length;r>n;n++)if(i=Yt[n],i.program===t){i.usedTimes--,0===i.usedTimes&&(o=!0);break}if(o===!0){var a=[];for(n=0,r=Yt.length;r>n;n++)i=Yt[n],i.program!==t&&a.push(i);Yt=a,Ft.deleteProgram(t),Xt.info.memory.programs--}}};this.renderBufferImmediate=function(e,t,n){if(b(),e.hasPositions&&!e.__webglVertexBuffer&&(e.__webglVertexBuffer=Ft.createBuffer()),e.hasNormals&&!e.__webglNormalBuffer&&(e.__webglNormalBuffer=Ft.createBuffer()),e.hasUvs&&!e.__webglUvBuffer&&(e.__webglUvBuffer=Ft.createBuffer()),e.hasColors&&!e.__webglColorBuffer&&(e.__webglColorBuffer=Ft.createBuffer()),e.hasPositions&&(Ft.bindBuffer(Ft.ARRAY_BUFFER,e.__webglVertexBuffer),Ft.bufferData(Ft.ARRAY_BUFFER,e.positionArray,Ft.DYNAMIC_DRAW),w(t.attributes.position),Ft.vertexAttribPointer(t.attributes.position,3,Ft.FLOAT,!1,0,0)),e.hasNormals){if(Ft.bindBuffer(Ft.ARRAY_BUFFER,e.__webglNormalBuffer),n.shading===i.FlatShading){var r,o,a,s,c,l,u,h,p,d,f,m,v,g,y=3*e.count;for(g=0;y>g;g+=9)v=e.normalArray,s=v[g],u=v[g+1],d=v[g+2],c=v[g+3],h=v[g+4],f=v[g+5],l=v[g+6],p=v[g+7],m=v[g+8],r=(s+c+l)/3,o=(u+h+p)/3,a=(d+f+m)/3,v[g]=r,v[g+1]=o,v[g+2]=a,v[g+3]=r,v[g+4]=o,v[g+5]=a,v[g+6]=r,v[g+7]=o,v[g+8]=a}Ft.bufferData(Ft.ARRAY_BUFFER,e.normalArray,Ft.DYNAMIC_DRAW),w(t.attributes.normal),Ft.vertexAttribPointer(t.attributes.normal,3,Ft.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(Ft.bindBuffer(Ft.ARRAY_BUFFER,e.__webglUvBuffer),Ft.bufferData(Ft.ARRAY_BUFFER,e.uvArray,Ft.DYNAMIC_DRAW),w(t.attributes.uv),Ft.vertexAttribPointer(t.attributes.uv,2,Ft.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==i.NoColors&&(Ft.bindBuffer(Ft.ARRAY_BUFFER,e.__webglColorBuffer),Ft.bufferData(Ft.ARRAY_BUFFER,e.colorArray,Ft.DYNAMIC_DRAW),w(t.attributes.color),Ft.vertexAttribPointer(t.attributes.color,3,Ft.FLOAT,!1,0,0)),E(),Ft.drawArrays(Ft.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,o,a){if(r.visible!==!1){var s=G(e,t,n,r,a),c=s.attributes,l=o.attributes,u=!1,h=r.wireframe?1:0,p=16777215*o.id+2*s.id+h;if(p!==Zt&&(Zt=p,u=!0),u&&b(),a instanceof i.Mesh){var d=l.index;if(d){var f,m;d.array instanceof Uint32Array?(f=Ft.UNSIGNED_INT,m=4):(f=Ft.UNSIGNED_SHORT,m=2);var v=o.offsets;if(0===v.length)u&&(_(r,c,l,0),Ft.bindBuffer(Ft.ELEMENT_ARRAY_BUFFER,d.buffer)),Ft.drawElements(Ft.TRIANGLES,d.array.length,f,0),Xt.info.render.calls++,Xt.info.render.vertices+=d.array.length,Xt.info.render.faces+=d.array.length/3;else{u=!0;for(var g=0,y=v.length;y>g;g++){var x=v[g].index;u&&(_(r,c,l,x),Ft.bindBuffer(Ft.ELEMENT_ARRAY_BUFFER,d.buffer)),Ft.drawElements(Ft.TRIANGLES,v[g].count,f,v[g].start*m),Xt.info.render.calls++,Xt.info.render.vertices+=v[g].count,Xt.info.render.faces+=v[g].count/3}}}else{u&&_(r,c,l,0);var w=o.attributes.position;Ft.drawArrays(Ft.TRIANGLES,0,w.array.length/3),Xt.info.render.calls++,Xt.info.render.vertices+=w.array.length/3,Xt.info.render.faces+=w.array.length/9}}else if(a instanceof i.PointCloud){u&&_(r,c,l,0);var w=l.position;Ft.drawArrays(Ft.POINTS,0,w.array.length/3),Xt.info.render.calls++,Xt.info.render.points+=w.array.length/3}else if(a instanceof i.Line){var E=a.type===i.LineStrip?Ft.LINE_STRIP:Ft.LINES;ct(r.linewidth);var d=l.index;if(d){var f,m;d.array instanceof Uint32Array?(f=Ft.UNSIGNED_INT,m=4):(f=Ft.UNSIGNED_SHORT,m=2);var v=o.offsets;if(0===v.length)u&&(_(r,c,l,0),Ft.bindBuffer(Ft.ELEMENT_ARRAY_BUFFER,d.buffer)),Ft.drawElements(E,d.array.length,f,0),Xt.info.render.calls++,Xt.info.render.vertices+=d.array.length;else{v.length>1&&(u=!0);for(var g=0,y=v.length;y>g;g++){var x=v[g].index;u&&(_(r,c,l,x),Ft.bindBuffer(Ft.ELEMENT_ARRAY_BUFFER,d.buffer)),Ft.drawElements(E,v[g].count,f,v[g].start*m),Xt.info.render.calls++,Xt.info.render.vertices+=v[g].count}}}else{u&&_(r,c,l,0);var w=l.position;Ft.drawArrays(E,0,w.array.length/3),Xt.info.render.calls++,Xt.info.render.points+=w.array.length/3}}}},this.renderBuffer=function(e,t,n,r,o,a){if(r.visible!==!1){var s,c,l,u=G(e,t,n,r,a),h=u.attributes,p=!1,d=r.wireframe?1:0,f=16777215*o.id+2*u.id+d;if(f!==Zt&&(Zt=f,p=!0),p&&b(),!r.morphTargets&&h.position>=0?p&&(Ft.bindBuffer(Ft.ARRAY_BUFFER,o.__webglVertexBuffer),w(h.position),Ft.vertexAttribPointer(h.position,3,Ft.FLOAT,!1,0,0)):a.morphTargetBase&&M(r,o,a),p){if(o.__webglCustomAttributesList)for(c=0,l=o.__webglCustomAttributesList.length;l>c;c++)s=o.__webglCustomAttributesList[c],h[s.buffer.belongsToAttribute]>=0&&(Ft.bindBuffer(Ft.ARRAY_BUFFER,s.buffer),w(h[s.buffer.belongsToAttribute]),Ft.vertexAttribPointer(h[s.buffer.belongsToAttribute],s.size,Ft.FLOAT,!1,0,0));h.color>=0&&(a.geometry.colors.length>0||a.geometry.faces.length>0?(Ft.bindBuffer(Ft.ARRAY_BUFFER,o.__webglColorBuffer),w(h.color),Ft.vertexAttribPointer(h.color,3,Ft.FLOAT,!1,0,0)):r.defaultAttributeValues&&Ft.vertexAttrib3fv(h.color,r.defaultAttributeValues.color)),h.normal>=0&&(Ft.bindBuffer(Ft.ARRAY_BUFFER,o.__webglNormalBuffer),w(h.normal),Ft.vertexAttribPointer(h.normal,3,Ft.FLOAT,!1,0,0)),h.tangent>=0&&(Ft.bindBuffer(Ft.ARRAY_BUFFER,o.__webglTangentBuffer),w(h.tangent),Ft.vertexAttribPointer(h.tangent,4,Ft.FLOAT,!1,0,0)),h.uv>=0&&(a.geometry.faceVertexUvs[0]?(Ft.bindBuffer(Ft.ARRAY_BUFFER,o.__webglUVBuffer),w(h.uv),Ft.vertexAttribPointer(h.uv,2,Ft.FLOAT,!1,0,0)):r.defaultAttributeValues&&Ft.vertexAttrib2fv(h.uv,r.defaultAttributeValues.uv)),h.uv2>=0&&(a.geometry.faceVertexUvs[1]?(Ft.bindBuffer(Ft.ARRAY_BUFFER,o.__webglUV2Buffer),w(h.uv2),Ft.vertexAttribPointer(h.uv2,2,Ft.FLOAT,!1,0,0)):r.defaultAttributeValues&&Ft.vertexAttrib2fv(h.uv2,r.defaultAttributeValues.uv2)),r.skinning&&h.skinIndex>=0&&h.skinWeight>=0&&(Ft.bindBuffer(Ft.ARRAY_BUFFER,o.__webglSkinIndicesBuffer),w(h.skinIndex),Ft.vertexAttribPointer(h.skinIndex,4,Ft.FLOAT,!1,0,0),Ft.bindBuffer(Ft.ARRAY_BUFFER,o.__webglSkinWeightsBuffer),w(h.skinWeight),Ft.vertexAttribPointer(h.skinWeight,4,Ft.FLOAT,!1,0,0)),h.lineDistance>=0&&(Ft.bindBuffer(Ft.ARRAY_BUFFER,o.__webglLineDistanceBuffer),w(h.lineDistance),Ft.vertexAttribPointer(h.lineDistance,1,Ft.FLOAT,!1,0,0))}if(E(),a instanceof i.Mesh){var m=o.__typeArray===Uint32Array?Ft.UNSIGNED_INT:Ft.UNSIGNED_SHORT;r.wireframe?(ct(r.wireframeLinewidth),p&&Ft.bindBuffer(Ft.ELEMENT_ARRAY_BUFFER,o.__webglLineBuffer),Ft.drawElements(Ft.LINES,o.__webglLineCount,m,0)):(p&&Ft.bindBuffer(Ft.ELEMENT_ARRAY_BUFFER,o.__webglFaceBuffer),Ft.drawElements(Ft.TRIANGLES,o.__webglFaceCount,m,0)),Xt.info.render.calls++,Xt.info.render.vertices+=o.__webglFaceCount,Xt.info.render.faces+=o.__webglFaceCount/3}else if(a instanceof i.Line){var v=a.type===i.LineStrip?Ft.LINE_STRIP:Ft.LINES;ct(r.linewidth),Ft.drawArrays(v,0,o.__webglLineCount),Xt.info.render.calls++}else a instanceof i.PointCloud&&(Ft.drawArrays(Ft.POINTS,0,o.__webglParticleCount),Xt.info.render.calls++,Xt.info.render.points+=o.__webglParticleCount)}},this.render=function(e,t,n,r){function o(e){e instanceof i.SkinnedMesh&&e.skeleton.update();for(var t=0,n=e.children.length;n>t;t++)o(e.children[t])}if(t instanceof i.Camera==!1)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");var a,s,c,l,u,h=e.__lights,p=e.fog;for(Qt=-1,Jt=null,Sn=!0,e.autoUpdate===!0&&e.updateMatrixWorld(),void 0===t.parent&&t.updateMatrixWorld(),o(e),t.matrixWorldInverse.getInverse(t.matrixWorld),wn.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),bn.setFromMatrix(wn),Kn(e),Vt.length=0,kt.length=0,R(e,e,t),Xt.sortObjects===!0&&(Vt.sort(C),kt.sort(S)),D(this.renderPluginsPre,e,t),Xt.info.render.calls=0,Xt.info.render.vertices=0,Xt.info.render.faces=0,Xt.info.render.points=0,this.setRenderTarget(n),(this.autoClear||r)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),u=e.__webglObjectsImmediate,a=0,s=u.length;s>a;a++)c=u[a],l=c.object,l.visible&&(it(l,t),P(c));if(e.overrideMaterial){var d=e.overrideMaterial;this.setBlending(d.blending,d.blendEquation,d.blendSrc,d.blendDst),this.setDepthTest(d.depthTest),this.setDepthWrite(d.depthWrite),lt(d.polygonOffset,d.polygonOffsetFactor,d.polygonOffsetUnits),A(Vt,t,h,p,!0,d),A(kt,t,h,p,!0,d),N(e.__webglObjectsImmediate,"",t,h,p,!1,d)}else{var d=null;this.setBlending(i.NoBlending),A(Vt,t,h,p,!1,d),N(e.__webglObjectsImmediate,"opaque",t,h,p,!1,d),A(kt,t,h,p,!0,d),N(e.__webglObjectsImmediate,"transparent",t,h,p,!0,d)}D(this.renderPluginsPost,e,t),n&&n.generateMipmaps&&n.minFilter!==i.NearestFilter&&n.minFilter!==i.LinearFilter&&vt(n),this.setDepthTest(!0),this.setDepthWrite(!0)},this.renderImmediateObject=function(e,t,n,r,i){var o=G(e,t,n,r,i);Zt=-1,Xt.setMaterialFaces(r),i.immediateRenderCallback?i.immediateRenderCallback(o,Ft,bn):i.render(function(e){Xt.renderBufferImmediate(e,o,r)})};var Kn=function(e){for(e.__webglObjects||(e.__webglObjects={},e.__webglObjectsImmediate=[]);e.__objectsAdded.length;)L(e.__objectsAdded[0],e),e.__objectsAdded.splice(0,1);for(;e.__objectsRemoved.length;)z(e.__objectsRemoved[0],e),e.__objectsRemoved.splice(0,1)};this.initMaterial=function(e,t,n,r){e.addEventListener("dispose",jn);var o,a,s,c,l,u,h;if(e instanceof i.MeshDepthMaterial?h="depth":e instanceof i.MeshNormalMaterial?h="normal":e instanceof i.MeshBasicMaterial?h="basic":e instanceof i.MeshLambertMaterial?h="lambert":e instanceof i.MeshPhongMaterial?h="phong":e instanceof i.LineBasicMaterial?h="basic":e instanceof i.LineDashedMaterial?h="dashed":e instanceof i.PointCloudMaterial&&(h="particle_basic"),h){var p=i.ShaderLib[h];e.__webglShader={uniforms:i.UniformsUtils.clone(p.uniforms),vertexShader:p.vertexShader,fragmentShader:p.fragmentShader}}else e.__webglShader={uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};c=_t(t),u=bt(t),l=xt(r),s={precision:St,supportsVertexTextures:Pn,map:!!e.map,envMap:!!e.envMap,lightMap:!!e.lightMap,bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,vertexColors:e.vertexColors,fog:n,useFog:e.fog,fogExp:n instanceof i.FogExp2,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:Ot,skinning:e.skinning,maxBones:l,useVertexTexture:On&&r&&r.skeleton&&r.skeleton.useVertexTexture,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:this.maxMorphTargets,maxMorphNormals:this.maxMorphNormals,maxDirLights:c.directional,maxPointLights:c.point,maxSpotLights:c.spot,maxHemiLights:c.hemi,maxShadows:u,shadowMapEnabled:this.shadowMapEnabled&&r.receiveShadow&&u>0,shadowMapType:this.shadowMapType,shadowMapDebug:this.shadowMapDebug,shadowMapCascade:this.shadowMapCascade,alphaTest:e.alphaTest,metal:e.metal,wrapAround:e.wrapAround,doubleSided:e.side===i.DoubleSide,flipSided:e.side===i.BackSide};var d=[];h?d.push(h):(d.push(e.fragmentShader),d.push(e.vertexShader));for(var f in e.defines)d.push(f),d.push(e.defines[f]);for(var m in s)d.push(m),d.push(s[m]);for(var v,g=d.join(),m=0,y=Yt.length;y>m;m++){var x=Yt[m];if(x.code===g){v=x,v.usedTimes++;break}}void 0===v&&(v=new i.WebGLProgram(this,g,e,s),Yt.push(v),Xt.info.memory.programs=Yt.length),e.program=v;var _=e.program.attributes;if(e.morphTargets){e.numSupportedMorphTargets=0;var b,w="morphTarget";for(a=0;a<this.maxMorphTargets;a++)b=w+a,_[b]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;var b,w="morphNormal";for(a=0;a<this.maxMorphNormals;a++)b=w+a,_[b]>=0&&e.numSupportedMorphNormals++}e.uniformsList=[];for(o in e.__webglShader.uniforms){var E=e.program.uniforms[o];E&&e.uniformsList.push([e.__webglShader.uniforms[o],E])}},this.setFaceCulling=function(e,t){e===i.CullFaceNone?Ft.disable(Ft.CULL_FACE):(Ft.frontFace(t===i.FrontFaceDirectionCW?Ft.CW:Ft.CCW),Ft.cullFace(e===i.CullFaceBack?Ft.BACK:e===i.CullFaceFront?Ft.FRONT:Ft.FRONT_AND_BACK),Ft.enable(Ft.CULL_FACE))},this.setMaterialFaces=function(e){var t=e.side===i.DoubleSide,n=e.side===i.BackSide;en!==t&&(t?Ft.disable(Ft.CULL_FACE):Ft.enable(Ft.CULL_FACE),en=t),tn!==n&&(Ft.frontFace(n?Ft.CW:Ft.CCW),tn=n)},this.setDepthTest=function(e){sn!==e&&(e?Ft.enable(Ft.DEPTH_TEST):Ft.disable(Ft.DEPTH_TEST),sn=e)},this.setDepthWrite=function(e){cn!==e&&(Ft.depthMask(e),cn=e)},this.setBlending=function(e,t,n,r){e!==nn&&(e===i.NoBlending?Ft.disable(Ft.BLEND):e===i.AdditiveBlending?(Ft.enable(Ft.BLEND),Ft.blendEquation(Ft.FUNC_ADD),Ft.blendFunc(Ft.SRC_ALPHA,Ft.ONE)):e===i.SubtractiveBlending?(Ft.enable(Ft.BLEND),Ft.blendEquation(Ft.FUNC_ADD),Ft.blendFunc(Ft.ZERO,Ft.ONE_MINUS_SRC_COLOR)):e===i.MultiplyBlending?(Ft.enable(Ft.BLEND),Ft.blendEquation(Ft.FUNC_ADD),Ft.blendFunc(Ft.ZERO,Ft.SRC_COLOR)):e===i.CustomBlending?Ft.enable(Ft.BLEND):(Ft.enable(Ft.BLEND),Ft.blendEquationSeparate(Ft.FUNC_ADD,Ft.FUNC_ADD),Ft.blendFuncSeparate(Ft.SRC_ALPHA,Ft.ONE_MINUS_SRC_ALPHA,Ft.ONE,Ft.ONE_MINUS_SRC_ALPHA)),nn=e),e===i.CustomBlending?(t!==rn&&(Ft.blendEquation(yt(t)),rn=t),(n!==on||r!==an)&&(Ft.blendFunc(yt(n),yt(r)),on=n,an=r)):(rn=null,on=null,an=null)},this.setTexture=function(e,t){if(e.needsUpdate){e.__webglInit||(e.__webglInit=!0,e.addEventListener("dispose",zn),e.__webglTexture=Ft.createTexture(),Xt.info.memory.textures++),Ft.activeTexture(Ft.TEXTURE0+t),Ft.bindTexture(Ft.TEXTURE_2D,e.__webglTexture),Ft.pixelStorei(Ft.UNPACK_FLIP_Y_WEBGL,e.flipY),Ft.pixelStorei(Ft.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),Ft.pixelStorei(Ft.UNPACK_ALIGNMENT,e.unpackAlignment);var n=e.image,r=i.Math.isPowerOfTwo(n.width)&&i.Math.isPowerOfTwo(n.height),o=yt(e.format),a=yt(e.type);ut(Ft.TEXTURE_2D,e,r);var s,c=e.mipmaps;if(e instanceof i.DataTexture)if(c.length>0&&r){for(var l=0,u=c.length;u>l;l++)s=c[l],Ft.texImage2D(Ft.TEXTURE_2D,l,o,s.width,s.height,0,o,a,s.data);e.generateMipmaps=!1}else Ft.texImage2D(Ft.TEXTURE_2D,0,o,n.width,n.height,0,o,a,n.data);else if(e instanceof i.CompressedTexture)for(var l=0,u=c.length;u>l;l++)s=c[l],e.format!==i.RGBAFormat?Ft.compressedTexImage2D(Ft.TEXTURE_2D,l,o,s.width,s.height,0,s.data):Ft.texImage2D(Ft.TEXTURE_2D,l,o,s.width,s.height,0,o,a,s.data);else if(c.length>0&&r){for(var l=0,u=c.length;u>l;l++)s=c[l],Ft.texImage2D(Ft.TEXTURE_2D,l,o,o,a,s);e.generateMipmaps=!1}else Ft.texImage2D(Ft.TEXTURE_2D,0,o,o,a,e.image);e.generateMipmaps&&r&&Ft.generateMipmap(Ft.TEXTURE_2D),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()}else Ft.activeTexture(Ft.TEXTURE0+t),Ft.bindTexture(Ft.TEXTURE_2D,e.__webglTexture)},this.setRenderTarget=function(e){var t=e instanceof i.WebGLRenderTargetCube;if(e&&!e.__webglFramebuffer){void 0===e.depthBuffer&&(e.depthBuffer=!0),void 0===e.stencilBuffer&&(e.stencilBuffer=!0),e.addEventListener("dispose",Hn),e.__webglTexture=Ft.createTexture(),Xt.info.memory.textures++;var n=i.Math.isPowerOfTwo(e.width)&&i.Math.isPowerOfTwo(e.height),r=yt(e.format),o=yt(e.type);if(t){e.__webglFramebuffer=[],e.__webglRenderbuffer=[],Ft.bindTexture(Ft.TEXTURE_CUBE_MAP,e.__webglTexture),ut(Ft.TEXTURE_CUBE_MAP,e,n);for(var a=0;6>a;a++)e.__webglFramebuffer[a]=Ft.createFramebuffer(),e.__webglRenderbuffer[a]=Ft.createRenderbuffer(),Ft.texImage2D(Ft.TEXTURE_CUBE_MAP_POSITIVE_X+a,0,r,e.width,e.height,0,r,o,null),ft(e.__webglFramebuffer[a],e,Ft.TEXTURE_CUBE_MAP_POSITIVE_X+a),mt(e.__webglRenderbuffer[a],e);n&&Ft.generateMipmap(Ft.TEXTURE_CUBE_MAP)}else e.__webglFramebuffer=Ft.createFramebuffer(),e.__webglRenderbuffer=e.shareDepthFrom?e.shareDepthFrom.__webglRenderbuffer:Ft.createRenderbuffer(),Ft.bindTexture(Ft.TEXTURE_2D,e.__webglTexture),ut(Ft.TEXTURE_2D,e,n),Ft.texImage2D(Ft.TEXTURE_2D,0,r,e.width,e.height,0,r,o,null),ft(e.__webglFramebuffer,e,Ft.TEXTURE_2D),e.shareDepthFrom?e.depthBuffer&&!e.stencilBuffer?Ft.framebufferRenderbuffer(Ft.FRAMEBUFFER,Ft.DEPTH_ATTACHMENT,Ft.RENDERBUFFER,e.__webglRenderbuffer):e.depthBuffer&&e.stencilBuffer&&Ft.framebufferRenderbuffer(Ft.FRAMEBUFFER,Ft.DEPTH_STENCIL_ATTACHMENT,Ft.RENDERBUFFER,e.__webglRenderbuffer):mt(e.__webglRenderbuffer,e),n&&Ft.generateMipmap(Ft.TEXTURE_2D);t?Ft.bindTexture(Ft.TEXTURE_CUBE_MAP,null):Ft.bindTexture(Ft.TEXTURE_2D,null),Ft.bindRenderbuffer(Ft.RENDERBUFFER,null),Ft.bindFramebuffer(Ft.FRAMEBUFFER,null)}var s,c,l,u,h;e?(s=t?e.__webglFramebuffer[e.activeCubeFace]:e.__webglFramebuffer,c=e.width,l=e.height,u=0,h=0):(s=null,c=mn,l=vn,u=dn,h=fn),s!==Kt&&(Ft.bindFramebuffer(Ft.FRAMEBUFFER,s),Ft.viewport(u,h,c,l),Kt=s),gn=c,yn=l},this.shadowMapPlugin=new i.ShadowMapPlugin,this.addPrePlugin(this.shadowMapPlugin),this.addPostPlugin(new i.SpritePlugin),this.addPostPlugin(new i.LensFlarePlugin)},i.WebGLRenderTarget=function(e,t,n){this.width=e,this.height=t,n=n||{},this.wrapS=void 0!==n.wrapS?n.wrapS:i.ClampToEdgeWrapping,this.wrapT=void 0!==n.wrapT?n.wrapT:i.ClampToEdgeWrapping,this.magFilter=void 0!==n.magFilter?n.magFilter:i.LinearFilter,this.minFilter=void 0!==n.minFilter?n.minFilter:i.LinearMipMapLinearFilter,this.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,this.offset=new i.Vector2(0,0),this.repeat=new i.Vector2(1,1),this.format=void 0!==n.format?n.format:i.RGBAFormat,this.type=void 0!==n.type?n.type:i.UnsignedByteType,this.depthBuffer=void 0!==n.depthBuffer?n.depthBuffer:!0,this.stencilBuffer=void 0!==n.stencilBuffer?n.stencilBuffer:!0,this.generateMipmaps=!0,this.shareDepthFrom=null},i.WebGLRenderTarget.prototype={constructor:i.WebGLRenderTarget,setSize:function(e,t){this.width=e,this.height=t},clone:function(){var e=new i.WebGLRenderTarget(this.width,this.height);return e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.format=this.format,e.type=this.type,e.depthBuffer=this.depthBuffer,e.stencilBuffer=this.stencilBuffer,e.generateMipmaps=this.generateMipmaps,e.shareDepthFrom=this.shareDepthFrom,e
},dispose:function(){this.dispatchEvent({type:"dispose"})}},i.EventDispatcher.prototype.apply(i.WebGLRenderTarget.prototype),i.WebGLRenderTargetCube=function(e,t,n){i.WebGLRenderTarget.call(this,e,t,n),this.activeCubeFace=0},i.WebGLRenderTargetCube.prototype=Object.create(i.WebGLRenderTarget.prototype),i.WebGLProgram=function(){var e=0,t=function(e){var t,n,r=[];for(var i in e)t=e[i],t!==!1&&(n="#define "+i+" "+t,r.push(n));return r.join("\n")},n=function(e,t,n){for(var r={},i=0,o=n.length;o>i;i++){var a=n[i];r[a]=e.getUniformLocation(t,a)}return r},r=function(e,t,n){for(var r={},i=0,o=n.length;o>i;i++){var a=n[i];r[a]=e.getAttribLocation(t,a)}return r};return function(o,a,s,c){var l=o,u=l.context,h=s.defines,p=s.__webglShader.uniforms,d=s.attributes,f=s.__webglShader.vertexShader,m=s.__webglShader.fragmentShader,v=s.index0AttributeName;void 0===v&&c.morphTargets===!0&&(v="position");var g="SHADOWMAP_TYPE_BASIC";c.shadowMapType===i.PCFShadowMap?g="SHADOWMAP_TYPE_PCF":c.shadowMapType===i.PCFSoftShadowMap&&(g="SHADOWMAP_TYPE_PCF_SOFT");var y,x,_=t(h),b=u.createProgram();s instanceof i.RawShaderMaterial?(y="",x=""):(y=["precision "+c.precision+" float;","precision "+c.precision+" int;",_,c.supportsVertexTextures?"#define VERTEX_TEXTURES":"",l.gammaInput?"#define GAMMA_INPUT":"",l.gammaOutput?"#define GAMMA_OUTPUT":"","#define MAX_DIR_LIGHTS "+c.maxDirLights,"#define MAX_POINT_LIGHTS "+c.maxPointLights,"#define MAX_SPOT_LIGHTS "+c.maxSpotLights,"#define MAX_HEMI_LIGHTS "+c.maxHemiLights,"#define MAX_SHADOWS "+c.maxShadows,"#define MAX_BONES "+c.maxBones,c.map?"#define USE_MAP":"",c.envMap?"#define USE_ENVMAP":"",c.lightMap?"#define USE_LIGHTMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.alphaMap?"#define USE_ALPHAMAP":"",c.vertexColors?"#define USE_COLOR":"",c.skinning?"#define USE_SKINNING":"",c.useVertexTexture?"#define BONE_TEXTURE":"",c.morphTargets?"#define USE_MORPHTARGETS":"",c.morphNormals?"#define USE_MORPHNORMALS":"",c.wrapAround?"#define WRAP_AROUND":"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+g:"",c.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",c.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",c.sizeAttenuation?"#define USE_SIZEATTENUATION":"",c.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","attribute vec2 uv2;","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",""].join("\n"),x=["precision "+c.precision+" float;","precision "+c.precision+" int;",c.bumpMap||c.normalMap?"#extension GL_OES_standard_derivatives : enable":"",_,"#define MAX_DIR_LIGHTS "+c.maxDirLights,"#define MAX_POINT_LIGHTS "+c.maxPointLights,"#define MAX_SPOT_LIGHTS "+c.maxSpotLights,"#define MAX_HEMI_LIGHTS "+c.maxHemiLights,"#define MAX_SHADOWS "+c.maxShadows,c.alphaTest?"#define ALPHATEST "+c.alphaTest:"",l.gammaInput?"#define GAMMA_INPUT":"",l.gammaOutput?"#define GAMMA_OUTPUT":"",c.useFog&&c.fog?"#define USE_FOG":"",c.useFog&&c.fogExp?"#define FOG_EXP2":"",c.map?"#define USE_MAP":"",c.envMap?"#define USE_ENVMAP":"",c.lightMap?"#define USE_LIGHTMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.alphaMap?"#define USE_ALPHAMAP":"",c.vertexColors?"#define USE_COLOR":"",c.metal?"#define METAL":"",c.wrapAround?"#define WRAP_AROUND":"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+g:"",c.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",c.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",c.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",""].join("\n"));var w=new i.WebGLShader(u,u.VERTEX_SHADER,y+f),E=new i.WebGLShader(u,u.FRAGMENT_SHADER,x+m);u.attachShader(b,w),u.attachShader(b,E),void 0!==v&&u.bindAttribLocation(b,0,v),u.linkProgram(b),u.getProgramParameter(b,u.LINK_STATUS)===!1&&(console.error("THREE.WebGLProgram: Could not initialise shader."),console.error("gl.VALIDATE_STATUS",u.getProgramParameter(b,u.VALIDATE_STATUS)),console.error("gl.getError()",u.getError())),""!==u.getProgramInfoLog(b)&&console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",u.getProgramInfoLog(b)),u.deleteShader(w),u.deleteShader(E);var M=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","modelMatrix","cameraPosition","morphTargetInfluences","bindMatrix","bindMatrixInverse"];c.useVertexTexture?(M.push("boneTexture"),M.push("boneTextureWidth"),M.push("boneTextureHeight")):M.push("boneGlobalMatrices"),c.logarithmicDepthBuffer&&M.push("logDepthBufFC");for(var C in p)M.push(C);this.uniforms=n(u,b,M),M=["position","normal","uv","uv2","tangent","color","skinIndex","skinWeight","lineDistance"];for(var S=0;S<c.maxMorphTargets;S++)M.push("morphTarget"+S);for(var S=0;S<c.maxMorphNormals;S++)M.push("morphNormal"+S);for(var T in d)M.push(T);return this.attributes=r(u,b,M),this.id=e++,this.code=a,this.usedTimes=1,this.program=b,this.vertexShader=w,this.fragmentShader=E,this}}(),i.WebGLShader=function(){var e=function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")};return function(t,n,r){var i=t.createShader(n);return t.shaderSource(i,r),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(i)&&(console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t.getShaderInfoLog(i)),console.warn(e(r))),i}}(),i.RenderableVertex=function(){this.position=new i.Vector3,this.positionWorld=new i.Vector3,this.positionScreen=new i.Vector4,this.visible=!0},i.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)},i.RenderableFace=function(){this.id=0,this.v1=new i.RenderableVertex,this.v2=new i.RenderableVertex,this.v3=new i.RenderableVertex,this.normalModel=new i.Vector3,this.vertexNormalsModel=[new i.Vector3,new i.Vector3,new i.Vector3],this.vertexNormalsLength=0,this.color=new i.Color,this.material=null,this.uvs=[new i.Vector2,new i.Vector2,new i.Vector2],this.z=0},i.RenderableObject=function(){this.id=0,this.object=null,this.z=0},i.RenderableSprite=function(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=0,this.scale=new i.Vector2,this.material=null},i.RenderableLine=function(){this.id=0,this.v1=new i.RenderableVertex,this.v2=new i.RenderableVertex,this.vertexColors=[new i.Color,new i.Color],this.material=null,this.z=0},i.GeometryUtils={merge:function(e,t,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var r;t instanceof i.Mesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},i.ImageUtils={crossOrigin:void 0,loadTexture:function(e,t,n,r){var o=new i.ImageLoader;o.crossOrigin=this.crossOrigin;var a=new i.Texture(void 0,t);return o.load(e,function(e){a.image=e,a.needsUpdate=!0,n&&n(a)},void 0,function(e){r&&r(e)}),a.sourceFile=e,a},loadTextureCube:function(e,t,n){var r=[],o=new i.ImageLoader;o.crossOrigin=this.crossOrigin;var a=new i.CubeTexture(r,t);a.flipY=!1;for(var s=0,c=function(t){o.load(e[t],function(e){a.images[t]=e,s+=1,6===s&&(a.needsUpdate=!0,n&&n(a))})},l=0,u=e.length;u>l;++l)c(l);return a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},getNormalMap:function(e,t){var n=function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]},r=function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]},i=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return[e[0]/t,e[1]/t,e[2]/t]};t=1|t;var o=e.width,a=e.height,s=document.createElement("canvas");s.width=o,s.height=a;var c=s.getContext("2d");c.drawImage(e,0,0);for(var l=c.getImageData(0,0,o,a).data,u=c.createImageData(o,a),h=u.data,p=0;o>p;p++)for(var d=0;a>d;d++){var f=0>d-1?0:d-1,m=d+1>a-1?a-1:d+1,v=0>p-1?0:p-1,g=p+1>o-1?o-1:p+1,y=[],x=[0,0,l[4*(d*o+p)]/255*t];y.push([-1,0,l[4*(d*o+v)]/255*t]),y.push([-1,-1,l[4*(f*o+v)]/255*t]),y.push([0,-1,l[4*(f*o+p)]/255*t]),y.push([1,-1,l[4*(f*o+g)]/255*t]),y.push([1,0,l[4*(d*o+g)]/255*t]),y.push([1,1,l[4*(m*o+g)]/255*t]),y.push([0,1,l[4*(m*o+p)]/255*t]),y.push([-1,1,l[4*(m*o+v)]/255*t]);for(var _=[],b=y.length,w=0;b>w;w++){var E=y[w],M=y[(w+1)%b];E=r(E,x),M=r(M,x),_.push(i(n(E,M)))}for(var C=[0,0,0],w=0;w<_.length;w++)C[0]+=_[w][0],C[1]+=_[w][1],C[2]+=_[w][2];C[0]/=_.length,C[1]/=_.length,C[2]/=_.length;var S=4*(d*o+p);h[S]=(C[0]+1)/2*255|0,h[S+1]=(C[1]+1)/2*255|0,h[S+2]=255*C[2]|0,h[S+3]=255}return c.putImageData(u,0,0),s},generateDataTexture:function(e,t,n){for(var r=e*t,o=new Uint8Array(3*r),a=Math.floor(255*n.r),s=Math.floor(255*n.g),c=Math.floor(255*n.b),l=0;r>l;l++)o[3*l]=a,o[3*l+1]=s,o[3*l+2]=c;var u=new i.DataTexture(o,e,t,i.RGBFormat);return u.needsUpdate=!0,u}},i.SceneUtils={createMultiMaterialObject:function(e,t){for(var n=new i.Object3D,r=0,o=t.length;o>r;r++)n.add(new i.Mesh(e,t[r]));return n},detach:function(e,t,n){e.applyMatrix(t.matrixWorld),t.remove(e),n.add(e)},attach:function(e,t,n){var r=new i.Matrix4;r.getInverse(n.matrixWorld),e.applyMatrix(r),t.remove(e),n.add(e)}},i.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(e){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(e){var t=e.familyName.toLowerCase(),n=this;n.faces[t]=n.faces[t]||{},n.faces[t][e.cssFontWeight]=n.faces[t][e.cssFontWeight]||{},n.faces[t][e.cssFontWeight][e.cssFontStyle]=e;n.faces[t][e.cssFontWeight][e.cssFontStyle]=e;return e},drawText:function(e){var t,n=this.getFace(),r=this.size/n.resolution,o=0,a=String(e).split(""),s=a.length,c=[];for(t=0;s>t;t++){var l=new i.Path,u=this.extractGlyphPoints(a[t],n,r,o,l);o+=u.offset,c.push(u.path)}var h=o/2;return{paths:c,offset:h}},extractGlyphPoints:function(e,t,n,r,o){var a,s,c,l,u,h,p,d,f,m,v,g,y,x,_,b,w,E,M,C=[],S=t.glyphs[e]||t.glyphs["?"];if(S){if(S.o)for(l=S._cachedOutline||(S._cachedOutline=S.o.split(" ")),h=l.length,p=n,d=n,a=0;h>a;)switch(u=l[a++]){case"m":f=l[a++]*p+r,m=l[a++]*d,o.moveTo(f,m);break;case"l":f=l[a++]*p+r,m=l[a++]*d,o.lineTo(f,m);break;case"q":if(v=l[a++]*p+r,g=l[a++]*d,_=l[a++]*p+r,b=l[a++]*d,o.quadraticCurveTo(_,b,v,g),M=C[C.length-1])for(y=M.x,x=M.y,s=1,c=this.divisions;c>=s;s++){var T=s/c;i.Shape.Utils.b2(T,y,_,v),i.Shape.Utils.b2(T,x,b,g)}break;case"b":if(v=l[a++]*p+r,g=l[a++]*d,_=l[a++]*p+r,b=l[a++]*d,w=l[a++]*p+r,E=l[a++]*d,o.bezierCurveTo(_,b,w,E,v,g),M=C[C.length-1])for(y=M.x,x=M.y,s=1,c=this.divisions;c>=s;s++){var T=s/c;i.Shape.Utils.b3(T,y,_,w,v),i.Shape.Utils.b3(T,x,b,E,g)}}return{offset:S.ha*n,path:o}}}},i.FontUtils.generateShapes=function(e,t){t=t||{};var n=void 0!==t.size?t.size:100,r=void 0!==t.curveSegments?t.curveSegments:4,o=void 0!==t.font?t.font:"helvetiker",a=void 0!==t.weight?t.weight:"normal",s=void 0!==t.style?t.style:"normal";i.FontUtils.size=n,i.FontUtils.divisions=r,i.FontUtils.face=o,i.FontUtils.weight=a,i.FontUtils.style=s;for(var c=i.FontUtils.drawText(e),l=c.paths,u=[],h=0,p=l.length;p>h;h++)Array.prototype.push.apply(u,l[h].toShapes());return u},function(e){var t=1e-10,n=function(e,t){var n=e.length;if(3>n)return null;var o,a,s,c=[],l=[],u=[];if(r(e)>0)for(a=0;n>a;a++)l[a]=a;else for(a=0;n>a;a++)l[a]=n-1-a;var h=n,p=2*h;for(a=h-1;h>2;){if(p--<=0)return console.log("Warning, unable to triangulate polygon!"),t?u:c;if(o=a,o>=h&&(o=0),a=o+1,a>=h&&(a=0),s=a+1,s>=h&&(s=0),i(e,o,a,s,h,l)){var d,f,m,v,g;for(d=l[o],f=l[a],m=l[s],c.push([e[d],e[f],e[m]]),u.push([l[o],l[a],l[s]]),v=a,g=a+1;h>g;v++,g++)l[v]=l[g];h--,p=2*h}}return t?u:c},r=function(e){for(var t=e.length,n=0,r=t-1,i=0;t>i;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},i=function(e,n,r,i,o,a){var s,c,l,u,h,p,d,f,m;if(c=e[a[n]].x,l=e[a[n]].y,u=e[a[r]].x,h=e[a[r]].y,p=e[a[i]].x,d=e[a[i]].y,t>(u-c)*(d-l)-(h-l)*(p-c))return!1;var v,g,y,x,_,b,w,E,M,C,S,T,R,D,A;for(v=p-u,g=d-h,y=c-p,x=l-d,_=u-c,b=h-l,s=0;o>s;s++)if(f=e[a[s]].x,m=e[a[s]].y,!(f===c&&m===l||f===u&&m===h||f===p&&m===d)&&(w=f-c,E=m-l,M=f-u,C=m-h,S=f-p,T=m-d,A=v*C-g*M,R=_*E-b*w,D=y*T-x*S,A>=-t&&D>=-t&&R>=-t))return!1;return!0};return e.Triangulate=n,e.Triangulate.area=r,e}(i.FontUtils),r._typeface_js={faces:i.FontUtils.faces,loadFace:i.FontUtils.loadFace},i.typeface_js=r._typeface_js,i.Curve=function(){},i.Curve.prototype.getPoint=function(){return console.log("Warning, getPoint() not implemented!"),null},i.Curve.prototype.getPointAt=function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},i.Curve.prototype.getPoints=function(e){e||(e=5);var t,n=[];for(t=0;e>=t;t++)n.push(this.getPoint(t/e));return n},i.Curve.prototype.getSpacedPoints=function(e){e||(e=5);var t,n=[];for(t=0;e>=t;t++)n.push(this.getPointAt(t/e));return n},i.Curve.prototype.getLength=function(){var e=this.getLengths();return e[e.length-1]},i.Curve.prototype.getLengths=function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;e>=n;n++)t=this.getPoint(n/e),o+=t.distanceTo(i),r.push(o),i=t;return this.cacheArcLengths=r,r},i.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},i.Curve.prototype.getUtoTmapping=function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t?t:e*r[o-1];for(var a,s=0,c=o-1;c>=s;)if(i=Math.floor(s+(c-s)/2),a=r[i]-n,0>a)s=i+1;else{if(!(a>0)){c=i;break}c=i-1}if(i=c,r[i]==n){var l=i/(o-1);return l}var u=r[i],h=r[i+1],p=h-u,d=(n-u)/p,l=(i+d)/(o-1);return l},i.Curve.prototype.getTangent=function(e){var t=1e-4,n=e-t,r=e+t;0>n&&(n=0),r>1&&(r=1);var i=this.getPoint(n),o=this.getPoint(r),a=o.clone().sub(i);return a.normalize()},i.Curve.prototype.getTangentAt=function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},i.Curve.Utils={tangentQuadraticBezier:function(e,t,n,r){return 2*(1-e)*(n-t)+2*e*(r-n)},tangentCubicBezier:function(e,t,n,r,i){return-3*t*(1-e)*(1-e)+3*n*(1-e)*(1-e)-6*e*n*(1-e)+6*e*r*(1-e)-3*e*e*r+3*e*e*i},tangentSpline:function(e){var t=6*e*e-6*e,n=3*e*e-4*e+1,r=-6*e*e+6*e,i=3*e*e-2*e;return t+n+r+i},interpolate:function(e,t,n,r,i){var o=.5*(n-e),a=.5*(r-t),s=i*i,c=i*s;return(2*t-2*n+o+a)*c+(-3*t+3*n-2*o-a)*s+o*i+t}},i.Curve.create=function(e,t){return e.prototype=Object.create(i.Curve.prototype),e.prototype.getPoint=t,e},i.CurvePath=function(){this.curves=[],this.bends=[],this.autoClose=!1},i.CurvePath.prototype=Object.create(i.Curve.prototype),i.CurvePath.prototype.add=function(e){this.curves.push(e)},i.CurvePath.prototype.checkConnection=function(){},i.CurvePath.prototype.closePath=function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new i.LineCurve(t,e))},i.CurvePath.prototype.getPoint=function(e){for(var t,n,r=e*this.getLength(),i=this.getCurveLengths(),o=0;o<i.length;){if(i[o]>=r){t=i[o]-r,n=this.curves[o];var a=1-t/n.getLength();return n.getPointAt(a)}o++}return null},i.CurvePath.prototype.getLength=function(){var e=this.getCurveLengths();return e[e.length-1]},i.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var e,t=[],n=0,r=this.curves.length;for(e=0;r>e;e++)n+=this.curves[e].getLength(),t.push(n);return this.cacheLengths=t,t},i.CurvePath.prototype.getBoundingBox=function(){var e,t,n,r,o,a,s=this.getPoints();e=t=Number.NEGATIVE_INFINITY,r=o=Number.POSITIVE_INFINITY;var c,l,u,h,p=s[0]instanceof i.Vector3;for(h=p?new i.Vector3:new i.Vector2,l=0,u=s.length;u>l;l++)c=s[l],c.x>e?e=c.x:c.x<r&&(r=c.x),c.y>t?t=c.y:c.y<o&&(o=c.y),p&&(c.z>n?n=c.z:c.z<a&&(a=c.z)),h.add(c);var d={minX:r,minY:o,maxX:e,maxY:t};return p&&(d.maxZ=n,d.minZ=a),d},i.CurvePath.prototype.createPointsGeometry=function(e){var t=this.getPoints(e,!0);return this.createGeometry(t)},i.CurvePath.prototype.createSpacedPointsGeometry=function(e){var t=this.getSpacedPoints(e,!0);return this.createGeometry(t)},i.CurvePath.prototype.createGeometry=function(e){for(var t=new i.Geometry,n=0;n<e.length;n++)t.vertices.push(new i.Vector3(e[n].x,e[n].y,e[n].z||0));return t},i.CurvePath.prototype.addWrapPath=function(e){this.bends.push(e)},i.CurvePath.prototype.getTransformedPoints=function(e,t){var n,r,i=this.getPoints(e);for(t||(t=this.bends),n=0,r=t.length;r>n;n++)i=this.getWrapPoints(i,t[n]);return i},i.CurvePath.prototype.getTransformedSpacedPoints=function(e,t){var n,r,i=this.getSpacedPoints(e);for(t||(t=this.bends),n=0,r=t.length;r>n;n++)i=this.getWrapPoints(i,t[n]);return i},i.CurvePath.prototype.getWrapPoints=function(e,t){var n,r,i,o,a,s,c=this.getBoundingBox();for(n=0,r=e.length;r>n;n++){i=e[n],o=i.x,a=i.y,s=o/c.maxX,s=t.getUtoTmapping(s,o);var l=t.getPoint(s),u=t.getTangent(s);u.set(-u.y,u.x).multiplyScalar(a),i.x=l.x+u.x,i.y=l.y+u.y}return e},i.Gyroscope=function(){i.Object3D.call(this)},i.Gyroscope.prototype=Object.create(i.Object3D.prototype),i.Gyroscope.prototype.updateMatrixWorld=function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(this.translationWorld,this.quaternionWorld,this.scaleWorld),this.matrix.decompose(this.translationObject,this.quaternionObject,this.scaleObject),this.matrixWorld.compose(this.translationWorld,this.quaternionObject,this.scaleWorld)):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=0,n=this.children.length;n>t;t++)this.children[t].updateMatrixWorld(e)},i.Gyroscope.prototype.translationWorld=new i.Vector3,i.Gyroscope.prototype.translationObject=new i.Vector3,i.Gyroscope.prototype.quaternionWorld=new i.Quaternion,i.Gyroscope.prototype.quaternionObject=new i.Quaternion,i.Gyroscope.prototype.scaleWorld=new i.Vector3,i.Gyroscope.prototype.scaleObject=new i.Vector3,i.Path=function(e){i.CurvePath.call(this),this.actions=[],e&&this.fromPoints(e)},i.Path.prototype=Object.create(i.CurvePath.prototype),i.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"},i.Path.prototype.fromPoints=function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;n>t;t++)this.lineTo(e[t].x,e[t].y)},i.Path.prototype.moveTo=function(){var e=Array.prototype.slice.call(arguments);this.actions.push({action:i.PathActions.MOVE_TO,args:e})},i.Path.prototype.lineTo=function(e,t){var n=Array.prototype.slice.call(arguments),r=this.actions[this.actions.length-1].args,o=r[r.length-2],a=r[r.length-1],s=new i.LineCurve(new i.Vector2(o,a),new i.Vector2(e,t));this.curves.push(s),this.actions.push({action:i.PathActions.LINE_TO,args:n})},i.Path.prototype.quadraticCurveTo=function(e,t,n,r){var o=Array.prototype.slice.call(arguments),a=this.actions[this.actions.length-1].args,s=a[a.length-2],c=a[a.length-1],l=new i.QuadraticBezierCurve(new i.Vector2(s,c),new i.Vector2(e,t),new i.Vector2(n,r));this.curves.push(l),this.actions.push({action:i.PathActions.QUADRATIC_CURVE_TO,args:o})},i.Path.prototype.bezierCurveTo=function(e,t,n,r,o,a){var s=Array.prototype.slice.call(arguments),c=this.actions[this.actions.length-1].args,l=c[c.length-2],u=c[c.length-1],h=new i.CubicBezierCurve(new i.Vector2(l,u),new i.Vector2(e,t),new i.Vector2(n,r),new i.Vector2(o,a));this.curves.push(h),this.actions.push({action:i.PathActions.BEZIER_CURVE_TO,args:s})},i.Path.prototype.splineThru=function(e){var t=Array.prototype.slice.call(arguments),n=this.actions[this.actions.length-1].args,r=n[n.length-2],o=n[n.length-1],a=[new i.Vector2(r,o)];Array.prototype.push.apply(a,e);var s=new i.SplineCurve(a);this.curves.push(s),this.actions.push({action:i.PathActions.CSPLINE_THRU,args:t})},i.Path.prototype.arc=function(e,t,n,r,i,o){var a=this.actions[this.actions.length-1].args,s=a[a.length-2],c=a[a.length-1];this.absarc(e+s,t+c,n,r,i,o)},i.Path.prototype.absarc=function(e,t,n,r,i,o){this.absellipse(e,t,n,n,r,i,o)},i.Path.prototype.ellipse=function(e,t,n,r,i,o,a){var s=this.actions[this.actions.length-1].args,c=s[s.length-2],l=s[s.length-1];this.absellipse(e+c,t+l,n,r,i,o,a)},i.Path.prototype.absellipse=function(e,t,n,r,o,a,s){var c=Array.prototype.slice.call(arguments),l=new i.EllipseCurve(e,t,n,r,o,a,s);this.curves.push(l);var u=l.getPoint(1);c.push(u.x),c.push(u.y),this.actions.push({action:i.PathActions.ELLIPSE,args:c})},i.Path.prototype.getSpacedPoints=function(e){e||(e=40);for(var t=[],n=0;e>n;n++)t.push(this.getPoint(n/e));return t},i.Path.prototype.getPoints=function(e,t){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(e,t);e=e||12;var n,r,o,a,s,c,l,u,h,p,d,f,m,v,g,y,x,_,b=[];for(n=0,r=this.actions.length;r>n;n++)switch(o=this.actions[n],a=o.action,s=o.args,a){case i.PathActions.MOVE_TO:b.push(new i.Vector2(s[0],s[1]));break;case i.PathActions.LINE_TO:b.push(new i.Vector2(s[0],s[1]));break;case i.PathActions.QUADRATIC_CURVE_TO:for(c=s[2],l=s[3],p=s[0],d=s[1],b.length>0?(v=b[b.length-1],f=v.x,m=v.y):(v=this.actions[n-1].args,f=v[v.length-2],m=v[v.length-1]),g=1;e>=g;g++)y=g/e,x=i.Shape.Utils.b2(y,f,p,c),_=i.Shape.Utils.b2(y,m,d,l),b.push(new i.Vector2(x,_));break;case i.PathActions.BEZIER_CURVE_TO:for(c=s[4],l=s[5],p=s[0],d=s[1],u=s[2],h=s[3],b.length>0?(v=b[b.length-1],f=v.x,m=v.y):(v=this.actions[n-1].args,f=v[v.length-2],m=v[v.length-1]),g=1;e>=g;g++)y=g/e,x=i.Shape.Utils.b3(y,f,p,u,c),_=i.Shape.Utils.b3(y,m,d,h,l),b.push(new i.Vector2(x,_));break;case i.PathActions.CSPLINE_THRU:v=this.actions[n-1].args;var w=new i.Vector2(v[v.length-2],v[v.length-1]),E=[w],M=e*s[0].length;E=E.concat(s[0]);var C=new i.SplineCurve(E);for(g=1;M>=g;g++)b.push(C.getPointAt(g/M));break;case i.PathActions.ARC:var S,T=s[0],R=s[1],D=s[2],A=s[3],N=s[4],P=!!s[5],O=N-A,L=2*e;for(g=1;L>=g;g++)y=g/L,P||(y=1-y),S=A+y*O,x=T+D*Math.cos(S),_=R+D*Math.sin(S),b.push(new i.Vector2(x,_));break;case i.PathActions.ELLIPSE:var S,T=s[0],R=s[1],U=s[2],V=s[3],A=s[4],N=s[5],P=!!s[6],O=N-A,L=2*e;for(g=1;L>=g;g++)y=g/L,P||(y=1-y),S=A+y*O,x=T+U*Math.cos(S),_=R+V*Math.sin(S),b.push(new i.Vector2(x,_))}var k=b[b.length-1],F=1e-10;return Math.abs(k.x-b[0].x)<F&&Math.abs(k.y-b[0].y)<F&&b.splice(b.length-1,1),t&&b.push(b[0]),b},i.Path.prototype.toShapes=function(e,t){function n(e){var t,n,r,o,a,s=[],c=new i.Path;for(t=0,n=e.length;n>t;t++)r=e[t],a=r.args,o=r.action,o==i.PathActions.MOVE_TO&&0!=c.actions.length&&(s.push(c),c=new i.Path),c[o].apply(c,a);return 0!=c.actions.length&&s.push(c),s}function r(e){for(var t=[],n=0,r=e.length;r>n;n++){var o=e[n],a=new i.Shape;a.actions=o.actions,a.curves=o.curves,t.push(a)}return t}function o(e,t){for(var n=1e-10,r=t.length,i=!1,o=r-1,a=0;r>a;o=a++){var s=t[o],c=t[a],l=c.x-s.x,u=c.y-s.y;if(Math.abs(u)>n){if(0>u&&(s=t[a],l=-l,c=t[o],u=-u),e.y<s.y||e.y>c.y)continue;if(e.y==s.y){if(e.x==s.x)return!0}else{var h=u*(e.x-s.x)-l*(e.y-s.y);if(0==h)return!0;if(0>h)continue;i=!i}}else{if(e.y!=s.y)continue;if(c.x<=e.x&&e.x<=s.x||s.x<=e.x&&e.x<=c.x)return!0}}return i}var a=n(this.actions);if(0==a.length)return[];if(t===!0)return r(a);var s,c,l,u=[];if(1==a.length)return c=a[0],l=new i.Shape,l.actions=c.actions,l.curves=c.curves,u.push(l),u;var h=!i.Shape.Utils.isClockWise(a[0].getPoints());h=e?!h:h;var p,d=[],f=[],m=[],v=0;f[v]=void 0,m[v]=[];var g,y;for(g=0,y=a.length;y>g;g++)c=a[g],p=c.getPoints(),s=i.Shape.Utils.isClockWise(p),s=e?!s:s,s?(!h&&f[v]&&v++,f[v]={s:new i.Shape,p:p},f[v].s.actions=c.actions,f[v].s.curves=c.curves,h&&v++,m[v]=[]):m[v].push({h:c,p:p[0]});if(!f[0])return r(a);if(f.length>1){for(var x=!1,_=[],b=0,w=f.length;w>b;b++)d[b]=[];for(var b=0,w=f.length;w>b;b++)for(var E=(f[b],m[b]),M=0;M<E.length;M++){for(var C=E[M],S=!0,T=0;T<f.length;T++)o(C.p,f[T].p)&&(b!=T&&_.push({froms:b,tos:T,hole:M}),S?(S=!1,d[T].push(C)):x=!0);S&&d[b].push(C)}_.length>0&&(x||(m=d))}var R,D,A;for(g=0,y=f.length;y>g;g++)for(l=f[g].s,u.push(l),R=m[g],D=0,A=R.length;A>D;D++)l.holes.push(R[D].h);return u},i.Shape=function(){i.Path.apply(this,arguments),this.holes=[]},i.Shape.prototype=Object.create(i.Path.prototype),i.Shape.prototype.extrude=function(e){var t=new i.ExtrudeGeometry(this,e);return t},i.Shape.prototype.makeGeometry=function(e){var t=new i.ShapeGeometry(this,e);return t},i.Shape.prototype.getPointsHoles=function(e){var t,n=this.holes.length,r=[];for(t=0;n>t;t++)r[t]=this.holes[t].getTransformedPoints(e,this.bends);return r},i.Shape.prototype.getSpacedPointsHoles=function(e){var t,n=this.holes.length,r=[];for(t=0;n>t;t++)r[t]=this.holes[t].getTransformedSpacedPoints(e,this.bends);return r},i.Shape.prototype.extractAllPoints=function(e){return{shape:this.getTransformedPoints(e),holes:this.getPointsHoles(e)}},i.Shape.prototype.extractPoints=function(e){return this.useSpacedPoints?this.extractAllSpacedPoints(e):this.extractAllPoints(e)},i.Shape.prototype.extractAllSpacedPoints=function(e){return{shape:this.getTransformedSpacedPoints(e),holes:this.getSpacedPointsHoles(e)}},i.Shape.Utils={triangulateShape:function(e,t){function n(e,t,n){return e.x!=t.x?e.x<t.x?e.x<=n.x&&n.x<=t.x:t.x<=n.x&&n.x<=e.x:e.y<t.y?e.y<=n.y&&n.y<=t.y:t.y<=n.y&&n.y<=e.y}function r(e,t,r,i,o){var a=1e-10,s=t.x-e.x,c=t.y-e.y,l=i.x-r.x,u=i.y-r.y,h=e.x-r.x,p=e.y-r.y,d=c*l-s*u,f=c*h-s*p;if(Math.abs(d)>a){var m;if(d>0){if(0>f||f>d)return[];if(m=u*h-l*p,0>m||m>d)return[]}else{if(f>0||d>f)return[];if(m=u*h-l*p,m>0||d>m)return[]}if(0==m)return!o||0!=f&&f!=d?[e]:[];if(m==d)return!o||0!=f&&f!=d?[t]:[];if(0==f)return[r];if(f==d)return[i];var v=m/d;return[{x:e.x+v*s,y:e.y+v*c}]}if(0!=f||u*h!=l*p)return[];var g=0==s&&0==c,y=0==l&&0==u;if(g&&y)return e.x!=r.x||e.y!=r.y?[]:[e];if(g)return n(r,i,e)?[e]:[];if(y)return n(e,t,r)?[r]:[];var x,_,b,w,E,M,C,S;return 0!=s?(e.x<t.x?(x=e,b=e.x,_=t,w=t.x):(x=t,b=t.x,_=e,w=e.x),r.x<i.x?(E=r,C=r.x,M=i,S=i.x):(E=i,C=i.x,M=r,S=r.x)):(e.y<t.y?(x=e,b=e.y,_=t,w=t.y):(x=t,b=t.y,_=e,w=e.y),r.y<i.y?(E=r,C=r.y,M=i,S=i.y):(E=i,C=i.y,M=r,S=r.y)),C>=b?C>w?[]:w==C?o?[]:[E]:S>=w?[E,_]:[E,M]:b>S?[]:b==S?o?[]:[x]:S>=w?[x,_]:[x,M]}function o(e,t,n,r){var i=1e-10,o=t.x-e.x,a=t.y-e.y,s=n.x-e.x,c=n.y-e.y,l=r.x-e.x,u=r.y-e.y,h=o*c-a*s,p=o*u-a*l;if(Math.abs(h)>i){var d=l*c-u*s;return h>0?p>=0&&d>=0:p>=0||d>=0}return p>0}function a(e,t){function n(e,t){var n=y.length-1,r=e-1;0>r&&(r=n);var i=e+1;i>n&&(i=0);var a=o(y[e],y[r],y[i],s[t]);if(!a)return!1;var c=s.length-1,l=t-1;0>l&&(l=c);var u=t+1;return u>c&&(u=0),a=o(s[t],s[l],s[u],y[e]),a?!0:!1}function i(e,t){var n,i,o;for(n=0;n<y.length;n++)if(i=n+1,i%=y.length,o=r(e,t,y[n],y[i],!0),o.length>0)return!0;return!1}function a(e,n){var i,o,a,s,c;for(i=0;i<x.length;i++)for(o=t[x[i]],a=0;a<o.length;a++)if(s=a+1,s%=o.length,c=r(e,n,o[a],o[s],!0),c.length>0)return!0;return!1}for(var s,c,l,u,h,p,d,f,m,v,g,y=e.concat(),x=[],_=[],b=0,w=t.length;w>b;b++)x.push(b);for(var E=0,M=2*x.length;x.length>0;){if(M--,0>M){console.log("Infinite Loop! Holes left:"+x.length+", Probably Hole outside Shape!");break}for(l=E;l<y.length;l++){u=y[l],c=-1;for(var b=0;b<x.length;b++)if(p=x[b],d=u.x+":"+u.y+":"+p,void 0===_[d]){s=t[p];for(var C=0;C<s.length;C++)if(h=s[C],n(l,C)&&!i(u,h)&&!a(u,h)){c=C,x.splice(b,1),f=y.slice(0,l+1),m=y.slice(l),v=s.slice(c),g=s.slice(0,c+1),y=f.concat(v).concat(g).concat(m),E=l;break}if(c>=0)break;_[d]=!0}if(c>=0)break}}return y}for(var s,c,l,u,h,p,d={},f=e.concat(),m=0,v=t.length;v>m;m++)Array.prototype.push.apply(f,t[m]);for(s=0,c=f.length;c>s;s++)h=f[s].x+":"+f[s].y,void 0!==d[h]&&console.log("Duplicate point",h),d[h]=s;var g=a(e,t),y=i.FontUtils.Triangulate(g,!1);for(s=0,c=y.length;c>s;s++)for(u=y[s],l=0;3>l;l++)h=u[l].x+":"+u[l].y,p=d[h],void 0!==p&&(u[l]=p);return y.concat()},isClockWise:function(e){return i.FontUtils.Triangulate.area(e)<0},b2p0:function(e,t){var n=1-e;return n*n*t},b2p1:function(e,t){return 2*(1-e)*e*t},b2p2:function(e,t){return e*e*t},b2:function(e,t,n,r){return this.b2p0(e,t)+this.b2p1(e,n)+this.b2p2(e,r)},b3p0:function(e,t){var n=1-e;return n*n*n*t},b3p1:function(e,t){var n=1-e;return 3*n*n*e*t},b3p2:function(e,t){var n=1-e;return 3*n*e*e*t},b3p3:function(e,t){return e*e*e*t},b3:function(e,t,n,r,i){return this.b3p0(e,t)+this.b3p1(e,n)+this.b3p2(e,r)+this.b3p3(e,i)}},i.LineCurve=function(e,t){this.v1=e,this.v2=t},i.LineCurve.prototype=Object.create(i.Curve.prototype),i.LineCurve.prototype.getPoint=function(e){var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},i.LineCurve.prototype.getPointAt=function(e){return this.getPoint(e)},i.LineCurve.prototype.getTangent=function(){var e=this.v2.clone().sub(this.v1);return e.normalize()},i.QuadraticBezierCurve=function(e,t,n){this.v0=e,this.v1=t,this.v2=n},i.QuadraticBezierCurve.prototype=Object.create(i.Curve.prototype),i.QuadraticBezierCurve.prototype.getPoint=function(e){var t,n;return t=i.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),n=i.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),new i.Vector2(t,n)},i.QuadraticBezierCurve.prototype.getTangent=function(e){var t,n;t=i.Curve.Utils.tangentQuadraticBezier(e,this.v0.x,this.v1.x,this.v2.x),n=i.Curve.Utils.tangentQuadraticBezier(e,this.v0.y,this.v1.y,this.v2.y);var r=new i.Vector2(t,n);return r.normalize(),r},i.CubicBezierCurve=function(e,t,n,r){this.v0=e,this.v1=t,this.v2=n,this.v3=r},i.CubicBezierCurve.prototype=Object.create(i.Curve.prototype),i.CubicBezierCurve.prototype.getPoint=function(e){var t,n;return t=i.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),n=i.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new i.Vector2(t,n)},i.CubicBezierCurve.prototype.getTangent=function(e){var t,n;t=i.Curve.Utils.tangentCubicBezier(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),n=i.Curve.Utils.tangentCubicBezier(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y);var r=new i.Vector2(t,n);return r.normalize(),r},i.SplineCurve=function(e){this.points=void 0==e?[]:e},i.SplineCurve.prototype=Object.create(i.Curve.prototype),i.SplineCurve.prototype.getPoint=function(e){var t,n,r,o=new i.Vector2,a=[],s=this.points;return t=(s.length-1)*e,n=Math.floor(t),r=t-n,a[0]=0==n?n:n-1,a[1]=n,a[2]=n>s.length-2?s.length-1:n+1,a[3]=n>s.length-3?s.length-1:n+2,o.x=i.Curve.Utils.interpolate(s[a[0]].x,s[a[1]].x,s[a[2]].x,s[a[3]].x,r),o.y=i.Curve.Utils.interpolate(s[a[0]].y,s[a[1]].y,s[a[2]].y,s[a[3]].y,r),o},i.EllipseCurve=function(e,t,n,r,i,o,a){this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a},i.EllipseCurve.prototype=Object.create(i.Curve.prototype),i.EllipseCurve.prototype.getPoint=function(e){var t,n=this.aEndAngle-this.aStartAngle;
0>n&&(n+=2*Math.PI),n>2*Math.PI&&(n-=2*Math.PI),t=this.aClockwise===!0?this.aEndAngle+(1-e)*(2*Math.PI-n):this.aStartAngle+e*n;var r=this.aX+this.xRadius*Math.cos(t),o=this.aY+this.yRadius*Math.sin(t);return new i.Vector2(r,o)},i.ArcCurve=function(e,t,n,r,o,a){i.EllipseCurve.call(this,e,t,n,n,r,o,a)},i.ArcCurve.prototype=Object.create(i.EllipseCurve.prototype),i.LineCurve3=i.Curve.create(function(e,t){this.v1=e,this.v2=t},function(e){var t=new i.Vector3;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t}),i.QuadraticBezierCurve3=i.Curve.create(function(e,t,n){this.v0=e,this.v1=t,this.v2=n},function(e){var t,n,r;return t=i.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),n=i.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),r=i.Shape.Utils.b2(e,this.v0.z,this.v1.z,this.v2.z),new i.Vector3(t,n,r)}),i.CubicBezierCurve3=i.Curve.create(function(e,t,n,r){this.v0=e,this.v1=t,this.v2=n,this.v3=r},function(e){var t,n,r;return t=i.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),n=i.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),r=i.Shape.Utils.b3(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new i.Vector3(t,n,r)}),i.SplineCurve3=i.Curve.create(function(e){this.points=void 0==e?[]:e},function(e){var t,n,r,o=new i.Vector3,a=[],s=this.points;t=(s.length-1)*e,n=Math.floor(t),r=t-n,a[0]=0==n?n:n-1,a[1]=n,a[2]=n>s.length-2?s.length-1:n+1,a[3]=n>s.length-3?s.length-1:n+2;var c=s[a[0]],l=s[a[1]],u=s[a[2]],h=s[a[3]];return o.x=i.Curve.Utils.interpolate(c.x,l.x,u.x,h.x,r),o.y=i.Curve.Utils.interpolate(c.y,l.y,u.y,h.y,r),o.z=i.Curve.Utils.interpolate(c.z,l.z,u.z,h.z,r),o}),i.ClosedSplineCurve3=i.Curve.create(function(e){this.points=void 0==e?[]:e},function(e){var t,n,r,o=new i.Vector3,a=[],s=this.points;return t=(s.length-0)*e,n=Math.floor(t),r=t-n,n+=n>0?0:(Math.floor(Math.abs(n)/s.length)+1)*s.length,a[0]=(n-1)%s.length,a[1]=n%s.length,a[2]=(n+1)%s.length,a[3]=(n+2)%s.length,o.x=i.Curve.Utils.interpolate(s[a[0]].x,s[a[1]].x,s[a[2]].x,s[a[3]].x,r),o.y=i.Curve.Utils.interpolate(s[a[0]].y,s[a[1]].y,s[a[2]].y,s[a[3]].y,r),o.z=i.Curve.Utils.interpolate(s[a[0]].z,s[a[1]].z,s[a[2]].z,s[a[3]].z,r),o}),i.AnimationHandler={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2,add:function(){console.warn("THREE.AnimationHandler.add() has been deprecated.")},get:function(){console.warn("THREE.AnimationHandler.get() has been deprecated.")},remove:function(){console.warn("THREE.AnimationHandler.remove() has been deprecated.")},animations:[],init:function(e){if(e.initialized!==!0){for(var t=0;t<e.hierarchy.length;t++){for(var n=0;n<e.hierarchy[t].keys.length;n++)if(e.hierarchy[t].keys[n].time<0&&(e.hierarchy[t].keys[n].time=0),void 0!==e.hierarchy[t].keys[n].rot&&!(e.hierarchy[t].keys[n].rot instanceof i.Quaternion)){var r=e.hierarchy[t].keys[n].rot;e.hierarchy[t].keys[n].rot=(new i.Quaternion).fromArray(r)}if(e.hierarchy[t].keys.length&&void 0!==e.hierarchy[t].keys[0].morphTargets){for(var o={},n=0;n<e.hierarchy[t].keys.length;n++)for(var a=0;a<e.hierarchy[t].keys[n].morphTargets.length;a++){var s=e.hierarchy[t].keys[n].morphTargets[a];o[s]=-1}e.hierarchy[t].usedMorphTargets=o;for(var n=0;n<e.hierarchy[t].keys.length;n++){var c={};for(var s in o){for(var a=0;a<e.hierarchy[t].keys[n].morphTargets.length;a++)if(e.hierarchy[t].keys[n].morphTargets[a]===s){c[s]=e.hierarchy[t].keys[n].morphTargetsInfluences[a];break}a===e.hierarchy[t].keys[n].morphTargets.length&&(c[s]=0)}e.hierarchy[t].keys[n].morphTargetsInfluences=c}}for(var n=1;n<e.hierarchy[t].keys.length;n++)e.hierarchy[t].keys[n].time===e.hierarchy[t].keys[n-1].time&&(e.hierarchy[t].keys.splice(n,1),n--);for(var n=0;n<e.hierarchy[t].keys.length;n++)e.hierarchy[t].keys[n].index=n}return e.initialized=!0,e}},parse:function(e){var t=function(e,n){n.push(e);for(var r=0;r<e.children.length;r++)t(e.children[r],n)},n=[];if(e instanceof i.SkinnedMesh)for(var r=0;r<e.skeleton.bones.length;r++)n.push(e.skeleton.bones[r]);else t(e,n);return n},play:function(e){-1===this.animations.indexOf(e)&&this.animations.push(e)},stop:function(e){var t=this.animations.indexOf(e);-1!==t&&this.animations.splice(t,1)},update:function(e){for(var t=0;t<this.animations.length;t++)this.animations[t].update(e)}},i.Animation=function(e,t){this.root=e,this.data=i.AnimationHandler.init(t),this.hierarchy=i.AnimationHandler.parse(e),this.currentTime=0,this.timeScale=1,this.isPlaying=!1,this.loop=!0,this.weight=0,this.interpolationType=i.AnimationHandler.LINEAR},i.Animation.prototype.keyTypes=["pos","rot","scl"],i.Animation.prototype.play=function(e,t){this.currentTime=void 0!==e?e:0,this.weight=void 0!==t?t:1,this.isPlaying=!0,this.reset(),i.AnimationHandler.play(this)},i.Animation.prototype.stop=function(){this.isPlaying=!1,i.AnimationHandler.stop(this)},i.Animation.prototype.reset=function(){for(var e=0,t=this.hierarchy.length;t>e;e++){var n=this.hierarchy[e];n.matrixAutoUpdate=!0,void 0===n.animationCache&&(n.animationCache={}),void 0===n.animationCache[this.data.name]&&(n.animationCache[this.data.name]={},n.animationCache[this.data.name].prevKey={pos:0,rot:0,scl:0},n.animationCache[this.data.name].nextKey={pos:0,rot:0,scl:0},n.animationCache[this.data.name].originalMatrix=n.matrix);for(var r=n.animationCache[this.data.name],i=0;3>i;i++){for(var o=this.keyTypes[i],a=this.data.hierarchy[e].keys[0],s=this.getNextKeyWith(o,e,1);s.time<this.currentTime&&s.index>a.index;)a=s,s=this.getNextKeyWith(o,e,s.index+1);r.prevKey[o]=a,r.nextKey[o]=s}}},i.Animation.prototype.update=function(){var e=[],t=new i.Vector3,n=new i.Vector3,r=new i.Quaternion,o=function(e,t){var n,r,i,o,s,c,l,u,h,p=[],d=[];return n=(e.length-1)*t,r=Math.floor(n),i=n-r,p[0]=0===r?r:r-1,p[1]=r,p[2]=r>e.length-2?r:r+1,p[3]=r>e.length-3?r:r+2,c=e[p[0]],l=e[p[1]],u=e[p[2]],h=e[p[3]],o=i*i,s=i*o,d[0]=a(c[0],l[0],u[0],h[0],i,o,s),d[1]=a(c[1],l[1],u[1],h[1],i,o,s),d[2]=a(c[2],l[2],u[2],h[2],i,o,s),d},a=function(e,t,n,r,i,o,a){var s=.5*(n-e),c=.5*(r-t);return(2*(t-n)+s+c)*a+(-3*(t-n)-2*s-c)*o+s*i+t};return function(a){if(this.isPlaying!==!1&&(this.currentTime+=a*this.timeScale,0!==this.weight)){var s=this.data.length;if(this.loop===!0&&this.currentTime>s)this.currentTime%=s,this.reset();else if(this.loop===!1&&this.currentTime>s)return void this.stop();for(var c=0,l=this.hierarchy.length;l>c;c++)for(var u=this.hierarchy[c],h=u.animationCache[this.data.name],p=0;3>p;p++){var d=this.keyTypes[p],f=h.prevKey[d],m=h.nextKey[d];if(m.time<=this.currentTime){for(f=this.data.hierarchy[c].keys[0],m=this.getNextKeyWith(d,c,1);m.time<this.currentTime&&m.index>f.index;)f=m,m=this.getNextKeyWith(d,c,m.index+1);h.prevKey[d]=f,h.nextKey[d]=m}u.matrixAutoUpdate=!0,u.matrixWorldNeedsUpdate=!0;var v=(this.currentTime-f.time)/(m.time-f.time),g=f[d],y=m[d];if(0>v&&(v=0),v>1&&(v=1),"pos"===d){if(this.interpolationType===i.AnimationHandler.LINEAR)if(n.x=g[0]+(y[0]-g[0])*v,n.y=g[1]+(y[1]-g[1])*v,n.z=g[2]+(y[2]-g[2])*v,u instanceof i.Bone){var x=this.weight/(this.weight+u.accumulatedPosWeight);u.position.lerp(n,x),u.accumulatedPosWeight+=this.weight}else u.position.copy(n);else if(this.interpolationType===i.AnimationHandler.CATMULLROM||this.interpolationType===i.AnimationHandler.CATMULLROM_FORWARD){e[0]=this.getPrevKeyWith("pos",c,f.index-1).pos,e[1]=g,e[2]=y,e[3]=this.getNextKeyWith("pos",c,m.index+1).pos,v=.33*v+.33;var _=o(e,v),x=1;u instanceof i.Bone&&(x=this.weight/(this.weight+u.accumulatedPosWeight),u.accumulatedPosWeight+=this.weight);var b=u.position;if(b.x=b.x+(_[0]-b.x)*x,b.y=b.y+(_[1]-b.y)*x,b.z=b.z+(_[2]-b.z)*x,this.interpolationType===i.AnimationHandler.CATMULLROM_FORWARD){var w=o(e,1.01*v);t.set(w[0],w[1],w[2]),t.sub(b),t.y=0,t.normalize();var E=Math.atan2(t.x,t.z);u.rotation.set(0,E,0)}}}else if("rot"===d)if(i.Quaternion.slerp(g,y,r,v),u instanceof i.Bone)if(0===u.accumulatedRotWeight)u.quaternion.copy(r),u.accumulatedRotWeight=this.weight;else{var x=this.weight/(this.weight+u.accumulatedRotWeight);i.Quaternion.slerp(u.quaternion,r,u.quaternion,x),u.accumulatedRotWeight+=this.weight}else u.quaternion.copy(r);else if("scl"===d)if(n.x=g[0]+(y[0]-g[0])*v,n.y=g[1]+(y[1]-g[1])*v,n.z=g[2]+(y[2]-g[2])*v,u instanceof i.Bone){var x=this.weight/(this.weight+u.accumulatedSclWeight);u.scale.lerp(n,x),u.accumulatedSclWeight+=this.weight}else u.scale.copy(n)}return!0}}}(),i.Animation.prototype.getNextKeyWith=function(e,t,n){var r=this.data.hierarchy[t].keys;for(this.interpolationType===i.AnimationHandler.CATMULLROM||this.interpolationType===i.AnimationHandler.CATMULLROM_FORWARD?n=n<r.length-1?n:r.length-1:n%=r.length;n<r.length;n++)if(void 0!==r[n][e])return r[n];return this.data.hierarchy[t].keys[0]},i.Animation.prototype.getPrevKeyWith=function(e,t,n){var r=this.data.hierarchy[t].keys;for(n=this.interpolationType===i.AnimationHandler.CATMULLROM||this.interpolationType===i.AnimationHandler.CATMULLROM_FORWARD?n>0?n:0:n>=0?n:n+r.length;n>=0;n--)if(void 0!==r[n][e])return r[n];return this.data.hierarchy[t].keys[r.length-1]},i.KeyFrameAnimation=function(e){this.root=e.node,this.data=i.AnimationHandler.init(e),this.hierarchy=i.AnimationHandler.parse(this.root),this.currentTime=0,this.timeScale=.001,this.isPlaying=!1,this.isPaused=!0,this.loop=!0;for(var t=0,n=this.hierarchy.length;n>t;t++){var r=this.data.hierarchy[t].keys,o=this.data.hierarchy[t].sids,a=this.hierarchy[t];if(r.length&&o){for(var s=0;s<o.length;s++){var c=o[s],l=this.getNextKeyWith(c,t,0);l&&l.apply(c)}a.matrixAutoUpdate=!1,this.data.hierarchy[t].node.updateMatrix(),a.matrixWorldNeedsUpdate=!0}}},i.KeyFrameAnimation.prototype.play=function(e){if(this.currentTime=void 0!==e?e:0,this.isPlaying===!1){this.isPlaying=!0;var t,n,r,o=this.hierarchy.length;for(t=0;o>t;t++){n=this.hierarchy[t],r=this.data.hierarchy[t],void 0===r.animationCache&&(r.animationCache={},r.animationCache.prevKey=null,r.animationCache.nextKey=null,r.animationCache.originalMatrix=n.matrix);var a=this.data.hierarchy[t].keys;a.length&&(r.animationCache.prevKey=a[0],r.animationCache.nextKey=a[1],this.startTime=Math.min(a[0].time,this.startTime),this.endTime=Math.max(a[a.length-1].time,this.endTime))}this.update(0)}this.isPaused=!1,i.AnimationHandler.play(this)},i.KeyFrameAnimation.prototype.stop=function(){this.isPlaying=!1,this.isPaused=!1,i.AnimationHandler.stop(this);for(var e=0;e<this.data.hierarchy.length;e++){var t=this.hierarchy[e],n=this.data.hierarchy[e];if(void 0!==n.animationCache){var r=n.animationCache.originalMatrix;r.copy(t.matrix),t.matrix=r,delete n.animationCache}}},i.KeyFrameAnimation.prototype.update=function(e){if(this.isPlaying!==!1){this.currentTime+=e*this.timeScale;var t=this.data.length;this.loop===!0&&this.currentTime>t&&(this.currentTime%=t),this.currentTime=Math.min(this.currentTime,t);for(var n=0,r=this.hierarchy.length;r>n;n++){var i=this.hierarchy[n],o=this.data.hierarchy[n],a=o.keys,s=o.animationCache;if(a.length){var c=s.prevKey,l=s.nextKey;if(l.time<=this.currentTime){for(;l.time<this.currentTime&&l.index>c.index;)c=l,l=a[c.index+1];s.prevKey=c,s.nextKey=l}l.time>=this.currentTime?c.interpolate(l,this.currentTime):c.interpolate(l,l.time),this.data.hierarchy[n].node.updateMatrix(),i.matrixWorldNeedsUpdate=!0}}}},i.KeyFrameAnimation.prototype.getNextKeyWith=function(e,t,n){var r=this.data.hierarchy[t].keys;for(n%=r.length;n<r.length;n++)if(r[n].hasTarget(e))return r[n];return r[0]},i.KeyFrameAnimation.prototype.getPrevKeyWith=function(e,t,n){var r=this.data.hierarchy[t].keys;for(n=n>=0?n:n+r.length;n>=0;n--)if(r[n].hasTarget(e))return r[n];return r[r.length-1]},i.MorphAnimation=function(e){this.mesh=e,this.frames=e.morphTargetInfluences.length,this.currentTime=0,this.duration=1e3,this.loop=!0,this.isPlaying=!1},i.MorphAnimation.prototype={play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},update:function(){var e=0,t=0;return function(n){if(this.isPlaying!==!1){this.currentTime+=n,this.loop===!0&&this.currentTime>this.duration&&(this.currentTime%=this.duration),this.currentTime=Math.min(this.currentTime,this.duration);var r=this.duration/this.frames,i=Math.floor(this.currentTime/r);i!=t&&(this.mesh.morphTargetInfluences[e]=0,this.mesh.morphTargetInfluences[t]=1,this.mesh.morphTargetInfluences[i]=0,e=t,t=i),this.mesh.morphTargetInfluences[i]=this.currentTime%r/r,this.mesh.morphTargetInfluences[e]=1-this.mesh.morphTargetInfluences[i]}}}()},i.BoxGeometry=function(e,t,n,r,o,a){function s(e,t,n,r,o,a,s,l){var u,h,p,d=c.widthSegments,f=c.heightSegments,m=o/2,v=a/2,g=c.vertices.length;"x"===e&&"y"===t||"y"===e&&"x"===t?u="z":"x"===e&&"z"===t||"z"===e&&"x"===t?(u="y",f=c.depthSegments):("z"===e&&"y"===t||"y"===e&&"z"===t)&&(u="x",d=c.depthSegments);var y=d+1,x=f+1,_=o/d,b=a/f,w=new i.Vector3;for(w[u]=s>0?1:-1,p=0;x>p;p++)for(h=0;y>h;h++){var E=new i.Vector3;E[e]=(h*_-m)*n,E[t]=(p*b-v)*r,E[u]=s,c.vertices.push(E)}for(p=0;f>p;p++)for(h=0;d>h;h++){var M=h+y*p,C=h+y*(p+1),S=h+1+y*(p+1),T=h+1+y*p,R=new i.Vector2(h/d,1-p/f),D=new i.Vector2(h/d,1-(p+1)/f),A=new i.Vector2((h+1)/d,1-(p+1)/f),N=new i.Vector2((h+1)/d,1-p/f),P=new i.Face3(M+g,C+g,T+g);P.normal.copy(w),P.vertexNormals.push(w.clone(),w.clone(),w.clone()),P.materialIndex=l,c.faces.push(P),c.faceVertexUvs[0].push([R,D,N]),P=new i.Face3(C+g,S+g,T+g),P.normal.copy(w),P.vertexNormals.push(w.clone(),w.clone(),w.clone()),P.materialIndex=l,c.faces.push(P),c.faceVertexUvs[0].push([D.clone(),A,N.clone()])}}i.Geometry.call(this),this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:o,depthSegments:a},this.widthSegments=r||1,this.heightSegments=o||1,this.depthSegments=a||1;var c=this,l=e/2,u=t/2,h=n/2;s("z","y",-1,-1,n,t,l,0),s("z","y",1,-1,n,t,-l,1),s("x","z",1,1,e,n,u,2),s("x","z",1,-1,e,n,-u,3),s("x","y",1,-1,e,t,h,4),s("x","y",-1,-1,e,t,-h,5),this.mergeVertices()},i.BoxGeometry.prototype=Object.create(i.Geometry.prototype),i.CircleGeometry=function(e,t,n,r){i.Geometry.call(this),this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||50,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var o,a=[],s=new i.Vector3,c=new i.Vector2(.5,.5);for(this.vertices.push(s),a.push(c),o=0;t>=o;o++){var l=new i.Vector3,u=n+o/t*r;l.x=e*Math.cos(u),l.y=e*Math.sin(u),this.vertices.push(l),a.push(new i.Vector2((l.x/e+1)/2,(l.y/e+1)/2))}var h=new i.Vector3(0,0,1);for(o=1;t>=o;o++)this.faces.push(new i.Face3(o,o+1,0,[h.clone(),h.clone(),h.clone()])),this.faceVertexUvs[0].push([a[o].clone(),a[o+1].clone(),c.clone()]);this.computeFaceNormals(),this.boundingSphere=new i.Sphere(new i.Vector3,e)},i.CircleGeometry.prototype=Object.create(i.Geometry.prototype),i.CubeGeometry=function(e,t,n,r,o,a){return console.warn("THEE.CubeGeometry has been renamed to THREE.BoxGeometry."),new i.BoxGeometry(e,t,n,r,o,a)},i.CylinderGeometry=function(e,t,n,r,o,a){i.Geometry.call(this),this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:o,openEnded:a},e=void 0!==e?e:20,t=void 0!==t?t:20,n=void 0!==n?n:100,r=r||8,o=o||1,a=void 0!==a?a:!1;var s,c,l=n/2,u=[],h=[];for(c=0;o>=c;c++){var p=[],d=[],f=c/o,m=f*(t-e)+e;for(s=0;r>=s;s++){var v=s/r,g=new i.Vector3;g.x=m*Math.sin(v*Math.PI*2),g.y=-f*n+l,g.z=m*Math.cos(v*Math.PI*2),this.vertices.push(g),p.push(this.vertices.length-1),d.push(new i.Vector2(v,1-f))}u.push(p),h.push(d)}var y,x,_=(t-e)/n;for(s=0;r>s;s++)for(0!==e?(y=this.vertices[u[0][s]].clone(),x=this.vertices[u[0][s+1]].clone()):(y=this.vertices[u[1][s]].clone(),x=this.vertices[u[1][s+1]].clone()),y.setY(Math.sqrt(y.x*y.x+y.z*y.z)*_).normalize(),x.setY(Math.sqrt(x.x*x.x+x.z*x.z)*_).normalize(),c=0;o>c;c++){var b=u[c][s],w=u[c+1][s],E=u[c+1][s+1],M=u[c][s+1],C=y.clone(),S=y.clone(),T=x.clone(),R=x.clone(),D=h[c][s].clone(),A=h[c+1][s].clone(),N=h[c+1][s+1].clone(),P=h[c][s+1].clone();this.faces.push(new i.Face3(b,w,M,[C,S,R])),this.faceVertexUvs[0].push([D,A,P]),this.faces.push(new i.Face3(w,E,M,[S.clone(),T,R.clone()])),this.faceVertexUvs[0].push([A.clone(),N,P.clone()])}if(a===!1&&e>0)for(this.vertices.push(new i.Vector3(0,l,0)),s=0;r>s;s++){var b=u[0][s],w=u[0][s+1],E=this.vertices.length-1,C=new i.Vector3(0,1,0),S=new i.Vector3(0,1,0),T=new i.Vector3(0,1,0),D=h[0][s].clone(),A=h[0][s+1].clone(),N=new i.Vector2(A.x,0);this.faces.push(new i.Face3(b,w,E,[C,S,T])),this.faceVertexUvs[0].push([D,A,N])}if(a===!1&&t>0)for(this.vertices.push(new i.Vector3(0,-l,0)),s=0;r>s;s++){var b=u[c][s+1],w=u[c][s],E=this.vertices.length-1,C=new i.Vector3(0,-1,0),S=new i.Vector3(0,-1,0),T=new i.Vector3(0,-1,0),D=h[c][s+1].clone(),A=h[c][s].clone(),N=new i.Vector2(A.x,1);this.faces.push(new i.Face3(b,w,E,[C,S,T])),this.faceVertexUvs[0].push([D,A,N])}this.computeFaceNormals()},i.CylinderGeometry.prototype=Object.create(i.Geometry.prototype),i.ExtrudeGeometry=function(e,t){return"undefined"==typeof e?void(e=[]):(i.Geometry.call(this),e=e instanceof Array?e:[e],this.addShapeList(e,t),void this.computeFaceNormals())},i.ExtrudeGeometry.prototype=Object.create(i.Geometry.prototype),i.ExtrudeGeometry.prototype.addShapeList=function(e,t){for(var n=e.length,r=0;n>r;r++){var i=e[r];this.addShape(i,t)}},i.ExtrudeGeometry.prototype.addShape=function(e,t){function n(e,t,n){return t||console.log("die"),t.clone().multiplyScalar(n).add(e)}function r(e,t,n){var r,o,a=1e-10,s=i.Math.sign,c=1,l=e.x-t.x,u=e.y-t.y,h=n.x-e.x,p=n.y-e.y,d=l*l+u*u,f=l*p-u*h;if(Math.abs(f)>a){var m=Math.sqrt(d),v=Math.sqrt(h*h+p*p),g=t.x-u/m,y=t.y+l/m,x=n.x-p/v,_=n.y+h/v,b=((x-g)*p-(_-y)*h)/(l*p-u*h);r=g+l*b-e.x,o=y+u*b-e.y;var w=r*r+o*o;if(2>=w)return new i.Vector2(r,o);c=Math.sqrt(w/2)}else{var E=!1;l>a?h>a&&(E=!0):-a>l?-a>h&&(E=!0):s(u)==s(p)&&(E=!0),E?(r=-u,o=l,c=Math.sqrt(d)):(r=l,o=u,c=Math.sqrt(d/2))}return new i.Vector2(r/c,o/c)}function o(){if(_){var e=0,t=W*e;for(q=0;X>q;q++)G=k[q],l(G[2]+t,G[1]+t,G[0]+t,!0);for(e=w+2*x,t=W*e,q=0;X>q;q++)G=k[q],l(G[0]+t,G[1]+t,G[2]+t,!1)}else{for(q=0;X>q;q++)G=k[q],l(G[2],G[1],G[0],!0);for(q=0;X>q;q++)G=k[q],l(G[0]+W*w,G[1]+W*w,G[2]+W*w,!1)}}function a(){var e=0;for(s(F,e),e+=F.length,D=0,A=U.length;A>D;D++)R=U[D],s(R,e),e+=R.length}function s(e,t){var n,r;for(q=e.length;--q>=0;){n=q,r=q-1,0>r&&(r=e.length-1);var i=0,o=w+2*x;for(i=0;o>i;i++){var a=W*i,s=W*(i+1),c=t+n+a,l=t+r+a,h=t+r+s,p=t+n+s;u(c,l,h,p,e,i,o,n,r)}}}function c(e,t,n){N.vertices.push(new i.Vector3(e,t,n))}function l(n,r,o,a){n+=P,r+=P,o+=P,N.faces.push(new i.Face3(n,r,o,null,null,C));var s=a?T.generateBottomUV(N,e,t,n,r,o):T.generateTopUV(N,e,t,n,r,o);N.faceVertexUvs[0].push(s)}function u(n,r,o,a,s,c,l,u,h){n+=P,r+=P,o+=P,a+=P,N.faces.push(new i.Face3(n,r,a,null,null,S)),N.faces.push(new i.Face3(r,o,a,null,null,S));var p=T.generateSideWallUV(N,e,s,t,n,r,o,a,c,l,u,h);N.faceVertexUvs[0].push([p[0],p[1],p[3]]),N.faceVertexUvs[0].push([p[1],p[2],p[3]])}var h,p,d,f,m,v=void 0!==t.amount?t.amount:100,g=void 0!==t.bevelThickness?t.bevelThickness:6,y=void 0!==t.bevelSize?t.bevelSize:g-2,x=void 0!==t.bevelSegments?t.bevelSegments:3,_=void 0!==t.bevelEnabled?t.bevelEnabled:!0,b=void 0!==t.curveSegments?t.curveSegments:12,w=void 0!==t.steps?t.steps:1,E=t.extrudePath,M=!1,C=t.material,S=t.extrudeMaterial,T=void 0!==t.UVGenerator?t.UVGenerator:i.ExtrudeGeometry.WorldUVGenerator;E&&(h=E.getSpacedPoints(w),M=!0,_=!1,p=void 0!==t.frames?t.frames:new i.TubeGeometry.FrenetFrames(E,w,!1),d=new i.Vector3,f=new i.Vector3,m=new i.Vector3),_||(x=0,g=0,y=0);var R,D,A,N=this,P=this.vertices.length,O=e.extractPoints(b),L=O.shape,U=O.holes,V=!i.Shape.Utils.isClockWise(L);if(V){for(L=L.reverse(),D=0,A=U.length;A>D;D++)R=U[D],i.Shape.Utils.isClockWise(R)&&(U[D]=R.reverse());V=!1}var k=i.Shape.Utils.triangulateShape(L,U),F=L;for(D=0,A=U.length;A>D;D++)R=U[D],L=L.concat(R);for(var I,B,z,H,j,G,W=L.length,X=k.length,Y=(F.length,180/Math.PI,[]),q=0,K=F.length,Q=K-1,Z=q+1;K>q;q++,Q++,Z++){Q===K&&(Q=0),Z===K&&(Z=0);{F[q],F[Q],F[Z]}Y[q]=r(F[q],F[Q],F[Z])}var J,$=[],et=Y.concat();for(D=0,A=U.length;A>D;D++){for(R=U[D],J=[],q=0,K=R.length,Q=K-1,Z=q+1;K>q;q++,Q++,Z++)Q===K&&(Q=0),Z===K&&(Z=0),J[q]=r(R[q],R[Q],R[Z]);$.push(J),et=et.concat(J)}for(I=0;x>I;I++){for(z=I/x,H=g*(1-z),B=y*Math.sin(z*Math.PI/2),q=0,K=F.length;K>q;q++)j=n(F[q],Y[q],B),c(j.x,j.y,-H);for(D=0,A=U.length;A>D;D++)for(R=U[D],J=$[D],q=0,K=R.length;K>q;q++)j=n(R[q],J[q],B),c(j.x,j.y,-H)}for(B=y,q=0;W>q;q++)j=_?n(L[q],et[q],B):L[q],M?(f.copy(p.normals[0]).multiplyScalar(j.x),d.copy(p.binormals[0]).multiplyScalar(j.y),m.copy(h[0]).add(f).add(d),c(m.x,m.y,m.z)):c(j.x,j.y,0);var tt;for(tt=1;w>=tt;tt++)for(q=0;W>q;q++)j=_?n(L[q],et[q],B):L[q],M?(f.copy(p.normals[tt]).multiplyScalar(j.x),d.copy(p.binormals[tt]).multiplyScalar(j.y),m.copy(h[tt]).add(f).add(d),c(m.x,m.y,m.z)):c(j.x,j.y,v/w*tt);for(I=x-1;I>=0;I--){for(z=I/x,H=g*(1-z),B=y*Math.sin(z*Math.PI/2),q=0,K=F.length;K>q;q++)j=n(F[q],Y[q],B),c(j.x,j.y,v+H);for(D=0,A=U.length;A>D;D++)for(R=U[D],J=$[D],q=0,K=R.length;K>q;q++)j=n(R[q],J[q],B),M?c(j.x,j.y+h[w-1].y,h[w-1].x+H):c(j.x,j.y,v+H)}o(),a()},i.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(e,t,n,r,o,a){var s=e.vertices[r].x,c=e.vertices[r].y,l=e.vertices[o].x,u=e.vertices[o].y,h=e.vertices[a].x,p=e.vertices[a].y;return[new i.Vector2(s,c),new i.Vector2(l,u),new i.Vector2(h,p)]},generateBottomUV:function(e,t,n,r,i,o){return this.generateTopUV(e,t,n,r,i,o)},generateSideWallUV:function(e,t,n,r,o,a,s,c){var l=e.vertices[o].x,u=e.vertices[o].y,h=e.vertices[o].z,p=e.vertices[a].x,d=e.vertices[a].y,f=e.vertices[a].z,m=e.vertices[s].x,v=e.vertices[s].y,g=e.vertices[s].z,y=e.vertices[c].x,x=e.vertices[c].y,_=e.vertices[c].z;return Math.abs(u-d)<.01?[new i.Vector2(l,1-h),new i.Vector2(p,1-f),new i.Vector2(m,1-g),new i.Vector2(y,1-_)]:[new i.Vector2(u,1-h),new i.Vector2(d,1-f),new i.Vector2(v,1-g),new i.Vector2(x,1-_)]}},i.ExtrudeGeometry.__v1=new i.Vector2,i.ExtrudeGeometry.__v2=new i.Vector2,i.ExtrudeGeometry.__v3=new i.Vector2,i.ExtrudeGeometry.__v4=new i.Vector2,i.ExtrudeGeometry.__v5=new i.Vector2,i.ExtrudeGeometry.__v6=new i.Vector2,i.ShapeGeometry=function(e,t){i.Geometry.call(this),e instanceof Array==!1&&(e=[e]),this.addShapeList(e,t),this.computeFaceNormals()},i.ShapeGeometry.prototype=Object.create(i.Geometry.prototype),i.ShapeGeometry.prototype.addShapeList=function(e,t){for(var n=0,r=e.length;r>n;n++)this.addShape(e[n],t);return this},i.ShapeGeometry.prototype.addShape=function(e,t){void 0===t&&(t={});var n,r,o,a=void 0!==t.curveSegments?t.curveSegments:12,s=t.material,c=void 0===t.UVGenerator?i.ExtrudeGeometry.WorldUVGenerator:t.UVGenerator,l=this.vertices.length,u=e.extractPoints(a),h=u.shape,p=u.holes,d=!i.Shape.Utils.isClockWise(h);if(d){for(h=h.reverse(),n=0,r=p.length;r>n;n++)o=p[n],i.Shape.Utils.isClockWise(o)&&(p[n]=o.reverse());d=!1}var f=i.Shape.Utils.triangulateShape(h,p),m=h;for(n=0,r=p.length;r>n;n++)o=p[n],h=h.concat(o);{var v,g,y=h.length,x=f.length;m.length}for(n=0;y>n;n++)v=h[n],this.vertices.push(new i.Vector3(v.x,v.y,0));for(n=0;x>n;n++){g=f[n];var _=g[0]+l,b=g[1]+l,w=g[2]+l;this.faces.push(new i.Face3(_,b,w,null,null,s)),this.faceVertexUvs[0].push(c.generateBottomUV(this,e,t,_,b,w))}},i.LatheGeometry=function(e,t,n,r){i.Geometry.call(this),t=t||12,n=n||0,r=r||2*Math.PI;for(var o=1/(e.length-1),a=1/t,s=0,c=t;c>=s;s++)for(var l=n+s*a*r,u=Math.cos(l),h=Math.sin(l),p=0,d=e.length;d>p;p++){var f=e[p],m=new i.Vector3;m.x=u*f.x-h*f.y,m.y=h*f.x+u*f.y,m.z=f.z,this.vertices.push(m)}for(var v=e.length,s=0,c=t;c>s;s++)for(var p=0,d=e.length-1;d>p;p++){var g=p+v*s,y=g,x=g+v,u=g+1+v,_=g+1,b=s*a,w=p*o,E=b+a,M=w+o;this.faces.push(new i.Face3(y,x,_)),this.faceVertexUvs[0].push([new i.Vector2(b,w),new i.Vector2(E,w),new i.Vector2(b,M)]),this.faces.push(new i.Face3(x,u,_)),this.faceVertexUvs[0].push([new i.Vector2(E,w),new i.Vector2(E,M),new i.Vector2(b,M)])}this.mergeVertices(),this.computeFaceNormals(),this.computeVertexNormals()},i.LatheGeometry.prototype=Object.create(i.Geometry.prototype),i.PlaneGeometry=function(e,t,n,r){i.Geometry.call(this),this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var o,a,s=e/2,c=t/2,l=n||1,u=r||1,h=l+1,p=u+1,d=e/l,f=t/u,m=new i.Vector3(0,0,1);for(a=0;p>a;a++){var v=a*f-c;for(o=0;h>o;o++){var g=o*d-s;this.vertices.push(new i.Vector3(g,-v,0))}}for(a=0;u>a;a++)for(o=0;l>o;o++){var y=o+h*a,x=o+h*(a+1),_=o+1+h*(a+1),b=o+1+h*a,w=new i.Vector2(o/l,1-a/u),E=new i.Vector2(o/l,1-(a+1)/u),M=new i.Vector2((o+1)/l,1-(a+1)/u),C=new i.Vector2((o+1)/l,1-a/u),S=new i.Face3(y,x,b);S.normal.copy(m),S.vertexNormals.push(m.clone(),m.clone(),m.clone()),this.faces.push(S),this.faceVertexUvs[0].push([w,E,C]),S=new i.Face3(x,_,b),S.normal.copy(m),S.vertexNormals.push(m.clone(),m.clone(),m.clone()),this.faces.push(S),this.faceVertexUvs[0].push([E.clone(),M,C.clone()])}},i.PlaneGeometry.prototype=Object.create(i.Geometry.prototype),i.RingGeometry=function(e,t,n,r,o,a){i.Geometry.call(this),e=e||0,t=t||50,o=void 0!==o?o:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8,r=void 0!==r?Math.max(1,r):8;var s,c,l=[],u=e,h=(t-e)/r;for(s=0;r+1>s;s++){for(c=0;n+1>c;c++){var p=new i.Vector3,d=o+c/n*a;p.x=u*Math.cos(d),p.y=u*Math.sin(d),this.vertices.push(p),l.push(new i.Vector2((p.x/t+1)/2,(p.y/t+1)/2))}u+=h}var f=new i.Vector3(0,0,1);for(s=0;r>s;s++){var m=s*(n+1);for(c=0;n>c;c++){var d=c+m,v=d,g=d+n+1,y=d+n+2;this.faces.push(new i.Face3(v,g,y,[f.clone(),f.clone(),f.clone()])),this.faceVertexUvs[0].push([l[v].clone(),l[g].clone(),l[y].clone()]),v=d,g=d+n+2,y=d+1,this.faces.push(new i.Face3(v,g,y,[f.clone(),f.clone(),f.clone()])),this.faceVertexUvs[0].push([l[v].clone(),l[g].clone(),l[y].clone()])}}this.computeFaceNormals(),this.boundingSphere=new i.Sphere(new i.Vector3,u)},i.RingGeometry.prototype=Object.create(i.Geometry.prototype),i.SphereGeometry=function(e,t,n,r,o,a,s){i.Geometry.call(this),this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:o,thetaStart:a,thetaLength:s},e=e||50,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,o=void 0!==o?o:2*Math.PI,a=void 0!==a?a:0,s=void 0!==s?s:Math.PI;var c,l,u=[],h=[];for(l=0;n>=l;l++){var p=[],d=[];for(c=0;t>=c;c++){var f=c/t,m=l/n,v=new i.Vector3;v.x=-e*Math.cos(r+f*o)*Math.sin(a+m*s),v.y=e*Math.cos(a+m*s),v.z=e*Math.sin(r+f*o)*Math.sin(a+m*s),this.vertices.push(v),p.push(this.vertices.length-1),d.push(new i.Vector2(f,1-m))}u.push(p),h.push(d)}for(l=0;n>l;l++)for(c=0;t>c;c++){var g=u[l][c+1],y=u[l][c],x=u[l+1][c],_=u[l+1][c+1],b=this.vertices[g].clone().normalize(),w=this.vertices[y].clone().normalize(),E=this.vertices[x].clone().normalize(),M=this.vertices[_].clone().normalize(),C=h[l][c+1].clone(),S=h[l][c].clone(),T=h[l+1][c].clone(),R=h[l+1][c+1].clone();Math.abs(this.vertices[g].y)===e?(C.x=(C.x+S.x)/2,this.faces.push(new i.Face3(g,x,_,[b,E,M])),this.faceVertexUvs[0].push([C,T,R])):Math.abs(this.vertices[x].y)===e?(T.x=(T.x+R.x)/2,this.faces.push(new i.Face3(g,y,x,[b,w,E])),this.faceVertexUvs[0].push([C,S,T])):(this.faces.push(new i.Face3(g,y,_,[b,w,M])),this.faceVertexUvs[0].push([C,S,R]),this.faces.push(new i.Face3(y,x,_,[w.clone(),E,M.clone()])),this.faceVertexUvs[0].push([S.clone(),T,R.clone()]))}this.computeFaceNormals(),this.boundingSphere=new i.Sphere(new i.Vector3,e)},i.SphereGeometry.prototype=Object.create(i.Geometry.prototype),i.TextGeometry=function(e,t){t=t||{};var n=i.FontUtils.generateShapes(e,t);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),i.ExtrudeGeometry.call(this,n,t)},i.TextGeometry.prototype=Object.create(i.ExtrudeGeometry.prototype),i.TorusGeometry=function(e,t,n,r,o){i.Geometry.call(this),this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:o},e=e||100,t=t||40,n=n||8,r=r||6,o=o||2*Math.PI;for(var a=new i.Vector3,s=[],c=[],l=0;n>=l;l++)for(var u=0;r>=u;u++){var h=u/r*o,p=l/n*Math.PI*2;a.x=e*Math.cos(h),a.y=e*Math.sin(h);var d=new i.Vector3;d.x=(e+t*Math.cos(p))*Math.cos(h),d.y=(e+t*Math.cos(p))*Math.sin(h),d.z=t*Math.sin(p),this.vertices.push(d),s.push(new i.Vector2(u/r,l/n)),c.push(d.clone().sub(a).normalize())}for(var l=1;n>=l;l++)for(var u=1;r>=u;u++){var f=(r+1)*l+u-1,m=(r+1)*(l-1)+u-1,v=(r+1)*(l-1)+u,g=(r+1)*l+u,y=new i.Face3(f,m,g,[c[f].clone(),c[m].clone(),c[g].clone()]);this.faces.push(y),this.faceVertexUvs[0].push([s[f].clone(),s[m].clone(),s[g].clone()]),y=new i.Face3(m,v,g,[c[m].clone(),c[v].clone(),c[g].clone()]),this.faces.push(y),this.faceVertexUvs[0].push([s[m].clone(),s[v].clone(),s[g].clone()])}this.computeFaceNormals()},i.TorusGeometry.prototype=Object.create(i.Geometry.prototype),i.TorusKnotGeometry=function(e,t,n,r,o,a,s){function c(e,t,n,r,o){var a=Math.cos(e),s=Math.sin(e),c=t/n*e,l=Math.cos(c),u=r*(2+l)*.5*a,h=r*(2+l)*s*.5,p=o*r*Math.sin(c)*.5;return new i.Vector3(u,h,p)}i.Geometry.call(this),this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,p:o,q:a,heightScale:s},e=e||100,t=t||40,n=n||64,r=r||8,o=o||2,a=a||3,s=s||1;for(var l=new Array(n),u=new i.Vector3,h=new i.Vector3,p=new i.Vector3,d=0;n>d;++d){l[d]=new Array(r);var f=d/n*2*o*Math.PI,m=c(f,a,o,e,s),v=c(f+.01,a,o,e,s);u.subVectors(v,m),h.addVectors(v,m),p.crossVectors(u,h),h.crossVectors(p,u),p.normalize(),h.normalize();for(var g=0;r>g;++g){var y=g/r*2*Math.PI,x=-t*Math.cos(y),_=t*Math.sin(y),b=new i.Vector3;b.x=m.x+x*h.x+_*p.x,b.y=m.y+x*h.y+_*p.y,b.z=m.z+x*h.z+_*p.z,l[d][g]=this.vertices.push(b)-1}}for(var d=0;n>d;++d)for(var g=0;r>g;++g){var w=(d+1)%n,E=(g+1)%r,M=l[d][g],C=l[w][g],S=l[w][E],T=l[d][E],R=new i.Vector2(d/n,g/r),D=new i.Vector2((d+1)/n,g/r),A=new i.Vector2((d+1)/n,(g+1)/r),N=new i.Vector2(d/n,(g+1)/r);this.faces.push(new i.Face3(M,C,T)),this.faceVertexUvs[0].push([R,D,N]),this.faces.push(new i.Face3(C,S,T)),this.faceVertexUvs[0].push([D.clone(),A,N.clone()])}this.computeFaceNormals(),this.computeVertexNormals()},i.TorusKnotGeometry.prototype=Object.create(i.Geometry.prototype),i.TubeGeometry=function(e,t,n,r,o){function a(e,t,n){return R.vertices.push(new i.Vector3(e,t,n))-1}i.Geometry.call(this),this.parameters={path:e,segments:t,radius:n,radialSegments:r,closed:o},t=t||64,n=n||1,r=r||8,o=o||!1;var s,c,l,u,h,p,d,f,m,v,g,y,x,_,b,w,E,M,C,S,T=[],R=this,D=t+1,A=new i.Vector3,N=new i.TubeGeometry.FrenetFrames(e,t,o),P=N.tangents,O=N.normals,L=N.binormals;for(this.tangents=P,this.normals=O,this.binormals=L,m=0;D>m;m++)for(T[m]=[],u=m/(D-1),f=e.getPointAt(u),s=P[m],c=O[m],l=L[m],v=0;r>v;v++)h=v/r*2*Math.PI,p=-n*Math.cos(h),d=n*Math.sin(h),A.copy(f),A.x+=p*c.x+d*l.x,A.y+=p*c.y+d*l.y,A.z+=p*c.z+d*l.z,T[m][v]=a(A.x,A.y,A.z);for(m=0;t>m;m++)for(v=0;r>v;v++)g=o?(m+1)%t:m+1,y=(v+1)%r,x=T[m][v],_=T[g][v],b=T[g][y],w=T[m][y],E=new i.Vector2(m/t,v/r),M=new i.Vector2((m+1)/t,v/r),C=new i.Vector2((m+1)/t,(v+1)/r),S=new i.Vector2(m/t,(v+1)/r),this.faces.push(new i.Face3(x,_,w)),this.faceVertexUvs[0].push([E,M,S]),this.faces.push(new i.Face3(_,b,w)),this.faceVertexUvs[0].push([M.clone(),C,S.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},i.TubeGeometry.prototype=Object.create(i.Geometry.prototype),i.TubeGeometry.FrenetFrames=function(e,t,n){function r(){f[0]=new i.Vector3,m[0]=new i.Vector3,a=Number.MAX_VALUE,s=Math.abs(d[0].x),c=Math.abs(d[0].y),l=Math.abs(d[0].z),a>=s&&(a=s,p.set(1,0,0)),a>=c&&(a=c,p.set(0,1,0)),a>=l&&p.set(0,0,1),v.crossVectors(d[0],p).normalize(),f[0].crossVectors(d[0],v),m[0].crossVectors(d[0],f[0])}var o,a,s,c,l,u,h,p=(new i.Vector3,new i.Vector3),d=(new i.Vector3,[]),f=[],m=[],v=new i.Vector3,g=new i.Matrix4,y=t+1,x=1e-4;for(this.tangents=d,this.normals=f,this.binormals=m,u=0;y>u;u++)h=u/(y-1),d[u]=e.getTangentAt(h),d[u].normalize();for(r(),u=1;y>u;u++)f[u]=f[u-1].clone(),m[u]=m[u-1].clone(),v.crossVectors(d[u-1],d[u]),v.length()>x&&(v.normalize(),o=Math.acos(i.Math.clamp(d[u-1].dot(d[u]),-1,1)),f[u].applyMatrix4(g.makeRotationAxis(v,o))),m[u].crossVectors(d[u],f[u]);if(n)for(o=Math.acos(i.Math.clamp(f[0].dot(f[y-1]),-1,1)),o/=y-1,d[0].dot(v.crossVectors(f[0],f[y-1]))>0&&(o=-o),u=1;y>u;u++)f[u].applyMatrix4(g.makeRotationAxis(d[u],o*u)),m[u].crossVectors(d[u],f[u])},i.PolyhedronGeometry=function(e,t,n,r){function o(e){var t=e.normalize().clone();t.index=h.vertices.push(t)-1;
var n=c(e)/2/Math.PI+.5,r=l(e)/Math.PI+.5;return t.uv=new i.Vector2(n,1-r),t}function a(e,t,n){var r=new i.Face3(e.index,t.index,n.index,[e.clone(),t.clone(),n.clone()]);h.faces.push(r),_.copy(e).add(t).add(n).divideScalar(3);var o=c(_);h.faceVertexUvs[0].push([u(e.uv,e,o),u(t.uv,t,o),u(n.uv,n,o)])}function s(e,t){for(var n=Math.pow(2,t),r=(Math.pow(4,t),o(h.vertices[e.a])),i=o(h.vertices[e.b]),s=o(h.vertices[e.c]),c=[],l=0;n>=l;l++){c[l]=[];for(var u=o(r.clone().lerp(s,l/n)),p=o(i.clone().lerp(s,l/n)),d=n-l,f=0;d>=f;f++)c[l][f]=0==f&&l==n?u:o(u.clone().lerp(p,f/d))}for(var l=0;n>l;l++)for(var f=0;2*(n-l)-1>f;f++){var m=Math.floor(f/2);f%2==0?a(c[l][m+1],c[l+1][m],c[l][m]):a(c[l][m+1],c[l+1][m+1],c[l+1][m])}}function c(e){return Math.atan2(e.z,-e.x)}function l(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}function u(e,t,n){return 0>n&&1===e.x&&(e=new i.Vector2(e.x-1,e.y)),0===t.x&&0===t.z&&(e=new i.Vector2(n/2/Math.PI+.5,e.y)),e.clone()}i.Geometry.call(this),n=n||1,r=r||0;for(var h=this,p=0,d=e.length;d>p;p+=3)o(new i.Vector3(e[p],e[p+1],e[p+2]));for(var f=this.vertices,m=[],p=0,v=0,d=t.length;d>p;p+=3,v++){var g=f[t[p]],y=f[t[p+1]],x=f[t[p+2]];m[v]=new i.Face3(g.index,y.index,x.index,[g.clone(),y.clone(),x.clone()])}for(var _=new i.Vector3,p=0,d=m.length;d>p;p++)s(m[p],r);for(var p=0,d=this.faceVertexUvs[0].length;d>p;p++){var b=this.faceVertexUvs[0][p],w=b[0].x,E=b[1].x,M=b[2].x,C=Math.max(w,Math.max(E,M)),S=Math.min(w,Math.min(E,M));C>.9&&.1>S&&(.2>w&&(b[0].x+=1),.2>E&&(b[1].x+=1),.2>M&&(b[2].x+=1))}for(var p=0,d=this.vertices.length;d>p;p++)this.vertices[p].multiplyScalar(n);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new i.Sphere(new i.Vector3,n)},i.PolyhedronGeometry.prototype=Object.create(i.Geometry.prototype),i.IcosahedronGeometry=function(e,t){this.parameters={radius:e,detail:t};var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];i.PolyhedronGeometry.call(this,r,o,e,t)},i.IcosahedronGeometry.prototype=Object.create(i.Geometry.prototype),i.OctahedronGeometry=function(e,t){this.parameters={radius:e,detail:t};var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];i.PolyhedronGeometry.call(this,n,r,e,t)},i.OctahedronGeometry.prototype=Object.create(i.Geometry.prototype),i.TetrahedronGeometry=function(e,t){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];i.PolyhedronGeometry.call(this,n,r,e,t)},i.TetrahedronGeometry.prototype=Object.create(i.Geometry.prototype),i.ParametricGeometry=function(e,t,n){i.Geometry.call(this);var r,o,a,s,c,l=this.vertices,u=this.faces,h=this.faceVertexUvs[0],p=t+1;for(r=0;n>=r;r++)for(c=r/n,o=0;t>=o;o++)s=o/t,a=e(s,c),l.push(a);var d,f,m,v,g,y,x,_;for(r=0;n>r;r++)for(o=0;t>o;o++)d=r*p+o,f=r*p+o+1,m=(r+1)*p+o+1,v=(r+1)*p+o,g=new i.Vector2(o/t,r/n),y=new i.Vector2((o+1)/t,r/n),x=new i.Vector2((o+1)/t,(r+1)/n),_=new i.Vector2(o/t,(r+1)/n),u.push(new i.Face3(d,f,v)),h.push([g,y,_]),u.push(new i.Face3(f,m,v)),h.push([y.clone(),x,_.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},i.ParametricGeometry.prototype=Object.create(i.Geometry.prototype),i.AxisHelper=function(e){e=e||1;var t=new Float32Array([0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e]),n=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),r=new i.BufferGeometry;r.addAttribute("position",new i.BufferAttribute(t,3)),r.addAttribute("color",new i.BufferAttribute(n,3));var o=new i.LineBasicMaterial({vertexColors:i.VertexColors});i.Line.call(this,r,o,i.LinePieces)},i.AxisHelper.prototype=Object.create(i.Line.prototype),i.ArrowHelper=function(){var e=new i.Geometry;e.vertices.push(new i.Vector3(0,0,0),new i.Vector3(0,1,0));var t=new i.CylinderGeometry(0,.5,1,5,1);return t.applyMatrix((new i.Matrix4).makeTranslation(0,-.5,0)),function(n,r,o,a,s,c){i.Object3D.call(this),void 0===a&&(a=16776960),void 0===o&&(o=1),void 0===s&&(s=.2*o),void 0===c&&(c=.2*s),this.position.copy(r),this.line=new i.Line(e,new i.LineBasicMaterial({color:a})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new i.Mesh(t,new i.MeshBasicMaterial({color:a})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(n),this.setLength(o,s,c)}}(),i.ArrowHelper.prototype=Object.create(i.Object3D.prototype),i.ArrowHelper.prototype.setDirection=function(){var e,t=new i.Vector3;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(n.z,0,-n.x).normalize(),e=Math.acos(n.y),this.quaternion.setFromAxisAngle(t,e))}}(),i.ArrowHelper.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,e,1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},i.ArrowHelper.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},i.BoxHelper=function(e){var t=new i.BufferGeometry;t.addAttribute("position",new i.BufferAttribute(new Float32Array(72),3)),i.Line.call(this,t,new i.LineBasicMaterial({color:16776960}),i.LinePieces),void 0!==e&&this.update(e)},i.BoxHelper.prototype=Object.create(i.Line.prototype),i.BoxHelper.prototype.update=function(e){var t=e.geometry;null===t.boundingBox&&t.computeBoundingBox();var n=t.boundingBox.min,r=t.boundingBox.max,i=this.geometry.attributes.position.array;i[0]=r.x,i[1]=r.y,i[2]=r.z,i[3]=n.x,i[4]=r.y,i[5]=r.z,i[6]=n.x,i[7]=r.y,i[8]=r.z,i[9]=n.x,i[10]=n.y,i[11]=r.z,i[12]=n.x,i[13]=n.y,i[14]=r.z,i[15]=r.x,i[16]=n.y,i[17]=r.z,i[18]=r.x,i[19]=n.y,i[20]=r.z,i[21]=r.x,i[22]=r.y,i[23]=r.z,i[24]=r.x,i[25]=r.y,i[26]=n.z,i[27]=n.x,i[28]=r.y,i[29]=n.z,i[30]=n.x,i[31]=r.y,i[32]=n.z,i[33]=n.x,i[34]=n.y,i[35]=n.z,i[36]=n.x,i[37]=n.y,i[38]=n.z,i[39]=r.x,i[40]=n.y,i[41]=n.z,i[42]=r.x,i[43]=n.y,i[44]=n.z,i[45]=r.x,i[46]=r.y,i[47]=n.z,i[48]=r.x,i[49]=r.y,i[50]=r.z,i[51]=r.x,i[52]=r.y,i[53]=n.z,i[54]=n.x,i[55]=r.y,i[56]=r.z,i[57]=n.x,i[58]=r.y,i[59]=n.z,i[60]=n.x,i[61]=n.y,i[62]=r.z,i[63]=n.x,i[64]=n.y,i[65]=n.z,i[66]=r.x,i[67]=n.y,i[68]=r.z,i[69]=r.x,i[70]=n.y,i[71]=n.z,this.geometry.attributes.position.needsUpdate=!0,this.geometry.computeBoundingSphere(),this.matrixAutoUpdate=!1,this.matrixWorld=e.matrixWorld},i.BoundingBoxHelper=function(e,t){var n=void 0!==t?t:8947848;this.object=e,this.box=new i.Box3,i.Mesh.call(this,new i.BoxGeometry(1,1,1),new i.MeshBasicMaterial({color:n,wireframe:!0}))},i.BoundingBoxHelper.prototype=Object.create(i.Mesh.prototype),i.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},i.CameraHelper=function(e){function t(e,t,r){n(e,r),n(t,r)}function n(e,t){r.vertices.push(new i.Vector3),r.colors.push(new i.Color(t)),void 0===a[e]&&(a[e]=[]),a[e].push(r.vertices.length-1)}var r=new i.Geometry,o=new i.LineBasicMaterial({color:16777215,vertexColors:i.FaceColors}),a={},s=16755200,c=16711680,l=43775,u=16777215,h=3355443;t("n1","n2",s),t("n2","n4",s),t("n4","n3",s),t("n3","n1",s),t("f1","f2",s),t("f2","f4",s),t("f4","f3",s),t("f3","f1",s),t("n1","f1",s),t("n2","f2",s),t("n3","f3",s),t("n4","f4",s),t("p","n1",c),t("p","n2",c),t("p","n3",c),t("p","n4",c),t("u1","u2",l),t("u2","u3",l),t("u3","u1",l),t("c","t",u),t("p","c",h),t("cn1","cn2",h),t("cn3","cn4",h),t("cf1","cf2",h),t("cf3","cf4",h),i.Line.call(this,r,o,i.LinePieces),this.camera=e,this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()},i.CameraHelper.prototype=Object.create(i.Line.prototype),i.CameraHelper.prototype.update=function(){var e=new i.Vector3,t=new i.Camera,n=new i.Projector;return function(){function r(r,o,a,s){e.set(o,a,s),n.unprojectVector(e,t);var c=i.pointMap[r];if(void 0!==c)for(var l=0,u=c.length;u>l;l++)i.geometry.vertices[c[l]].copy(e)}var i=this,o=1,a=1;t.projectionMatrix.copy(this.camera.projectionMatrix),r("c",0,0,-1),r("t",0,0,1),r("n1",-o,-a,-1),r("n2",o,-a,-1),r("n3",-o,a,-1),r("n4",o,a,-1),r("f1",-o,-a,1),r("f2",o,-a,1),r("f3",-o,a,1),r("f4",o,a,1),r("u1",.7*o,1.1*a,-1),r("u2",.7*-o,1.1*a,-1),r("u3",0,2*a,-1),r("cf1",-o,0,1),r("cf2",o,0,1),r("cf3",0,-a,1),r("cf4",0,a,1),r("cn1",-o,0,-1),r("cn2",o,0,-1),r("cn3",0,-a,-1),r("cn4",0,a,-1),this.geometry.verticesNeedUpdate=!0}}(),i.DirectionalLightHelper=function(e,t){i.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1,t=t||1;var n=new i.Geometry;n.vertices.push(new i.Vector3(-t,t,0),new i.Vector3(t,t,0),new i.Vector3(t,-t,0),new i.Vector3(-t,-t,0),new i.Vector3(-t,t,0));var r=new i.LineBasicMaterial({fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new i.Line(n,r),this.add(this.lightPlane),n=new i.Geometry,n.vertices.push(new i.Vector3,new i.Vector3),r=new i.LineBasicMaterial({fog:!1}),r.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new i.Line(n,r),this.add(this.targetLine),this.update()},i.DirectionalLightHelper.prototype=Object.create(i.Object3D.prototype),i.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},i.DirectionalLightHelper.prototype.update=function(){var e=new i.Vector3,t=new i.Vector3,n=new i.Vector3;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(n),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),i.EdgesHelper=function(e,t){var n=void 0!==t?t:16777215,r=[0,0],o={},a=function(e,t){return e-t},s=["a","b","c"],c=new i.BufferGeometry,l=e.geometry.clone();l.mergeVertices(),l.computeFaceNormals();for(var u=l.vertices,h=l.faces,p=0,d=0,f=h.length;f>d;d++)for(var m=h[d],v=0;3>v;v++){r[0]=m[s[v]],r[1]=m[s[(v+1)%3]],r.sort(a);var g=r.toString();void 0===o[g]?(o[g]={vert1:r[0],vert2:r[1],face1:d,face2:void 0},p++):o[g].face2=d}c.addAttribute("position",new i.Float32Attribute(2*p*3,3));var y=c.attributes.position.array,x=0;for(var g in o){var _=o[g];if(void 0===_.face2||h[_.face1].normal.dot(h[_.face2].normal)<.9999){var b=u[_.vert1];y[x++]=b.x,y[x++]=b.y,y[x++]=b.z,b=u[_.vert2],y[x++]=b.x,y[x++]=b.y,y[x++]=b.z}}i.Line.call(this,c,new i.LineBasicMaterial({color:n}),i.LinePieces),this.matrixAutoUpdate=!1,this.matrixWorld=e.matrixWorld},i.EdgesHelper.prototype=Object.create(i.Line.prototype),i.FaceNormalsHelper=function(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;for(var o=void 0!==n?n:16776960,a=void 0!==r?r:1,s=new i.Geometry,c=this.object.geometry.faces,l=0,u=c.length;u>l;l++)s.vertices.push(new i.Vector3,new i.Vector3);i.Line.call(this,s,new i.LineBasicMaterial({color:o,linewidth:a}),i.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new i.Matrix3,this.update()},i.FaceNormalsHelper.prototype=Object.create(i.Line.prototype),i.FaceNormalsHelper.prototype.update=function(){var e=this.geometry.vertices,t=this.object,n=t.geometry.vertices,r=t.geometry.faces,i=t.matrixWorld;t.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(i);for(var o=0,a=0,s=r.length;s>o;o++,a+=2){var c=r[o];e[a].copy(n[c.a]).add(n[c.b]).add(n[c.c]).divideScalar(3).applyMatrix4(i),e[a+1].copy(c.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(e[a])}return this.geometry.verticesNeedUpdate=!0,this},i.GridHelper=function(e,t){var n=new i.Geometry,r=new i.LineBasicMaterial({vertexColors:i.VertexColors});this.color1=new i.Color(4473924),this.color2=new i.Color(8947848);for(var o=-e;e>=o;o+=t){n.vertices.push(new i.Vector3(-e,0,o),new i.Vector3(e,0,o),new i.Vector3(o,0,-e),new i.Vector3(o,0,e));var a=0===o?this.color1:this.color2;n.colors.push(a,a,a,a)}i.Line.call(this,n,r,i.LinePieces)},i.GridHelper.prototype=Object.create(i.Line.prototype),i.GridHelper.prototype.setColors=function(e,t){this.color1.set(e),this.color2.set(t),this.geometry.colorsNeedUpdate=!0},i.HemisphereLightHelper=function(e,t){i.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new i.Color,new i.Color];var n=new i.SphereGeometry(t,4,2);n.applyMatrix((new i.Matrix4).makeRotationX(-Math.PI/2));for(var r=0,o=8;o>r;r++)n.faces[r].color=this.colors[4>r?0:1];var a=new i.MeshBasicMaterial({vertexColors:i.FaceColors,wireframe:!0});this.lightSphere=new i.Mesh(n,a),this.add(this.lightSphere),this.update()},i.HemisphereLightHelper.prototype=Object.create(i.Object3D.prototype),i.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},i.HemisphereLightHelper.prototype.update=function(){var e=new i.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),i.PointLightHelper=function(e,t){this.light=e,this.light.updateMatrixWorld();var n=new i.SphereGeometry(t,4,2),r=new i.MeshBasicMaterial({wireframe:!0,fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),i.Mesh.call(this,n,r),this.matrixWorld=this.light.matrixWorld,this.matrixAutoUpdate=!1},i.PointLightHelper.prototype=Object.create(i.Mesh.prototype),i.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},i.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},i.SkeletonHelper=function(e){this.bones=this.getBoneList(e);for(var t=new i.Geometry,n=0;n<this.bones.length;n++){var r=this.bones[n];r.parent instanceof i.Bone&&(t.vertices.push(new i.Vector3),t.vertices.push(new i.Vector3),t.colors.push(new i.Color(0,0,1)),t.colors.push(new i.Color(0,1,0)))}var o=new i.LineBasicMaterial({vertexColors:i.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});i.Line.call(this,t,o,i.LinePieces),this.root=e,this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()},i.SkeletonHelper.prototype=Object.create(i.Line.prototype),i.SkeletonHelper.prototype.getBoneList=function(e){var t=[];e instanceof i.Bone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,this.getBoneList(e.children[n]));return t},i.SkeletonHelper.prototype.update=function(){for(var e=this.geometry,t=(new i.Matrix4).getInverse(this.root.matrixWorld),n=new i.Matrix4,r=0,o=0;o<this.bones.length;o++){var a=this.bones[o];a.parent instanceof i.Bone&&(n.multiplyMatrices(t,a.matrixWorld),e.vertices[r].setFromMatrixPosition(n),n.multiplyMatrices(t,a.parent.matrixWorld),e.vertices[r+1].setFromMatrixPosition(n),r+=2)}e.verticesNeedUpdate=!0,e.computeBoundingSphere()},i.SpotLightHelper=function(e){i.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1;var t=new i.CylinderGeometry(0,1,1,8,1,!0);t.applyMatrix((new i.Matrix4).makeTranslation(0,-.5,0)),t.applyMatrix((new i.Matrix4).makeRotationX(-Math.PI/2));var n=new i.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new i.Mesh(t,n),this.add(this.cone),this.update()},i.SpotLightHelper.prototype=Object.create(i.Object3D.prototype),i.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},i.SpotLightHelper.prototype.update=function(){var e=new i.Vector3,t=new i.Vector3;return function(){var n=this.light.distance?this.light.distance:1e4,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),i.VertexNormalsHelper=function(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;for(var o=void 0!==n?n:16711680,a=void 0!==r?r:1,s=new i.Geometry,c=(e.geometry.vertices,e.geometry.faces),l=0,u=c.length;u>l;l++)for(var h=c[l],p=0,d=h.vertexNormals.length;d>p;p++)s.vertices.push(new i.Vector3,new i.Vector3);i.Line.call(this,s,new i.LineBasicMaterial({color:o,linewidth:a}),i.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new i.Matrix3,this.update()},i.VertexNormalsHelper.prototype=Object.create(i.Line.prototype),i.VertexNormalsHelper.prototype.update=function(){var e=new i.Vector3;return function(){var t=["a","b","c","d"];this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var n=this.geometry.vertices,r=this.object.geometry.vertices,i=this.object.geometry.faces,o=this.object.matrixWorld,a=0,s=0,c=i.length;c>s;s++)for(var l=i[s],u=0,h=l.vertexNormals.length;h>u;u++){var p=l[t[u]],d=r[p],f=l.vertexNormals[u];n[a].copy(d).applyMatrix4(o),e.copy(f).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size),e.add(n[a]),a+=1,n[a].copy(e),a+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),i.VertexTangentsHelper=function(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;for(var o=void 0!==n?n:255,a=void 0!==r?r:1,s=new i.Geometry,c=(e.geometry.vertices,e.geometry.faces),l=0,u=c.length;u>l;l++)for(var h=c[l],p=0,d=h.vertexTangents.length;d>p;p++)s.vertices.push(new i.Vector3),s.vertices.push(new i.Vector3);i.Line.call(this,s,new i.LineBasicMaterial({color:o,linewidth:a}),i.LinePieces),this.matrixAutoUpdate=!1,this.update()},i.VertexTangentsHelper.prototype=Object.create(i.Line.prototype),i.VertexTangentsHelper.prototype.update=function(){var e=new i.Vector3;return function(){var t=["a","b","c","d"];this.object.updateMatrixWorld(!0);for(var n=this.geometry.vertices,r=this.object.geometry.vertices,i=this.object.geometry.faces,o=this.object.matrixWorld,a=0,s=0,c=i.length;c>s;s++)for(var l=i[s],u=0,h=l.vertexTangents.length;h>u;u++){var p=l[t[u]],d=r[p],f=l.vertexTangents[u];n[a].copy(d).applyMatrix4(o),e.copy(f).transformDirection(o).multiplyScalar(this.size),e.add(n[a]),a+=1,n[a].copy(e),a+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),i.WireframeHelper=function(e,t){var n=void 0!==t?t:16777215,r=[0,0],o={},a=function(e,t){return e-t},s=["a","b","c"],c=new i.BufferGeometry;if(e.geometry instanceof i.Geometry){for(var l=e.geometry.vertices,u=e.geometry.faces,h=0,p=new Uint32Array(6*u.length),d=0,f=u.length;f>d;d++)for(var m=u[d],v=0;3>v;v++){r[0]=m[s[v]],r[1]=m[s[(v+1)%3]],r.sort(a);var g=r.toString();void 0===o[g]&&(p[2*h]=r[0],p[2*h+1]=r[1],o[g]=!0,h++)}for(var y=new Float32Array(2*h*3),d=0,f=h;f>d;d++)for(var v=0;2>v;v++){var x=l[p[2*d+v]],_=6*d+3*v;y[_+0]=x.x,y[_+1]=x.y,y[_+2]=x.z}c.addAttribute("position",new i.BufferAttribute(y,3))}else if(e.geometry instanceof i.BufferGeometry)if(void 0!==e.geometry.attributes.index){for(var l=e.geometry.attributes.position.array,b=e.geometry.attributes.index.array,w=e.geometry.offsets,h=0,p=new Uint32Array(2*b.length),E=0,M=w.length;M>E;++E)for(var C=w[E].start,S=w[E].count,_=w[E].index,d=C,T=C+S;T>d;d+=3)for(var v=0;3>v;v++){r[0]=_+b[d+v],r[1]=_+b[d+(v+1)%3],r.sort(a);var g=r.toString();void 0===o[g]&&(p[2*h]=r[0],p[2*h+1]=r[1],o[g]=!0,h++)}for(var y=new Float32Array(2*h*3),d=0,f=h;f>d;d++)for(var v=0;2>v;v++){var _=6*d+3*v,R=3*p[2*d+v];y[_+0]=l[R],y[_+1]=l[R+1],y[_+2]=l[R+2]}c.addAttribute("position",new i.BufferAttribute(y,3))}else{for(var l=e.geometry.attributes.position.array,h=l.length/3,D=h/3,y=new Float32Array(2*h*3),d=0,f=D;f>d;d++)for(var v=0;3>v;v++){var _=18*d+6*v,A=9*d+3*v;y[_+0]=l[A],y[_+1]=l[A+1],y[_+2]=l[A+2];var R=9*d+3*((v+1)%3);y[_+3]=l[R],y[_+4]=l[R+1],y[_+5]=l[R+2]}c.addAttribute("position",new i.BufferAttribute(y,3))}i.Line.call(this,c,new i.LineBasicMaterial({color:n}),i.LinePieces),this.matrixAutoUpdate=!1,this.matrixWorld=e.matrixWorld},i.WireframeHelper.prototype=Object.create(i.Line.prototype),i.ImmediateRenderObject=function(){i.Object3D.call(this),this.render=function(){}},i.ImmediateRenderObject.prototype=Object.create(i.Object3D.prototype),i.LensFlare=function(e,t,n,r,o){i.Object3D.call(this),this.lensFlares=[],this.positionScreen=new i.Vector3,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,n,r,o)},i.LensFlare.prototype=Object.create(i.Object3D.prototype),i.LensFlare.prototype.add=function(e,t,n,r,o,a){void 0===t&&(t=-1),void 0===n&&(n=0),void 0===a&&(a=1),void 0===o&&(o=new i.Color(16777215)),void 0===r&&(r=i.NormalBlending),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:e,size:t,distance:n,x:0,y:0,z:0,scale:1,rotation:1,opacity:a,color:o,blending:r})},i.LensFlare.prototype.updateLensFlares=function(){var e,t,n=this.lensFlares.length,r=2*-this.positionScreen.x,i=2*-this.positionScreen.y;for(e=0;n>e;e++)t=this.lensFlares[e],t.x=this.positionScreen.x+r*t.distance,t.y=this.positionScreen.y+i*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)},i.MorphBlendMesh=function(e,t){i.Mesh.call(this,e,t),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length,r="__default",o=0,a=n-1,s=n/1;this.createAnimation(r,o,a,s),this.setAnimationWeight(r,1)},i.MorphBlendMesh.prototype=Object.create(i.Mesh.prototype),i.MorphBlendMesh.prototype.createAnimation=function(e,t,n,r){var i={startFrame:t,endFrame:n,length:n-t+1,fps:r,duration:(n-t)/r,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=i,this.animationsList.push(i)},i.MorphBlendMesh.prototype.autoCreateAnimations=function(e){for(var t,n=/([a-z]+)_?(\d+)/,r={},i=this.geometry,o=0,a=i.morphTargets.length;a>o;o++){var s=i.morphTargets[o],c=s.name.match(n);if(c&&c.length>1){{var l=c[1];c[2]}r[l]||(r[l]={start:1/0,end:-1/0});var u=r[l];o<u.start&&(u.start=o),o>u.end&&(u.end=o),t||(t=l)}}for(var l in r){var u=r[l];this.createAnimation(l,u.start,u.end,e)}this.firstAnimation=t},i.MorphBlendMesh.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},i.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},i.MorphBlendMesh.prototype.setAnimationFPS=function(e,t){var n=this.animationsMap[e];n&&(n.fps=t,n.duration=(n.end-n.start)/n.fps)},i.MorphBlendMesh.prototype.setAnimationDuration=function(e,t){var n=this.animationsMap[e];n&&(n.duration=t,n.fps=(n.end-n.start)/n.duration)},i.MorphBlendMesh.prototype.setAnimationWeight=function(e,t){var n=this.animationsMap[e];n&&(n.weight=t)},i.MorphBlendMesh.prototype.setAnimationTime=function(e,t){var n=this.animationsMap[e];n&&(n.time=t)},i.MorphBlendMesh.prototype.getAnimationTime=function(e){var t=0,n=this.animationsMap[e];return n&&(t=n.time),t},i.MorphBlendMesh.prototype.getAnimationDuration=function(e){var t=-1,n=this.animationsMap[e];return n&&(t=n.duration),t},i.MorphBlendMesh.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("animation["+e+"] undefined")},i.MorphBlendMesh.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},i.MorphBlendMesh.prototype.update=function(e){for(var t=0,n=this.animationsList.length;n>t;t++){var r=this.animationsList[t];if(r.active){var o=r.duration/r.length;r.time+=r.direction*e,r.mirroredLoop?(r.time>r.duration||r.time<0)&&(r.direction*=-1,r.time>r.duration&&(r.time=r.duration,r.directionBackwards=!0),r.time<0&&(r.time=0,r.directionBackwards=!1)):(r.time=r.time%r.duration,r.time<0&&(r.time+=r.duration));var a=r.startFrame+i.Math.clamp(Math.floor(r.time/o),0,r.length-1),s=r.weight;a!==r.currentFrame&&(this.morphTargetInfluences[r.lastFrame]=0,this.morphTargetInfluences[r.currentFrame]=1*s,this.morphTargetInfluences[a]=0,r.lastFrame=r.currentFrame,r.currentFrame=a);var c=r.time%o/o;r.directionBackwards&&(c=1-c),this.morphTargetInfluences[r.currentFrame]=c*s,this.morphTargetInfluences[r.lastFrame]=(1-c)*s}}},i.LensFlarePlugin=function(){function e(e,n){var r=t.createProgram(),i=t.createShader(t.FRAGMENT_SHADER),o=t.createShader(t.VERTEX_SHADER),a="precision "+n+" float;\n";return t.shaderSource(i,a+e.fragmentShader),t.shaderSource(o,a+e.vertexShader),t.compileShader(i),t.compileShader(o),t.attachShader(r,i),t.attachShader(r,o),t.linkProgram(r),r}var t,n,r,o=[],a={};this.init=function(o){t=o.context,n=o,r=o.getPrecision(),a.vertices=new Float32Array(16),a.faces=new Uint16Array(6);var s=0;a.vertices[s++]=-1,a.vertices[s++]=-1,a.vertices[s++]=0,a.vertices[s++]=0,a.vertices[s++]=1,a.vertices[s++]=-1,a.vertices[s++]=1,a.vertices[s++]=0,a.vertices[s++]=1,a.vertices[s++]=1,a.vertices[s++]=1,a.vertices[s++]=1,a.vertices[s++]=-1,a.vertices[s++]=1,a.vertices[s++]=0,a.vertices[s++]=1,s=0,a.faces[s++]=0,a.faces[s++]=1,a.faces[s++]=2,a.faces[s++]=0,a.faces[s++]=2,a.faces[s++]=3,a.vertexBuffer=t.createBuffer(),a.elementBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,a.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,a.vertices,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a.elementBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,a.faces,t.STATIC_DRAW),a.tempTexture=t.createTexture(),a.occlusionTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,a.tempTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGB,16,16,0,t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.bindTexture(t.TEXTURE_2D,a.occlusionTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,16,16,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)<=0?(a.hasVertexTexture=!1,a.program=e(i.ShaderFlares.lensFlare,r)):(a.hasVertexTexture=!0,a.program=e(i.ShaderFlares.lensFlareVertexTexture,r)),a.attributes={},a.uniforms={},a.attributes.vertex=t.getAttribLocation(a.program,"position"),a.attributes.uv=t.getAttribLocation(a.program,"uv"),a.uniforms.renderType=t.getUniformLocation(a.program,"renderType"),a.uniforms.map=t.getUniformLocation(a.program,"map"),a.uniforms.occlusionMap=t.getUniformLocation(a.program,"occlusionMap"),a.uniforms.opacity=t.getUniformLocation(a.program,"opacity"),a.uniforms.color=t.getUniformLocation(a.program,"color"),a.uniforms.scale=t.getUniformLocation(a.program,"scale"),a.uniforms.rotation=t.getUniformLocation(a.program,"rotation"),a.uniforms.screenPosition=t.getUniformLocation(a.program,"screenPosition")},this.render=function(e,r,s,c){if(o.length=0,e.traverseVisible(function(e){e instanceof i.LensFlare&&o.push(e)}),0!==o.length){var l=new i.Vector3,u=c/s,h=.5*s,p=.5*c,d=16/c,f=new i.Vector2(d*u,d),m=new i.Vector3(1,1,0),v=new i.Vector2(1,1),g=a.uniforms,y=a.attributes;t.useProgram(a.program),t.enableVertexAttribArray(a.attributes.vertex),t.enableVertexAttribArray(a.attributes.uv),t.uniform1i(g.occlusionMap,0),t.uniform1i(g.map,1),t.bindBuffer(t.ARRAY_BUFFER,a.vertexBuffer),t.vertexAttribPointer(y.vertex,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(y.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a.elementBuffer),t.disable(t.CULL_FACE),t.depthMask(!1);for(var x=0,_=o.length;_>x;x++){d=16/c,f.set(d*u,d);var b=o[x];if(l.set(b.matrixWorld.elements[12],b.matrixWorld.elements[13],b.matrixWorld.elements[14]),l.applyMatrix4(r.matrixWorldInverse),l.applyProjection(r.projectionMatrix),m.copy(l),v.x=m.x*h+h,v.y=m.y*p+p,a.hasVertexTexture||v.x>0&&v.x<s&&v.y>0&&v.y<c){t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,a.tempTexture),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGB,v.x-8,v.y-8,16,16,0),t.uniform1i(g.renderType,0),t.uniform2f(g.scale,f.x,f.y),t.uniform3f(g.screenPosition,m.x,m.y,m.z),t.disable(t.BLEND),t.enable(t.DEPTH_TEST),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,a.occlusionTexture),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,v.x-8,v.y-8,16,16,0),t.uniform1i(g.renderType,1),t.disable(t.DEPTH_TEST),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,a.tempTexture),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),b.positionScreen.copy(m),b.customUpdateCallback?b.customUpdateCallback(b):b.updateLensFlares(),t.uniform1i(g.renderType,2),t.enable(t.BLEND);for(var w=0,E=b.lensFlares.length;E>w;w++){var M=b.lensFlares[w];M.opacity>.001&&M.scale>.001&&(m.x=M.x,m.y=M.y,m.z=M.z,d=M.size*M.scale/c,f.x=d*u,f.y=d,t.uniform3f(g.screenPosition,m.x,m.y,m.z),t.uniform2f(g.scale,f.x,f.y),t.uniform1f(g.rotation,M.rotation),t.uniform1f(g.opacity,M.opacity),t.uniform3f(g.color,M.color.r,M.color.g,M.color.b),n.setBlending(M.blending,M.blendEquation,M.blendSrc,M.blendDst),n.setTexture(M.texture,1),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}}}t.enable(t.CULL_FACE),t.enable(t.DEPTH_TEST),t.depthMask(!0)}}},i.ShadowMapPlugin=function(){function e(t,n,r){if(n.visible){var i=t.__webglObjects[n.id];if(i&&n.castShadow&&(n.frustumCulled===!1||p.intersectsObject(n)===!0))for(var o=0,a=i.length;a>o;o++){var s=i[o];n._modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,n.matrixWorld),g.push(s)}for(var o=0,a=n.children.length;a>o;o++)e(t,n.children[o],r)}}function t(e,t){var n=new i.DirectionalLight;n.isVirtual=!0,n.onlyShadow=!0,n.castShadow=!0,n.shadowCameraNear=e.shadowCameraNear,n.shadowCameraFar=e.shadowCameraFar,n.shadowCameraLeft=e.shadowCameraLeft,n.shadowCameraRight=e.shadowCameraRight,n.shadowCameraBottom=e.shadowCameraBottom,n.shadowCameraTop=e.shadowCameraTop,n.shadowCameraVisible=e.shadowCameraVisible,n.shadowDarkness=e.shadowDarkness,n.shadowBias=e.shadowCascadeBias[t],n.shadowMapWidth=e.shadowCascadeWidth[t],n.shadowMapHeight=e.shadowCascadeHeight[t],n.pointsWorld=[],n.pointsFrustum=[];for(var r=n.pointsWorld,o=n.pointsFrustum,a=0;8>a;a++)r[a]=new i.Vector3,o[a]=new i.Vector3;var s=e.shadowCascadeNearZ[t],c=e.shadowCascadeFarZ[t];return o[0].set(-1,-1,s),o[1].set(1,-1,s),o[2].set(-1,1,s),o[3].set(1,1,s),o[4].set(-1,-1,c),o[5].set(1,-1,c),o[6].set(-1,1,c),o[7].set(1,1,c),n}function n(e,t){var n=e.shadowCascadeArray[t];n.position.copy(e.position),n.target.position.copy(e.target.position),n.lookAt(n.target),n.shadowCameraVisible=e.shadowCameraVisible,n.shadowDarkness=e.shadowDarkness,n.shadowBias=e.shadowCascadeBias[t];var r=e.shadowCascadeNearZ[t],i=e.shadowCascadeFarZ[t],o=n.pointsFrustum;o[0].z=r,o[1].z=r,o[2].z=r,o[3].z=r,o[4].z=i,o[5].z=i,o[6].z=i,o[7].z=i}function r(e,t){var n=t.shadowCamera,r=t.pointsFrustum,o=t.pointsWorld;f.set(1/0,1/0,1/0),m.set(-1/0,-1/0,-1/0);for(var a=0;8>a;a++){var s=o[a];s.copy(r[a]),i.ShadowMapPlugin.__projector.unprojectVector(s,e),s.applyMatrix4(n.matrixWorldInverse),s.x<f.x&&(f.x=s.x),s.x>m.x&&(m.x=s.x),s.y<f.y&&(f.y=s.y),s.y>m.y&&(m.y=s.y),s.z<f.z&&(f.z=s.z),s.z>m.z&&(m.z=s.z)}n.left=f.x,n.right=m.x,n.top=m.y,n.bottom=f.y,n.updateProjectionMatrix()}function o(e){return e.material instanceof i.MeshFaceMaterial?e.material.materials[0]:e.material}var a,s,c,l,u,h,p=new i.Frustum,d=new i.Matrix4,f=new i.Vector3,m=new i.Vector3,v=new i.Vector3,g=[];this.init=function(e){a=e.context,s=e;var t=i.ShaderLib.depthRGBA,n=i.UniformsUtils.clone(t.uniforms);c=new i.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:n}),l=new i.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:n,morphTargets:!0}),u=new i.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:n,skinning:!0}),h=new i.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:n,morphTargets:!0,skinning:!0}),c._shadowPass=!0,l._shadowPass=!0,u._shadowPass=!0,h._shadowPass=!0
},this.render=function(e,t){s.shadowMapEnabled&&s.shadowMapAutoUpdate&&this.update(e,t)},this.update=function(f,m){var y,x,_,b,w,E,M,C,S,T,R,D,A,N=[],P=0,O=null;for(a.clearColor(1,1,1,1),a.disable(a.BLEND),a.enable(a.CULL_FACE),a.frontFace(a.CCW),a.cullFace(s.shadowMapCullFace===i.CullFaceFront?a.FRONT:a.BACK),s.setDepthTest(!0),y=0,x=f.__lights.length;x>y;y++)if(A=f.__lights[y],A.castShadow)if(A instanceof i.DirectionalLight&&A.shadowCascade)for(w=0;w<A.shadowCascadeCount;w++){var L;if(A.shadowCascadeArray[w])L=A.shadowCascadeArray[w];else{L=t(A,w),L.originalCamera=m;var U=new i.Gyroscope;U.position.copy(A.shadowCascadeOffset),U.add(L),U.add(L.target),m.add(U),A.shadowCascadeArray[w]=L,console.log("Created virtualLight",L)}n(A,w),N[P]=L,P++}else N[P]=A,P++;for(y=0,x=N.length;x>y;y++){if(A=N[y],!A.shadowMap){var V=i.LinearFilter;s.shadowMapType===i.PCFSoftShadowMap&&(V=i.NearestFilter);var k={minFilter:V,magFilter:V,format:i.RGBAFormat};A.shadowMap=new i.WebGLRenderTarget(A.shadowMapWidth,A.shadowMapHeight,k),A.shadowMapSize=new i.Vector2(A.shadowMapWidth,A.shadowMapHeight),A.shadowMatrix=new i.Matrix4}if(!A.shadowCamera){if(A instanceof i.SpotLight)A.shadowCamera=new i.PerspectiveCamera(A.shadowCameraFov,A.shadowMapWidth/A.shadowMapHeight,A.shadowCameraNear,A.shadowCameraFar);else{if(!(A instanceof i.DirectionalLight)){console.error("Unsupported light type for shadow");continue}A.shadowCamera=new i.OrthographicCamera(A.shadowCameraLeft,A.shadowCameraRight,A.shadowCameraTop,A.shadowCameraBottom,A.shadowCameraNear,A.shadowCameraFar)}f.add(A.shadowCamera),f.autoUpdate===!0&&f.updateMatrixWorld()}A.shadowCameraVisible&&!A.cameraHelper&&(A.cameraHelper=new i.CameraHelper(A.shadowCamera),A.shadowCamera.add(A.cameraHelper)),A.isVirtual&&L.originalCamera==m&&r(m,A),E=A.shadowMap,M=A.shadowMatrix,C=A.shadowCamera,C.position.setFromMatrixPosition(A.matrixWorld),v.setFromMatrixPosition(A.target.matrixWorld),C.lookAt(v),C.updateMatrixWorld(),C.matrixWorldInverse.getInverse(C.matrixWorld),A.cameraHelper&&(A.cameraHelper.visible=A.shadowCameraVisible),A.shadowCameraVisible&&A.cameraHelper.update(),M.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),M.multiply(C.projectionMatrix),M.multiply(C.matrixWorldInverse),d.multiplyMatrices(C.projectionMatrix,C.matrixWorldInverse),p.setFromMatrix(d),s.setRenderTarget(E),s.clear(),g.length=0,e(f,f,C);var F,I,B;for(_=0,b=g.length;b>_;_++)R=g[_],D=R.object,S=R.buffer,F=o(D),I=void 0!==D.geometry.morphTargets&&D.geometry.morphTargets.length>0&&F.morphTargets,B=D instanceof i.SkinnedMesh&&F.skinning,T=D.customDepthMaterial?D.customDepthMaterial:B?I?h:u:I?l:c,s.setMaterialFaces(F),S instanceof i.BufferGeometry?s.renderBufferDirect(C,f.__lights,O,T,S,D):s.renderBuffer(C,f.__lights,O,T,S,D);var z=f.__webglObjectsImmediate;for(_=0,b=z.length;b>_;_++)R=z[_],D=R.object,D.visible&&D.castShadow&&(D._modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,D.matrixWorld),s.renderImmediateObject(C,f.__lights,O,c,D))}var H=s.getClearColor(),j=s.getClearAlpha();a.clearColor(H.r,H.g,H.b,j),a.enable(a.BLEND),s.shadowMapCullFace===i.CullFaceFront&&a.cullFace(a.BACK)}},i.ShadowMapPlugin.__projector=new i.Projector,i.SpritePlugin=function(){function e(){var e=n.createProgram(),t=n.createShader(n.VERTEX_SHADER),i=n.createShader(n.FRAGMENT_SHADER);return n.shaderSource(t,["precision "+r.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),n.shaderSource(i,["precision "+r.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),n.compileShader(t),n.compileShader(i),n.attachShader(e,t),n.attachShader(e,i),n.linkProgram(e),e}function t(e,t){return e.z!==t.z?t.z-e.z:t.id-e.id}var n,r,o,a,s,c,l,u,h,p,d=[];this.init=function(t){n=t.context,r=t,a=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),s=new Uint16Array([0,1,2,0,2,3]),c=n.createBuffer(),l=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,c),n.bufferData(n.ARRAY_BUFFER,a,n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,l),n.bufferData(n.ELEMENT_ARRAY_BUFFER,s,n.STATIC_DRAW),u=e(),h={position:n.getAttribLocation(u,"position"),uv:n.getAttribLocation(u,"uv")},p={uvOffset:n.getUniformLocation(u,"uvOffset"),uvScale:n.getUniformLocation(u,"uvScale"),rotation:n.getUniformLocation(u,"rotation"),scale:n.getUniformLocation(u,"scale"),color:n.getUniformLocation(u,"color"),map:n.getUniformLocation(u,"map"),opacity:n.getUniformLocation(u,"opacity"),modelViewMatrix:n.getUniformLocation(u,"modelViewMatrix"),projectionMatrix:n.getUniformLocation(u,"projectionMatrix"),fogType:n.getUniformLocation(u,"fogType"),fogDensity:n.getUniformLocation(u,"fogDensity"),fogNear:n.getUniformLocation(u,"fogNear"),fogFar:n.getUniformLocation(u,"fogFar"),fogColor:n.getUniformLocation(u,"fogColor"),alphaTest:n.getUniformLocation(u,"alphaTest")};var d=document.createElement("canvas");d.width=8,d.height=8;var f=d.getContext("2d");f.fillStyle="white",f.fillRect(0,0,8,8),o=new i.Texture(d),o.needsUpdate=!0},this.render=function(e,a){if(d.length=0,e.traverseVisible(function(e){e instanceof i.Sprite&&d.push(e)}),0!==d.length){n.useProgram(u),n.enableVertexAttribArray(h.position),n.enableVertexAttribArray(h.uv),n.disable(n.CULL_FACE),n.enable(n.BLEND),n.bindBuffer(n.ARRAY_BUFFER,c),n.vertexAttribPointer(h.position,2,n.FLOAT,!1,16,0),n.vertexAttribPointer(h.uv,2,n.FLOAT,!1,16,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,l),n.uniformMatrix4fv(p.projectionMatrix,!1,a.projectionMatrix.elements),n.activeTexture(n.TEXTURE0),n.uniform1i(p.map,0);var s=0,f=0,m=e.fog;m?(n.uniform3f(p.fogColor,m.color.r,m.color.g,m.color.b),m instanceof i.Fog?(n.uniform1f(p.fogNear,m.near),n.uniform1f(p.fogFar,m.far),n.uniform1i(p.fogType,1),s=1,f=1):m instanceof i.FogExp2&&(n.uniform1f(p.fogDensity,m.density),n.uniform1i(p.fogType,2),s=2,f=2)):(n.uniform1i(p.fogType,0),s=0,f=0);for(var v=0,g=d.length;g>v;v++){var y=d[v],x=y.material;y._modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,y.matrixWorld),y.z=-y._modelViewMatrix.elements[14]}d.sort(t);for(var _=[],v=0,g=d.length;g>v;v++){var y=d[v],x=y.material;n.uniform1f(p.alphaTest,x.alphaTest),n.uniformMatrix4fv(p.modelViewMatrix,!1,y._modelViewMatrix.elements),_[0]=y.scale.x,_[1]=y.scale.y;var b=0;e.fog&&x.fog&&(b=f),s!==b&&(n.uniform1i(p.fogType,b),s=b),null!==x.map?(n.uniform2f(p.uvOffset,x.map.offset.x,x.map.offset.y),n.uniform2f(p.uvScale,x.map.repeat.x,x.map.repeat.y)):(n.uniform2f(p.uvOffset,0,0),n.uniform2f(p.uvScale,1,1)),n.uniform1f(p.opacity,x.opacity),n.uniform3f(p.color,x.color.r,x.color.g,x.color.b),n.uniform1f(p.rotation,x.rotation),n.uniform2fv(p.scale,_),r.setBlending(x.blending,x.blendEquation,x.blendSrc,x.blendDst),r.setDepthTest(x.depthTest),r.setDepthWrite(x.depthWrite),x.map&&x.map.image&&x.map.image.width?r.setTexture(x.map,0):r.setTexture(o,0),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)}n.enable(n.CULL_FACE)}}},i.DepthPassPlugin=function(){function e(t,n,r){if(n.visible){var i=t.__webglObjects[n.id];if(i&&(n.frustumCulled===!1||l.intersectsObject(n)===!0))for(var o=0,a=i.length;a>o;o++){var s=i[o];n._modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,n.matrixWorld),h.push(s)}for(var o=0,a=n.children.length;a>o;o++)e(t,n.children[o],r)}}function t(e){return e.material instanceof i.MeshFaceMaterial?e.material.materials[0]:e.material}this.enabled=!1,this.renderTarget=null;var n,r,o,a,s,c,l=new i.Frustum,u=new i.Matrix4,h=[];this.init=function(e){n=e.context,r=e;var t=i.ShaderLib.depthRGBA,l=i.UniformsUtils.clone(t.uniforms);o=new i.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:l}),a=new i.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:l,morphTargets:!0}),s=new i.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:l,skinning:!0}),c=new i.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:l,morphTargets:!0,skinning:!0}),o._shadowPass=!0,a._shadowPass=!0,s._shadowPass=!0,c._shadowPass=!0},this.render=function(e,t){this.enabled&&this.update(e,t)},this.update=function(p,d){var f,m,v,g,y,x,_,b=null;n.clearColor(1,1,1,1),n.disable(n.BLEND),r.setDepthTest(!0),p.autoUpdate===!0&&p.updateMatrixWorld(),d.matrixWorldInverse.getInverse(d.matrixWorld),u.multiplyMatrices(d.projectionMatrix,d.matrixWorldInverse),l.setFromMatrix(u),r.setRenderTarget(this.renderTarget),r.clear(),h.length=0,e(p,p,d);var w,E,M;for(f=0,m=h.length;m>f;f++)y=h[f],x=y.object,v=y.buffer,x instanceof i.PointCloud&&!x.customDepthMaterial||(w=t(x),w&&r.setMaterialFaces(x.material),E=void 0!==x.geometry.morphTargets&&x.geometry.morphTargets.length>0&&w.morphTargets,M=x instanceof i.SkinnedMesh&&w.skinning,g=x.customDepthMaterial?x.customDepthMaterial:M?E?c:s:E?a:o,v instanceof i.BufferGeometry?r.renderBufferDirect(d,p.__lights,b,g,v,x):r.renderBuffer(d,p.__lights,b,g,v,x));for(_=p.__webglObjectsImmediate,f=0,m=_.length;m>f;f++)y=_[f],x=y.object,x.visible&&(x._modelViewMatrix.multiplyMatrices(d.matrixWorldInverse,x.matrixWorld),r.renderImmediateObject(d,p.__lights,b,o,x));var C=r.getClearColor(),S=r.getClearAlpha();n.clearColor(C.r,C.g,C.b,S),n.enable(n.BLEND)}},i.ShaderFlares={lensFlareVertexTexture:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},lensFlare:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision mediump float;","uniform lowp int renderType;","uniform sampler2D map;","uniform sampler2D occlusionMap;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;","visibility = ( 1.0 - visibility / 4.0 );","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * visibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")}},"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=i),n.THREE=i):this.THREE=i},{}]},{},[]),window.React=require("react"),window.ReactTHREE=require("react-three"),window.THREE=require("three");